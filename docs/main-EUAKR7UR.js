import{a as P,b as fe,c as Vp,d as N,e as MI,f as ol,g as xI,h as RI,i as NI,j as Lp,k as PI,l as Wa,m as jp,n as sl,o as kI,p as OI,q as Bp,r as qe,s as Ni,t as Un,u as al,v as Ka,w as FI,x as VI,y as Ur,z as un}from"./chunk-4ZHOUZTK.js";function LI(n,e){return Object.is(n,e)}var ut=null,ul=!1,cl=1,hr=Symbol("SIGNAL");function Ie(n){let e=ut;return ut=n,e}function jI(){return ut}var Ya={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Hp(n){if(ul)throw new Error("");if(ut===null)return;ut.consumerOnSignalRead(n);let e=ut.nextProducerIndex++;if(fl(ut),e<ut.producerNode.length&&ut.producerNode[e]!==n&&Qa(ut)){let t=ut.producerNode[e];hl(t,ut.producerIndexOfThis[e])}ut.producerNode[e]!==n&&(ut.producerNode[e]=n,ut.producerIndexOfThis[e]=Qa(ut)?HI(n,ut,e):0),ut.producerLastReadVersion[e]=n.version}function rN(){cl++}function BI(n){if(!(Qa(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===cl)){if(!n.producerMustRecompute(n)&&!zp(n)){n.dirty=!1,n.lastCleanEpoch=cl;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=cl}}function UI(n){if(n.liveConsumerNode===void 0)return;let e=ul;ul=!0;try{for(let t of n.liveConsumerNode)t.dirty||iN(t)}finally{ul=e}}function $I(){return ut?.consumerAllowSignalWrites!==!1}function iN(n){n.dirty=!0,UI(n),n.consumerMarkedDirty?.(n)}function dl(n){return n&&(n.nextProducerIndex=0),Ie(n)}function qp(n,e){if(Ie(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Qa(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)hl(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function zp(n){fl(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(BI(t),r!==t.version))return!0}return!1}function Gp(n){if(fl(n),Qa(n))for(let e=0;e<n.producerNode.length;e++)hl(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function HI(n,e,t){if(qI(n),n.liveConsumerNode.length===0&&zI(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=HI(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function hl(n,e){if(qI(n),n.liveConsumerNode.length===1&&zI(n))for(let r=0;r<n.producerNode.length;r++)hl(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];fl(i),i.producerIndexOfThis[r]=e}}function Qa(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function fl(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function qI(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function zI(n){return n.producerNode!==void 0}function GI(n){let e=Object.create(oN);e.computation=n;let t=()=>{if(BI(e),Hp(e),e.value===ll)throw e.error;return e.value};return t[hr]=e,t}var Up=Symbol("UNSET"),$p=Symbol("COMPUTING"),ll=Symbol("ERRORED"),oN=fe(P({},Ya),{value:Up,dirty:!0,error:null,equal:LI,producerMustRecompute(n){return n.value===Up||n.value===$p},producerRecomputeValue(n){if(n.value===$p)throw new Error("Detected cycle in computations.");let e=n.value;n.value=$p;let t=dl(n),r;try{r=n.computation()}catch(i){r=ll,n.error=i}finally{qp(n,t)}if(e!==Up&&e!==ll&&r!==ll&&n.equal(e,r)){n.value=e;return}n.value=r,n.version++}});function sN(){throw new Error}var WI=sN;function KI(){WI()}function QI(n){WI=n}var aN=null;function YI(n){let e=Object.create(JI);e.value=n;let t=()=>(Hp(e),e.value);return t[hr]=e,t}function Wp(n,e){$I()||KI(),n.equal(n.value,e)||(n.value=e,uN(n))}function ZI(n,e){$I()||KI(),Wp(n,e(n.value))}var JI=fe(P({},Ya),{equal:LI,value:void 0});function uN(n){n.version++,rN(),UI(n),aN?.()}function ie(n){return typeof n=="function"}function Uo(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var pl=Uo(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Pi(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Ke=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ie(r))try{r()}catch(o){e=o instanceof pl?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{XI(o)}catch(s){e=e??[],s instanceof pl?e=[...e,...s.errors]:e.push(s)}}if(e)throw new pl(e)}}add(e){var t;if(e&&e!==this)if(this.closed)XI(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Pi(t,e)}remove(e){let{_finalizers:t}=this;t&&Pi(t,e),e instanceof n&&e._removeParent(this)}};Ke.EMPTY=(()=>{let n=new Ke;return n.closed=!0,n})();var Kp=Ke.EMPTY;function gl(n){return n instanceof Ke||n&&"closed"in n&&ie(n.remove)&&ie(n.add)&&ie(n.unsubscribe)}function XI(n){ie(n)?n():n.unsubscribe()}var Sn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var $o={setTimeout(n,e,...t){let{delegate:r}=$o;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=$o;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function ml(n){$o.setTimeout(()=>{let{onUnhandledError:e}=Sn;if(e)e(n);else throw n})}function Za(){}var eD=Qp("C",void 0,void 0);function tD(n){return Qp("E",void 0,n)}function nD(n){return Qp("N",n,void 0)}function Qp(n,e,t){return{kind:n,value:e,error:t}}var ki=null;function Ho(n){if(Sn.useDeprecatedSynchronousErrorHandling){let e=!ki;if(e&&(ki={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=ki;if(ki=null,t)throw r}}else n()}function rD(n){Sn.useDeprecatedSynchronousErrorHandling&&ki&&(ki.errorThrown=!0,ki.error=n)}var Oi=class extends Ke{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,gl(e)&&e.add(this)):this.destination=dN}static create(e,t,r){return new fr(e,t,r)}next(e){this.isStopped?Zp(nD(e),this):this._next(e)}error(e){this.isStopped?Zp(tD(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Zp(eD,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},cN=Function.prototype.bind;function Yp(n,e){return cN.call(n,e)}var Jp=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){yl(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){yl(r)}else yl(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){yl(t)}}},fr=class extends Oi{constructor(e,t,r){super();let i;if(ie(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&Sn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Yp(e.next,o),error:e.error&&Yp(e.error,o),complete:e.complete&&Yp(e.complete,o)}):i=e}this.destination=new Jp(i)}};function yl(n){Sn.useDeprecatedSynchronousErrorHandling?rD(n):ml(n)}function lN(n){throw n}function Zp(n,e){let{onStoppedNotification:t}=Sn;t&&$o.setTimeout(()=>t(n,e))}var dN={closed:!0,next:Za,error:lN,complete:Za};var qo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function xt(n){return n}function Xp(...n){return eg(n)}function eg(n){return n.length===0?xt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var pe=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=fN(t)?t:new fr(t,r,i);return Ho(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=iD(r),new r((i,o)=>{let s=new fr({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[qo](){return this}pipe(...t){return eg(t)(this)}toPromise(t){return t=iD(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function iD(n){var e;return(e=n??Sn.Promise)!==null&&e!==void 0?e:Promise}function hN(n){return n&&ie(n.next)&&ie(n.error)&&ie(n.complete)}function fN(n){return n&&n instanceof Oi||hN(n)&&gl(n)}function tg(n){return ie(n?.lift)}function le(n){return e=>{if(tg(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function de(n,e,t,r,i){return new ng(n,e,t,r,i)}var ng=class extends Oi{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function zo(){return le((n,e)=>{let t=null;n._refCount++;let r=de(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Go=class extends pe{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,tg(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ke;let t=this.getSubject();e.add(this.source.subscribe(de(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ke.EMPTY)}return e}refCount(){return zo()(this)}};var oD=Uo(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var $e=(()=>{class n extends pe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new vl(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new oD}next(t){Ho(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Ho(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Ho(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Kp:(this.currentObservers=null,o.push(t),new Ke(()=>{this.currentObservers=null,Pi(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new pe;return t.source=this,t}}return n.create=(e,t)=>new vl(e,t),n})(),vl=class extends $e{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Kp}};var yt=class extends $e{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Ja={now(){return(Ja.delegate||Date).now()},delegate:void 0};var _l=class extends $e{constructor(e=1/0,t=1/0,r=Ja){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=t.now(),a=0;for(let u=1;u<r.length&&r[u]<=s;u+=2)a=u;a&&r.splice(0,a+1)}}};var wl=class extends Ke{constructor(e,t){super()}schedule(e,t=0){return this}};var Xa={setInterval(n,e,...t){let{delegate:r}=Xa;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Xa;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Wo=class extends wl{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Xa.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Xa.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Pi(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Ko=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Ko.now=Ja.now;var Qo=class extends Ko{constructor(e,t=Ko.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var eu=new Qo(Wo);var El=class extends Wo{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Il=class extends Qo{};var rg=new Il(El);var Rt=new pe(n=>n.complete());function sD(n){return n&&ie(n.schedule)}function ig(n){return n[n.length-1]}function Dl(n){return ie(ig(n))?n.pop():void 0}function $n(n){return sD(ig(n))?n.pop():void 0}function aD(n,e){return typeof ig(n)=="number"?n.pop():e}var Cl=n=>n&&typeof n.length=="number"&&typeof n!="function";function bl(n){return ie(n?.then)}function Tl(n){return ie(n[qo])}function Sl(n){return Symbol.asyncIterator&&ie(n?.[Symbol.asyncIterator])}function Al(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function pN(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ml=pN();function xl(n){return ie(n?.[Ml])}function Rl(n){return xI(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield ol(t.read());if(i)return yield ol(void 0);yield yield ol(r)}}finally{t.releaseLock()}})}function Nl(n){return ie(n?.getReader)}function je(n){if(n instanceof pe)return n;if(n!=null){if(Tl(n))return gN(n);if(Cl(n))return mN(n);if(bl(n))return yN(n);if(Sl(n))return uD(n);if(xl(n))return vN(n);if(Nl(n))return _N(n)}throw Al(n)}function gN(n){return new pe(e=>{let t=n[qo]();if(ie(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function mN(n){return new pe(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function yN(n){return new pe(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,ml)})}function vN(n){return new pe(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function uD(n){return new pe(e=>{wN(n,e).catch(t=>e.error(t))})}function _N(n){return uD(Rl(n))}function wN(n,e){var t,r,i,o;return MI(this,void 0,void 0,function*(){try{for(t=RI(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Ht(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function gn(n,e=0){return le((t,r)=>{t.subscribe(de(r,i=>Ht(r,n,()=>r.next(i),e),()=>Ht(r,n,()=>r.complete(),e),i=>Ht(r,n,()=>r.error(i),e)))})}function An(n,e=0){return le((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function cD(n,e){return je(n).pipe(An(e),gn(e))}function lD(n,e){return je(n).pipe(An(e),gn(e))}function dD(n,e){return new pe(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function hD(n,e){return new pe(t=>{let r;return Ht(t,e,()=>{r=n[Ml](),Ht(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>ie(r?.return)&&r.return()})}function Pl(n,e){if(!n)throw new Error("Iterable cannot be null");return new pe(t=>{Ht(t,e,()=>{let r=n[Symbol.asyncIterator]();Ht(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function fD(n,e){return Pl(Rl(n),e)}function pD(n,e){if(n!=null){if(Tl(n))return cD(n,e);if(Cl(n))return dD(n,e);if(bl(n))return lD(n,e);if(Sl(n))return Pl(n,e);if(xl(n))return hD(n,e);if(Nl(n))return fD(n,e)}throw Al(n)}function De(n,e){return e?pD(n,e):je(n)}function te(...n){let e=$n(n);return De(n,e)}function Yo(n,e){let t=ie(n)?n:()=>n,r=i=>i.error(t());return new pe(e?i=>e.schedule(r,0,i):r)}function og(n){return!!n&&(n instanceof pe||ie(n.lift)&&ie(n.subscribe))}var pr=Uo(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Q(n,e){return le((t,r)=>{let i=0;t.subscribe(de(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:EN}=Array;function IN(n,e){return EN(e)?n(...e):n(e)}function kl(n){return Q(e=>IN(n,e))}var{isArray:DN}=Array,{getPrototypeOf:CN,prototype:bN,keys:TN}=Object;function Ol(n){if(n.length===1){let e=n[0];if(DN(e))return{args:e,keys:null};if(SN(e)){let t=TN(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function SN(n){return n&&typeof n=="object"&&CN(n)===bN}function Fl(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function tu(...n){let e=$n(n),t=Dl(n),{args:r,keys:i}=Ol(n);if(r.length===0)return De([],e);let o=new pe(AN(r,e,i?s=>Fl(i,s):xt));return t?o.pipe(kl(t)):o}function AN(n,e,t=xt){return r=>{gD(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)gD(e,()=>{let l=De(n[u],e),h=!1;l.subscribe(de(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function gD(n,e,t){n?Ht(t,n,e):e()}function mD(n,e,t,r,i,o,s,a){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},y=A=>l<r?b(A):u.push(A),b=A=>{o&&e.next(A),l++;let M=!1;je(t(A,h++)).subscribe(de(e,L=>{i?.(L),o?y(L):e.next(L)},()=>{M=!0},void 0,()=>{if(M)try{for(l--;u.length&&l<r;){let L=u.shift();s?Ht(e,s,()=>b(L)):b(L)}m()}catch(L){e.error(L)}}))};return n.subscribe(de(e,y,()=>{p=!0,m()})),()=>{a?.()}}function tt(n,e,t=1/0){return ie(e)?tt((r,i)=>Q((o,s)=>e(r,o,i,s))(je(n(r,i))),t):(typeof e=="number"&&(t=e),le((r,i)=>mD(r,i,n,t)))}function $r(n=1/0){return tt(xt,n)}function yD(){return $r(1)}function Zo(...n){return yD()(De(n,$n(n)))}function Vl(n){return new pe(e=>{je(n()).subscribe(e)})}function sg(...n){let e=Dl(n),{args:t,keys:r}=Ol(n),i=new pe(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;je(t[h]).subscribe(de(o,m=>{p||(p=!0,l--),a[h]=m},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?Fl(r,a):a),o.complete())}))}});return e?i.pipe(kl(e)):i}function ag(...n){let e=$n(n),t=aD(n,1/0),r=n;return r.length?r.length===1?je(r[0]):$r(t)(De(r,e)):Rt}function vt(n,e){return le((t,r)=>{let i=0;t.subscribe(de(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Hr(n){return le((e,t)=>{let r=null,i=!1,o;r=e.subscribe(de(t,void 0,void 0,s=>{o=je(n(s,Hr(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function vD(n,e,t,r,i){return(o,s)=>{let a=t,u=e,l=0;o.subscribe(de(s,h=>{let p=l++;u=a?n(u,h,p):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function Fi(n,e){return ie(e)?tt(n,e,1):tt(n,1)}function qr(n){return le((e,t)=>{let r=!1;e.subscribe(de(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function gr(n){return n<=0?()=>Rt:le((e,t)=>{let r=0;e.subscribe(de(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function ug(n){return Q(()=>n)}function cg(n,e=xt){return n=n??MN,le((t,r)=>{let i,o=!0;t.subscribe(de(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function MN(n,e){return n===e}function Ll(n=xN){return le((e,t)=>{let r=!1;e.subscribe(de(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function xN(){return new pr}function nu(n){return le((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function mn(n,e){let t=arguments.length>=2;return r=>r.pipe(n?vt((i,o)=>n(i,o,r)):xt,gr(1),t?qr(e):Ll(()=>new pr))}function Jo(n){return n<=0?()=>Rt:le((e,t)=>{let r=[];e.subscribe(de(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function lg(n,e){let t=arguments.length>=2;return r=>r.pipe(n?vt((i,o)=>n(i,o,r)):xt,Jo(1),t?qr(e):Ll(()=>new pr))}function ru(){return le((n,e)=>{let t,r=!1;n.subscribe(de(e,i=>{let o=t;t=i,r&&e.next([o,i]),r=!0}))})}function Vi(n,e){return le(vD(n,e,arguments.length>=2,!0))}function _D(n={}){let{connector:e=()=>new $e,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,u,l=0,h=!1,p=!1,m=()=>{a?.unsubscribe(),a=void 0},y=()=>{m(),s=u=void 0,h=p=!1},b=()=>{let A=s;y(),A?.unsubscribe()};return le((A,M)=>{l++,!p&&!h&&m();let L=u=u??e();M.add(()=>{l--,l===0&&!p&&!h&&(a=dg(b,i))}),L.subscribe(M),!s&&l>0&&(s=new fr({next:G=>L.next(G),error:G=>{p=!0,m(),a=dg(y,t,G),L.error(G)},complete:()=>{h=!0,m(),a=dg(y,r),L.complete()}}),je(A).subscribe(s))})(o)}}function dg(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new fr({next:()=>{r.unsubscribe(),n()}});return je(e(...t)).subscribe(r)}function jl(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,_D({connector:()=>new _l(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Li(...n){let e=$n(n);return le((t,r)=>{(e?Zo(n,t,e):Zo(n,t)).subscribe(r)})}function Qe(n,e){return le((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(de(r,u=>{i?.unsubscribe();let l=0,h=o++;je(n(u,h)).subscribe(i=de(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Bl(n,e){return ie(e)?Qe(()=>n,e):Qe(()=>n)}function hg(n){return le((e,t)=>{je(n).subscribe(de(t,()=>t.complete(),Za)),!t.closed&&e.subscribe(t)})}function ct(n,e,t){let r=ie(n)||e||t?{next:n,error:e,complete:t}:n;return r?le((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(de(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):xt}var sC="https://g.co/ng/security#xss",J=class extends Error{constructor(e,t){super(fm(e,t)),this.code=e}};function fm(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function fu(n){return{toString:n}.toString()}var Ul="__parameters__";function RN(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function aC(n,e,t){return fu(()=>{let r=RN(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(Ul)?u[Ul]:Object.defineProperty(u,Ul,{value:[]})[Ul];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Rn=globalThis;function Ne(n){for(let e in n)if(n[e]===Ne)return e;throw Error("Could not find renamed property on target object.")}function NN(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function qt(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(qt).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function wD(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var PN=Ne({__forward_ref__:Ne});function _s(n){return n.__forward_ref__=_s,n.toString=function(){return qt(this())},n}function Nt(n){return uC(n)?n():n}function uC(n){return typeof n=="function"&&n.hasOwnProperty(PN)&&n.__forward_ref__===_s}function H(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function ht(n){return{providers:n.providers||[],imports:n.imports||[]}}function bd(n){return ED(n,lC)||ED(n,dC)}function cC(n){return bd(n)!==null}function ED(n,e){return n.hasOwnProperty(e)?n[e]:null}function kN(n){let e=n&&(n[lC]||n[dC]);return e||null}function ID(n){return n&&(n.hasOwnProperty(DD)||n.hasOwnProperty(ON))?n[DD]:null}var lC=Ne({\u0275prov:Ne}),DD=Ne({\u0275inj:Ne}),dC=Ne({ngInjectableDef:Ne}),ON=Ne({ngInjectorDef:Ne}),W=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=H({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function hC(n){return n&&!!n.\u0275providers}var FN=Ne({\u0275cmp:Ne}),VN=Ne({\u0275dir:Ne}),LN=Ne({\u0275pipe:Ne}),jN=Ne({\u0275mod:Ne}),Zl=Ne({\u0275fac:Ne}),ou=Ne({__NG_ELEMENT_ID__:Ne}),CD=Ne({__NG_ENV_ID__:Ne});function os(n){return typeof n=="string"?n:n==null?"":String(n)}function BN(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():os(n)}function UN(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new J(-200,n)}function pm(n,e){throw new J(-201,!1)}var he=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(he||{}),Tg;function fC(){return Tg}function yn(n){let e=Tg;return Tg=n,e}function pC(n,e,t){let r=bd(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&he.Optional)return null;if(e!==void 0)return e;pm(n,"Injector")}var $N={},au=$N,Sg="__NG_DI_FLAG__",Jl="ngTempTokenPath",HN="ngTokenPath",qN=/\n/gm,zN="\u0275",bD="__source",rs;function GN(){return rs}function zr(n){let e=rs;return rs=n,e}function WN(n,e=he.Default){if(rs===void 0)throw new J(-203,!1);return rs===null?pC(n,void 0,e):rs.get(n,e&he.Optional?null:void 0,e)}function F(n,e=he.Default){return(fC()||WN)(Nt(n),e)}function B(n,e=he.Default){return F(n,Td(e))}function Td(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Ag(n){let e=[];for(let t=0;t<n.length;t++){let r=Nt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new J(900,!1);let i,o=he.Default;for(let s=0;s<r.length;s++){let a=r[s],u=KN(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(F(i,o))}else e.push(F(r))}return e}function gC(n,e){return n[Sg]=e,n.prototype[Sg]=e,n}function KN(n){return n[Sg]}function QN(n,e,t,r){let i=n[Jl];throw e[bD]&&i.unshift(e[bD]),n.message=YN(`
`+n.message,i,t,r),n[HN]=i,n[Jl]=null,n}function YN(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==zN?n.slice(2):n;let i=qt(e);if(Array.isArray(e))i=e.map(qt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):qt(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(qN,`
  `)}`}var ws=gC(aC("Optional"),8);var gm=gC(aC("SkipSelf"),4);function ss(n,e){let t=n.hasOwnProperty(Zl);return t?n[Zl]:null}function mm(n,e){n.forEach(t=>Array.isArray(t)?mm(t,e):e(t))}function mC(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Xl(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function ZN(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function JN(n,e,t){let r=pu(n,e);return r>=0?n[r|1]=t:(r=~r,ZN(n,r,e,t)),r}function fg(n,e){let t=pu(n,e);if(t>=0)return n[t|1]}function pu(n,e){return XN(n,e,1)}function XN(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var as={},vn=[],us=new W(""),yC=new W("",-1),vC=new W(""),ed=class{get(e,t=au){if(t===au){let r=new Error(`NullInjectorError: No provider for ${qt(e)}!`);throw r.name="NullInjectorError",r}return t}},_C=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(_C||{}),zn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(zn||{}),Kr=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Kr||{});function eP(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function Mg(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];tP(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function wC(n){return n===3||n===4||n===6}function tP(n){return n.charCodeAt(0)===64}function uu(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?TD(n,t,i,null,e[++r]):TD(n,t,i,null,null))}}return n}function TD(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var EC="ng-template";function nP(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&eP(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(ym(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function ym(n){return n.type===4&&n.value!==EC}function rP(n,e,t){let r=n.type===4&&!t?EC:n.value;return e===r}function iP(n,e,t){let r=4,i=n.attrs,o=i!==null?aP(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!Mn(r)&&!Mn(u))return!1;if(s&&Mn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!rP(n,u,t)||u===""&&e.length===1){if(Mn(r))return!1;s=!0}}else if(r&8){if(i===null||!nP(n,i,u,t)){if(Mn(r))return!1;s=!0}}else{let l=e[++a],h=oP(u,i,ym(n),t);if(h===-1){if(Mn(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(Mn(r))return!1;s=!0}}}}return Mn(r)||s}function Mn(n){return(n&1)===0}function oP(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return uP(e,n)}function sP(n,e,t=!1){for(let r=0;r<e.length;r++)if(iP(n,e[r],t))return!0;return!1}function aP(n){for(let e=0;e<n.length;e++){let t=n[e];if(wC(t))return e}return n.length}function uP(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function SD(n,e){return n?":not("+e.trim()+")":e}function cP(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Mn(s)&&(e+=SD(o,i),i=""),r=s,o=o||!Mn(r);t++}return i!==""&&(e+=SD(o,i)),e}function lP(n){return n.map(cP).join(",")}function dP(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!Mn(i))break;i=o}r++}return{attrs:e,classes:t}}function ft(n){return fu(()=>{let e=TC(n),t=fe(P({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===_C.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||zn.Emulated,styles:n.styles||vn,_:null,schemas:n.schemas||null,tView:null,id:""});SC(t);let r=n.dependencies;return t.directiveDefs=MD(r,!1),t.pipeDefs=MD(r,!0),t.id=pP(t),t})}function hP(n){return Qr(n)||IC(n)}function fP(n){return n!==null}function pt(n){return fu(()=>({type:n.type,bootstrap:n.bootstrap||vn,declarations:n.declarations||vn,imports:n.imports||vn,exports:n.exports||vn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function AD(n,e){if(n==null)return as;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=Kr.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==Kr.None?[r,a]:r,e[o]=s):t[o]=r}return t}function zt(n){return fu(()=>{let e=TC(n);return SC(e),e})}function Qr(n){return n[FN]||null}function IC(n){return n[VN]||null}function DC(n){return n[LN]||null}function CC(n){let e=Qr(n)||IC(n)||DC(n);return e!==null?e.standalone:!1}function bC(n,e){let t=n[jN]||null;if(!t&&e===!0)throw new Error(`Type ${qt(n)} does not have '\u0275mod' property.`);return t}function TC(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||as,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||vn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:AD(n.inputs,e),outputs:AD(n.outputs),debugInfo:null}}function SC(n){n.features?.forEach(e=>e(n))}function MD(n,e){if(!n)return null;let t=e?DC:hP;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(fP)}function pP(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function gP(...n){return{\u0275providers:AC(!0,n),\u0275fromNgModule:!0}}function AC(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return mm(e,s=>{let a=s;xg(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&MC(i,o),t}function MC(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];vm(i,o=>{e(o,r)})}}function xg(n,e,t,r){if(n=Nt(n),!n)return!1;let i=null,o=ID(n),s=!o&&Qr(n);if(!o&&!s){let u=n.ngModule;if(o=ID(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)xg(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{mm(o.imports,h=>{xg(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&MC(l,e)}if(!a){let l=ss(i)||(()=>new i);e({provide:i,useFactory:l,deps:vn},i),e({provide:vC,useValue:i,multi:!0},i),e({provide:us,useValue:()=>F(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=n;vm(u,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function vm(n,e){for(let t of n)hC(t)&&(t=t.\u0275providers),Array.isArray(t)?vm(t,e):e(t)}var mP=Ne({provide:String,useValue:Ne});function xC(n){return n!==null&&typeof n=="object"&&mP in n}function yP(n){return!!(n&&n.useExisting)}function vP(n){return!!(n&&n.useFactory)}function cs(n){return typeof n=="function"}function _P(n){return!!n.useClass}var Sd=new W(""),Wl={},wP={},pg;function _m(){return pg===void 0&&(pg=new ed),pg}var cn=class{},cu=class extends cn{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Ng(e,s=>this.processProvider(s)),this.records.set(yC,Xo(void 0,this)),i.has("environment")&&this.records.set(cn,Xo(void 0,this));let o=this.records.get(Sd);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(vC,vn,he.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Ie(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ie(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=zr(this),r=yn(void 0),i;try{return e()}finally{zr(t),yn(r)}}get(e,t=au,r=he.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(CD))return e[CD](this);r=Td(r);let i,o=zr(this),s=yn(void 0);try{if(!(r&he.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=bP(e)&&bd(e);l&&this.injectableDefInScope(l)?u=Xo(Rg(e),Wl):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&he.Self?_m():this.parent;return t=r&he.Optional&&t===au?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Jl]=a[Jl]||[]).unshift(qt(e)),o)throw a;return QN(a,e,"R3InjectorError",this.source)}else throw a}finally{yn(s),zr(o)}}resolveInjectorInitializers(){let e=Ie(null),t=zr(this),r=yn(void 0),i;try{let o=this.get(us,vn,he.Self);for(let s of o)s()}finally{zr(t),yn(r),Ie(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(qt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new J(205,!1)}processProvider(e){e=Nt(e);let t=cs(e)?e:Nt(e&&e.provide),r=IP(e);if(!cs(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Xo(void 0,Wl,!0),i.factory=()=>Ag(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=Ie(null);try{return t.value===Wl&&(t.value=wP,t.value=t.factory()),typeof t.value=="object"&&t.value&&CP(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Ie(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Nt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Rg(n){let e=bd(n),t=e!==null?e.factory:ss(n);if(t!==null)return t;if(n instanceof W)throw new J(204,!1);if(n instanceof Function)return EP(n);throw new J(204,!1)}function EP(n){if(n.length>0)throw new J(204,!1);let t=kN(n);return t!==null?()=>t.factory(n):()=>new n}function IP(n){if(xC(n))return Xo(void 0,n.useValue);{let e=RC(n);return Xo(e,Wl)}}function RC(n,e,t){let r;if(cs(n)){let i=Nt(n);return ss(i)||Rg(i)}else if(xC(n))r=()=>Nt(n.useValue);else if(vP(n))r=()=>n.useFactory(...Ag(n.deps||[]));else if(yP(n))r=()=>F(Nt(n.useExisting));else{let i=Nt(n&&(n.useClass||n.provide));if(DP(n))r=()=>new i(...Ag(n.deps));else return ss(i)||Rg(i)}return r}function Xo(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function DP(n){return!!n.deps}function CP(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function bP(n){return typeof n=="function"||typeof n=="object"&&n instanceof W}function Ng(n,e){for(let t of n)Array.isArray(t)?Ng(t,e):t&&hC(t)?Ng(t.\u0275providers,e):e(t)}function Qn(n,e){n instanceof cu&&n.assertNotDestroyed();let t,r=zr(n),i=yn(void 0);try{return e()}finally{zr(r),yn(i)}}function NC(){return fC()!==void 0||GN()!=null}function TP(n){if(!NC())throw new J(-203,!1)}function SP(n){let e=Rn.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function AP(n){return typeof n=="function"}var _r=0,ye=1,oe=2,Pt=3,xn=4,Pn=5,td=6,nd=7,Nn=8,ls=9,Gn=10,rt=11,lu=12,xD=13,Es=14,Wn=15,ds=16,es=17,hs=18,Ad=19,PC=20,Gr=21,gg=22,_n=23,Yr=25,kC=1;var Bi=7,rd=8,id=9,wn=10,od=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(od||{});function Wr(n){return Array.isArray(n)&&typeof n[kC]=="object"}function wr(n){return Array.isArray(n)&&n[kC]===!0}function OC(n){return(n.flags&4)!==0}function Md(n){return n.componentOffset>-1}function wm(n){return(n.flags&1)===1}function Zr(n){return!!n.template}function Pg(n){return(n[oe]&512)!==0}var kg=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function FC(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function Ki(){return VC}function VC(n){return n.type.prototype.ngOnChanges&&(n.setInput=xP),MP}Ki.ngInherit=!0;function MP(){let n=jC(this),e=n?.current;if(e){let t=n.previous;if(t===as)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function xP(n,e,t,r,i){let o=this.declaredInputs[r],s=jC(n)||RP(n,{previous:as,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new kg(l&&l.currentValue,t,u===as),FC(n,e,i,t)}var LC="__ngSimpleChanges__";function jC(n){return n[LC]||null}function RP(n,e){return n[LC]=e}var RD=null;var Hn=function(n,e,t){RD?.(n,e,t)},NP="svg",PP="math";function Kn(n){for(;Array.isArray(n);)n=n[_r];return n}function BC(n,e){return Kn(e[n])}function En(n,e){return Kn(e[n.index])}function UC(n,e){return n.data[e]}function Xr(n,e){let t=e[n];return Wr(t)?t:t[_r]}function Em(n){return(n[oe]&128)===128}function kP(n){return wr(n[Pt])}function sd(n,e){return e==null?null:n[e]}function $C(n){n[es]=0}function HC(n){n[oe]&1024||(n[oe]|=1024,Em(n)&&Rd(n))}function OP(n,e){for(;n>0;)e=e[Es],n--;return e}function xd(n){return!!(n[oe]&9216||n[_n]?.dirty)}function Og(n){n[Gn].changeDetectionScheduler?.notify(8),n[oe]&64&&(n[oe]|=1024),xd(n)&&Rd(n)}function Rd(n){n[Gn].changeDetectionScheduler?.notify(0);let e=Ui(n);for(;e!==null&&!(e[oe]&8192||(e[oe]|=8192,!Em(e)));)e=Ui(e)}function qC(n,e){if((n[oe]&256)===256)throw new J(911,!1);n[Gr]===null&&(n[Gr]=[]),n[Gr].push(e)}function FP(n,e){if(n[Gr]===null)return;let t=n[Gr].indexOf(e);t!==-1&&n[Gr].splice(t,1)}function Ui(n){let e=n[Pt];return wr(e)?e[Pt]:e}var ge={lFrame:e0(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var zC=!1;function VP(){return ge.lFrame.elementDepthCount}function LP(){ge.lFrame.elementDepthCount++}function jP(){ge.lFrame.elementDepthCount--}function GC(){return ge.bindingsEnabled}function BP(){return ge.skipHydrationRootTNode!==null}function UP(n){return ge.skipHydrationRootTNode===n}function $P(){ge.skipHydrationRootTNode=null}function Pe(){return ge.lFrame.lView}function Gt(){return ge.lFrame.tView}function Wt(n){return ge.lFrame.contextLView=n,n[Nn]}function Kt(n){return ge.lFrame.contextLView=null,n}function kt(){let n=WC();for(;n!==null&&n.type===64;)n=n.parent;return n}function WC(){return ge.lFrame.currentTNode}function HP(){let n=ge.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function gu(n,e){let t=ge.lFrame;t.currentTNode=n,t.isParent=e}function KC(){return ge.lFrame.isParent}function qP(){ge.lFrame.isParent=!1}function QC(){return zC}function ND(n){zC=n}function zP(){return ge.lFrame.bindingIndex}function GP(n){return ge.lFrame.bindingIndex=n}function Nd(){return ge.lFrame.bindingIndex++}function YC(n){let e=ge.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function WP(){return ge.lFrame.inI18n}function KP(n,e){let t=ge.lFrame;t.bindingIndex=t.bindingRootIndex=n,Fg(e)}function QP(){return ge.lFrame.currentDirectiveIndex}function Fg(n){ge.lFrame.currentDirectiveIndex=n}function YP(n){let e=ge.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function ZC(n){ge.lFrame.currentQueryIndex=n}function ZP(n){let e=n[ye];return e.type===2?e.declTNode:e.type===1?n[Pn]:null}function JC(n,e,t){if(t&he.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&he.Host);)if(i=ZP(o),i===null||(o=o[Es],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=ge.lFrame=XC();return r.currentTNode=e,r.lView=n,!0}function Im(n){let e=XC(),t=n[ye];ge.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function XC(){let n=ge.lFrame,e=n===null?null:n.child;return e===null?e0(n):e}function e0(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function t0(){let n=ge.lFrame;return ge.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var n0=t0;function Dm(){let n=t0();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function JP(n){return(ge.lFrame.contextLView=OP(n,ge.lFrame.contextLView))[Nn]}function Qi(){return ge.lFrame.selectedIndex}function $i(n){ge.lFrame.selectedIndex=n}function Pd(){let n=ge.lFrame;return UC(n.tView,n.selectedIndex)}function XP(){return ge.lFrame.currentNamespace}var r0=!0;function Cm(){return r0}function bm(n){r0=n}function e1(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=VC(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function Tm(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function Kl(n,e,t){i0(n,e,3,t)}function Ql(n,e,t,r){(n[oe]&3)===t&&i0(n,e,t,r)}function mg(n,e){let t=n[oe];(t&3)===e&&(t&=16383,t+=1,n[oe]=t)}function i0(n,e,t,r){let i=r!==void 0?n[es]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[es]+=65536),(a<o||o==-1)&&(t1(n,t,e,u),n[es]=(n[es]&4294901760)+u+2),u++}function PD(n,e){Hn(4,n,e);let t=Ie(null);try{e.call(n)}finally{Ie(t),Hn(5,n,e)}}function t1(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[oe]>>14<n[es]>>16&&(n[oe]&3)===e&&(n[oe]+=16384,PD(a,o)):PD(a,o)}var is=-1,Hi=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function n1(n){return n instanceof Hi}function r1(n){return(n.flags&8)!==0}function i1(n){return(n.flags&16)!==0}var yg={},Vg=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Td(r);let i=this.injector.get(e,yg,r);return i!==yg||t===yg?i:this.parentInjector.get(e,t,r)}};function o0(n){return n!==is}function ad(n){return n&32767}function o1(n){return n>>16}function ud(n,e){let t=o1(n),r=e;for(;t>0;)r=r[Es],t--;return r}var Lg=!0;function kD(n){let e=Lg;return Lg=n,e}var s1=256,s0=s1-1,a0=5,a1=0,qn={};function u1(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(ou)&&(r=t[ou]),r==null&&(r=t[ou]=a1++);let i=r&s0,o=1<<i;e.data[n+(i>>a0)]|=o}function cd(n,e){let t=u0(n,e);if(t!==-1)return t;let r=e[ye];r.firstCreatePass&&(n.injectorIndex=e.length,vg(r.data,n),vg(e,null),vg(r.blueprint,null));let i=Sm(n,e),o=n.injectorIndex;if(o0(i)){let s=ad(i),a=ud(i,e),u=a[ye].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function vg(n,e){n.push(0,0,0,0,0,0,0,0,e)}function u0(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Sm(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=f0(i),r===null)return is;if(t++,i=i[Es],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return is}function jg(n,e,t){u1(n,e,t)}function c1(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(wC(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function c0(n,e,t){if(t&he.Optional||n!==void 0)return n;pm(e,"NodeInjector")}function l0(n,e,t,r){if(t&he.Optional&&r===void 0&&(r=null),!(t&(he.Self|he.Host))){let i=n[ls],o=yn(void 0);try{return i?i.get(e,r,t&he.Optional):pC(e,r,t&he.Optional)}finally{yn(o)}}return c0(r,e,t)}function d0(n,e,t,r=he.Default,i){if(n!==null){if(e[oe]&2048&&!(r&he.Self)){let s=p1(n,e,t,r,qn);if(s!==qn)return s}let o=h0(n,e,t,r,qn);if(o!==qn)return o}return l0(e,t,r,i)}function h0(n,e,t,r,i){let o=h1(t);if(typeof o=="function"){if(!JC(e,n,r))return r&he.Host?c0(i,t,r):l0(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&he.Optional))pm(t);else return s}finally{n0()}}else if(typeof o=="number"){let s=null,a=u0(n,e),u=is,l=r&he.Host?e[Wn][Pn]:null;for((a===-1||r&he.SkipSelf)&&(u=a===-1?Sm(n,e):e[a+8],u===is||!FD(r,!1)?a=-1:(s=e[ye],a=ad(u),e=ud(u,e)));a!==-1;){let h=e[ye];if(OD(o,a,h.data)){let p=l1(a,e,t,s,r,l);if(p!==qn)return p}u=e[a+8],u!==is&&FD(r,e[ye].data[a+8]===l)&&OD(o,a,e)?(s=h,a=ad(u),e=ud(u,e)):a=-1}}return i}function l1(n,e,t,r,i,o){let s=e[ye],a=s.data[n+8],u=r==null?Md(a)&&Lg:r!=s&&(a.type&3)!==0,l=i&he.Host&&o===a,h=d1(a,s,t,u,l);return h!==null?fs(e,s,h,a):qn}function d1(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,u=n.directiveStart,l=n.directiveEnd,h=o>>20,p=r?a:a+h,m=i?a+h:l;for(let y=p;y<m;y++){let b=s[y];if(y<u&&t===b||y>=u&&b.type===t)return y}if(i){let y=s[u];if(y&&Zr(y)&&y.type===t)return u}return null}function fs(n,e,t,r){let i=n[t],o=e.data;if(n1(i)){let s=i;s.resolving&&UN(BN(o[t]));let a=kD(s.canSeeViewProviders);s.resolving=!0;let u,l=s.injectImpl?yn(s.injectImpl):null,h=JC(n,r,he.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&e1(t,o[t],e)}finally{l!==null&&yn(l),kD(a),s.resolving=!1,n0()}}return i}function h1(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(ou)?n[ou]:void 0;return typeof e=="number"?e>=0?e&s0:f1:e}function OD(n,e,t){let r=1<<n;return!!(t[e+(n>>a0)]&r)}function FD(n,e){return!(n&he.Self)&&!(n&he.Host&&e)}var ji=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return d0(this._tNode,this._lView,e,Td(r),t)}};function f1(){return new ji(kt(),Pe())}function mu(n){return fu(()=>{let e=n.prototype.constructor,t=e[Zl]||Bg(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Zl]||Bg(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Bg(n){return uC(n)?()=>{let e=Bg(Nt(n));return e&&e()}:ss(n)}function p1(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[oe]&2048&&!(s[oe]&512);){let a=h0(o,s,t,r|he.Self,qn);if(a!==qn)return a;let u=o.parent;if(!u){let l=s[PC];if(l){let h=l.get(t,qn,r);if(h!==qn)return h}u=f0(s),s=s[Es]}o=u}return i}function f0(n){let e=n[ye],t=e.type;return t===2?e.declTNode:t===1?n[Pn]:null}function Am(n){return c1(kt(),n)}function VD(n,e=null,t=null,r){let i=p0(n,e,t,r);return i.resolveInjectorInitializers(),i}function p0(n,e=null,t=null,r,i=new Set){let o=[t||vn,gP(n)];return r=r||(typeof n=="object"?void 0:qt(n)),new cu(o,e||_m(),r||null,i)}var ln=class n{static{this.THROW_IF_NOT_FOUND=au}static{this.NULL=new ed}static create(e,t){if(Array.isArray(e))return VD({name:""},t,e,"");{let r=e.name??"";return VD({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=H({token:n,providedIn:"any",factory:()=>F(yC)})}static{this.__NG_ELEMENT_ID__=-1}};var g1=new W("");g1.__NG_ELEMENT_ID__=n=>{let e=kt();if(e===null)throw new J(204,!1);if(e.type&2)return e.value;if(n&he.Optional)return null;throw new J(204,!1)};var m1="ngOriginalError";function _g(n){return n[m1]}var g0=!0,Mm=(()=>{class n{static{this.__NG_ELEMENT_ID__=y1}static{this.__NG_ENV_ID__=t=>t}}return n})(),Ug=class extends Mm{constructor(e){super(),this._lView=e}onDestroy(e){return qC(this._lView,e),()=>FP(this._lView,e)}};function y1(){return new Ug(Pe())}var Is=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new yt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}}return n})();var $g=class extends $e{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,NC()&&(this.destroyRef=B(Mm,{optional:!0})??void 0,this.pendingTasks=B(Is,{optional:!0})??void 0)}emit(e){let t=Ie(null);try{super.next(e)}finally{Ie(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Ke&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},nt=$g;function ld(...n){}function m0(n){let e,t;function r(){n=ld;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function LD(n){return queueMicrotask(()=>n()),()=>{n=ld}}var xm="isAngularZone",dd=xm+"_ID",v1=0,_e=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new nt(!1),this.onMicrotaskEmpty=new nt(!1),this.onStable=new nt(!1),this.onError=new nt(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=g0}=e;if(typeof Zone>"u")throw new J(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,E1(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(xm)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new J(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new J(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,_1,ld,ld);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},_1={};function Rm(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function w1(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){m0(()=>{n.callbackScheduled=!1,Hg(n),n.isCheckStableRunning=!0,Rm(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Hg(n)}function E1(n){let e=()=>{w1(n)},t=v1++;n._inner=n._inner.fork({name:"angular",properties:{[xm]:!0,[dd]:t,[dd+t]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(I1(u))return r.invokeTask(o,s,a,u);try{return jD(n),r.invokeTask(o,s,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),BD(n)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return jD(n),r.invoke(o,s,a,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!D1(u)&&e(),BD(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Hg(n),Rm(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Hg(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function jD(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function BD(n){n._nesting--,Rm(n)}var hd=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new nt,this.onMicrotaskEmpty=new nt,this.onStable=new nt,this.onError=new nt}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function I1(n){return y0(n,"__ignore_ng_zone__")}function D1(n){return y0(n,"__scheduler_tick__")}function y0(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}function C1(n="zone.js",e){return n==="noop"?new hd:n==="zone.js"?new _e(e):n}var mr=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&_g(e);for(;t&&_g(t);)t=_g(t);return t||null}},b1=new W("",{providedIn:"root",factory:()=>{let n=B(_e),e=B(mr);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function T1(){return kd(kt(),Pe())}function kd(n,e){return new ei(En(n,e))}var ei=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=T1}}return n})();function v0(n){return(n.flags&128)===128}var _0=new Map,S1=0;function A1(){return S1++}function M1(n){_0.set(n[Ad],n)}function qg(n){_0.delete(n[Ad])}var UD="__ngContext__";function qi(n,e){Wr(e)?(n[UD]=e[Ad],M1(e)):n[UD]=e}function w0(n){return I0(n[lu])}function E0(n){return I0(n[xn])}function I0(n){for(;n!==null&&!wr(n);)n=n[xn];return n}var zg;function D0(n){zg=n}function x1(){if(zg!==void 0)return zg;if(typeof document<"u")return document;throw new J(210,!1)}var Od=new W("",{providedIn:"root",factory:()=>R1}),R1="ng",Nm=new W(""),Qt=new W("",{providedIn:"platform",factory:()=>"unknown"});var Pm=new W("",{providedIn:"root",factory:()=>x1().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var N1="h",P1="b";var k1=()=>null;function km(n,e,t=!1){return k1(n,e,t)}var C0=!1,O1=new W("",{providedIn:"root",factory:()=>C0});var $l;function F1(){if($l===void 0&&($l=null,Rn.trustedTypes))try{$l=Rn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return $l}function $D(n){return F1()?.createScriptURL(n)||n}var fd=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${sC})`}};function yu(n){return n instanceof fd?n.changingThisBreaksApplicationSecurity:n}function Om(n,e){let t=V1(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${sC})`)}return t===e}function V1(n){return n instanceof fd&&n.getTypeName()||null}var L1=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function b0(n){return n=String(n),n.match(L1)?n:"unsafe:"+n}var Fd=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Fd||{});function j1(n){let e=S0();return e?e.sanitize(Fd.URL,n)||"":Om(n,"URL")?yu(n):b0(os(n))}function B1(n){let e=S0();if(e)return $D(e.sanitize(Fd.RESOURCE_URL,n)||"");if(Om(n,"ResourceURL"))return $D(yu(n));throw new J(904,!1)}function U1(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?B1:j1}function T0(n,e,t){return U1(e,t)(n)}function S0(){let n=Pe();return n&&n[Gn].sanitizer}function A0(n){return n instanceof Function?n():n}function $1(n){return(n??B(ln)).get(Qt)==="browser"}var yr=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(yr||{}),H1;function Fm(n,e){return H1(n,e)}function ts(n,e,t,r,i){if(r!=null){let o,s=!1;wr(r)?o=r:Wr(r)&&(s=!0,r=r[_r]);let a=Kn(r);n===0&&t!==null?i==null?P0(e,t,a):pd(e,t,a,i||null,!0):n===1&&t!==null?pd(e,t,a,i||null,!0):n===2?ik(e,a,s):n===3&&e.destroyNode(a),o!=null&&sk(e,n,o,t,i)}}function q1(n,e){return n.createText(e)}function z1(n,e,t){n.setValue(e,t)}function M0(n,e,t){return n.createElement(e,t)}function G1(n,e){x0(n,e),e[_r]=null,e[Pn]=null}function W1(n,e,t,r,i,o){r[_r]=i,r[Pn]=e,Vd(n,r,t,1,i,o)}function x0(n,e){e[Gn].changeDetectionScheduler?.notify(9),Vd(n,e,e[rt],2,null,null)}function K1(n){let e=n[lu];if(!e)return wg(n[ye],n);for(;e;){let t=null;if(Wr(e))t=e[lu];else{let r=e[wn];r&&(t=r)}if(!t){for(;e&&!e[xn]&&e!==n;)Wr(e)&&wg(e[ye],e),e=e[Pt];e===null&&(e=n),Wr(e)&&wg(e[ye],e),t=e&&e[xn]}e=t}}function Q1(n,e,t,r){let i=wn+r,o=t.length;r>0&&(t[i-1][xn]=e),r<o-wn?(e[xn]=t[i],mC(t,wn+r,e)):(t.push(e),e[xn]=null),e[Pt]=t;let s=e[ds];s!==null&&t!==s&&R0(s,e);let a=e[hs];a!==null&&a.insertView(n),Og(e),e[oe]|=128}function R0(n,e){let t=n[id],r=e[Pt];if(Wr(r))n[oe]|=od.HasTransplantedViews;else{let i=r[Pt][Wn];e[Wn]!==i&&(n[oe]|=od.HasTransplantedViews)}t===null?n[id]=[e]:t.push(e)}function Vm(n,e){let t=n[id],r=t.indexOf(e);t.splice(r,1)}function Gg(n,e){if(n.length<=wn)return;let t=wn+e,r=n[t];if(r){let i=r[ds];i!==null&&i!==n&&Vm(i,r),e>0&&(n[t-1][xn]=r[xn]);let o=Xl(n,wn+e);G1(r[ye],r);let s=o[hs];s!==null&&s.detachView(o[ye]),r[Pt]=null,r[xn]=null,r[oe]&=-129}return r}function N0(n,e){if(!(e[oe]&256)){let t=e[rt];t.destroyNode&&Vd(n,e,t,3,null,null),K1(e)}}function wg(n,e){if(e[oe]&256)return;let t=Ie(null);try{e[oe]&=-129,e[oe]|=256,e[_n]&&Gp(e[_n]),Z1(n,e),Y1(n,e),e[ye].type===1&&e[rt].destroy();let r=e[ds];if(r!==null&&wr(e[Pt])){r!==e[Pt]&&Vm(r,e);let i=e[hs];i!==null&&i.detachView(n)}qg(e)}finally{Ie(t)}}function Y1(n,e){let t=n.cleanup,r=e[nd];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[t[o+1]];t[o].call(s)}r!==null&&(e[nd]=null);let i=e[Gr];if(i!==null){e[Gr]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function Z1(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Hi)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];Hn(4,a,u);try{u.call(a)}finally{Hn(5,a,u)}}else{Hn(4,i,o);try{o.call(i)}finally{Hn(5,i,o)}}}}}function J1(n,e,t){return X1(n,e.parent,t)}function X1(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[_r];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===zn.None||o===zn.Emulated)return null}return En(r,t)}}function pd(n,e,t,r,i){n.insertBefore(e,t,r,i)}function P0(n,e,t){n.appendChild(e,t)}function HD(n,e,t,r,i){r!==null?pd(n,e,t,r,i):P0(n,e,t)}function k0(n,e){return n.parentNode(e)}function ek(n,e){return n.nextSibling(e)}function tk(n,e,t){return rk(n,e,t)}function nk(n,e,t){return n.type&40?En(n,t):null}var rk=nk,qD;function Lm(n,e,t,r){let i=J1(n,r,e),o=e[rt],s=r.parent||e[Pn],a=tk(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)HD(o,i,t[u],a,!1);else HD(o,i,t,a,!1);qD!==void 0&&qD(o,r,e,t,i)}function iu(n,e){if(e!==null){let t=e.type;if(t&3)return En(e,n);if(t&4)return Wg(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return iu(n,r);{let i=n[e.index];return wr(i)?Wg(-1,i):Kn(i)}}else{if(t&128)return iu(n,e.next);if(t&32)return Fm(e,n)()||Kn(n[e.index]);{let r=O0(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Ui(n[Wn]);return iu(i,r)}else return iu(n,e.next)}}}return null}function O0(n,e){if(e!==null){let r=n[Wn][Pn],i=e.projection;return r.projection[i]}return null}function Wg(n,e){let t=wn+n+1;if(t<e.length){let r=e[t],i=r[ye].firstChild;if(i!==null)return iu(r,i)}return e[Bi]}function ik(n,e,t){n.removeChild(null,e,t)}function jm(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],u=t.type;if(s&&e===0&&(a&&qi(Kn(a),r),t.flags|=2),(t.flags&32)!==32)if(u&8)jm(n,e,t.child,r,i,o,!1),ts(e,n,i,a,o);else if(u&32){let l=Fm(t,r),h;for(;h=l();)ts(e,n,i,h,o);ts(e,n,i,a,o)}else u&16?ok(n,e,r,t,i,o):ts(e,n,i,a,o);t=s?t.projectionNext:t.next}}function Vd(n,e,t,r,i,o){jm(t,r,n.firstChild,e,i,o,!1)}function ok(n,e,t,r,i,o){let s=t[Wn],u=s[Pn].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];ts(e,n,i,h,o)}else{let l=u,h=s[Pt];v0(r)&&(l.flags|=128),jm(n,e,l,h,i,o,!0)}}function sk(n,e,t,r,i){let o=t[Bi],s=Kn(t);o!==s&&ts(e,n,r,o,i);for(let a=wn;a<t.length;a++){let u=t[a];Vd(u[ye],u,n,e,r,o)}}function ak(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:yr.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=yr.Important),n.setStyle(t,r,i,o))}}function uk(n,e,t){n.setAttribute(e,"style",t)}function F0(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function V0(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&Mg(n,e,r),i!==null&&F0(n,e,i),o!==null&&uk(n,e,o)}var Er={};function re(n=1){L0(Gt(),Pe(),Qi()+n,!1)}function L0(n,e,t,r){if(!r)if((e[oe]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Kl(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Ql(e,o,0,t)}$i(t)}function se(n,e=he.Default){let t=Pe();if(t===null)return F(n,e);let r=kt();return d0(r,t,Nt(n),e)}function j0(){let n="invalid";throw new Error(n)}function B0(n,e,t,r,i,o){let s=Ie(null);try{let a=null;i&Kr.SignalBased&&(a=e[r][hr]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&Kr.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,a,o,t,r):FC(e,a,r,o)}finally{Ie(s)}}function ck(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)$i(~i);else{let o=i,s=t[++r],a=t[++r];KP(s,o);let u=e[o];a(2,u)}}}finally{$i(-1)}}function Ld(n,e,t,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[_r]=i,p[oe]=r|4|128|8|64,(l!==null||n&&n[oe]&2048)&&(p[oe]|=2048),$C(p),p[Pt]=p[Es]=n,p[Nn]=t,p[Gn]=s||n&&n[Gn],p[rt]=a||n&&n[rt],p[ls]=u||n&&n[ls]||null,p[Pn]=o,p[Ad]=A1(),p[td]=h,p[PC]=l,p[Wn]=e.type==2?n[Wn]:p,p}function jd(n,e,t,r,i){let o=n.data[e];if(o===null)o=lk(n,e,t,r,i),WP()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=HP();o.injectorIndex=s===null?-1:s.injectorIndex}return gu(o,!0),o}function lk(n,e,t,r,i){let o=WC(),s=KC(),a=s?o:o&&o.parent,u=n.data[e]=gk(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=u),o!==null&&(s?o.child==null&&u.parent!==null&&(o.child=u):o.next===null&&(o.next=u,u.prev=o)),u}function U0(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function $0(n,e,t,r,i){let o=Qi(),s=r&2;try{$i(-1),s&&e.length>Yr&&L0(n,e,Yr,!1),Hn(s?2:0,i),t(r,i)}finally{$i(o),Hn(s?3:1,i)}}function H0(n,e,t){if(OC(e)){let r=Ie(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let u=t[s];a.contentQueries(1,u,s)}}}finally{Ie(r)}}}function q0(n,e,t){GC()&&(Ek(n,e,t,En(t,e)),(t.flags&64)===64&&Q0(n,e,t))}function z0(n,e,t=En){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function G0(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Bm(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Bm(n,e,t,r,i,o,s,a,u,l,h){let p=Yr+r,m=p+i,y=dk(p,m),b=typeof l=="function"?l():l;return y[ye]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:b,incompleteFirstPass:!1,ssrId:h}}function dk(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Er);return t}function hk(n,e,t,r){let o=r.get(O1,C0)||t===zn.ShadowDom,s=n.selectRootElement(e,o);return fk(s),s}function fk(n){pk(n)}var pk=()=>null;function gk(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return BP()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function zD(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,u=Kr.None;Array.isArray(s)?(a=s[0],u=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}n===0?GD(r,t,l,a,u):GD(r,t,l,a)}return r}function GD(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function mk(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,a=[],u=null,l=null;for(let h=r;h<i;h++){let p=o[h],m=t?t.get(p):null,y=m?m.inputs:null,b=m?m.outputs:null;u=zD(0,p.inputs,h,u,y),l=zD(1,p.outputs,h,l,b);let A=u!==null&&s!==null&&!ym(e)?Nk(u,h,s):null;a.push(A)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}function yk(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function Um(n,e,t,r,i,o,s,a){let u=En(e,t),l=e.inputs,h;!a&&l!=null&&(h=l[r])?($m(n,t,h,r,i),Md(e)&&vk(t,e.index)):e.type&3?(r=yk(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)):e.type&12}function vk(n,e){let t=Xr(e,n);t[oe]&16||(t[oe]|=64)}function W0(n,e,t,r){if(GC()){let i=r===null?null:{"":-1},o=Dk(n,t),s,a;o===null?s=a=null:[s,a]=o,s!==null&&K0(n,e,t,s,i,a),i&&Ck(t,r,i)}t.mergedAttrs=uu(t.mergedAttrs,t.attrs)}function K0(n,e,t,r,i,o){for(let l=0;l<r.length;l++)jg(cd(t,e),n,r[l].type);Tk(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let s=!1,a=!1,u=U0(n,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];t.mergedAttrs=uu(t.mergedAttrs,h.hostAttrs),Sk(n,t,e,u,h),bk(u,h,i),h.contentQueries!==null&&(t.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(t.flags|=64);let p=h.type.prototype;!s&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),u++}mk(n,t,o)}function _k(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;wk(s)!=a&&s.push(a),s.push(t,r,o)}}function wk(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function Ek(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;Md(t)&&Ak(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||cd(t,e),qi(r,e);let s=t.initialInputs;for(let a=i;a<o;a++){let u=n.data[a],l=fs(e,n,a,t);if(qi(l,e),s!==null&&Rk(e,a-i,l,u,t,s),Zr(u)){let h=Xr(t.index,e);h[Nn]=fs(e,n,a,t)}}}function Q0(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=QP();try{$i(o);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];Fg(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&Ik(u,l)}}finally{$i(-1),Fg(s)}}function Ik(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function Dk(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(sP(e,s.selectors,!1))if(r||(r=[]),Zr(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let u=a.length;Kg(n,e,u)}else r.unshift(s),Kg(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function Kg(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function Ck(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new J(-301,!1);r.push(e[i],o)}}}function bk(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Zr(e)&&(t[""]=n)}}function Tk(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function Sk(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=ss(i.type,!0)),s=new Hi(o,Zr(i),se);n.blueprint[r]=s,t[r]=s,_k(n,e,r,U0(n,t,i.hostVars,Er),i)}function Ak(n,e,t){let r=En(e,n),i=G0(t),o=n[Gn].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let a=Bd(n,Ld(n,i,null,s,r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=a}function Mk(n,e,t,r,i,o){let s=En(n,e);xk(e[rt],s,o,n.value,t,r,i)}function xk(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?os(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function Rk(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let u=s[a++],l=s[a++],h=s[a++],p=s[a++];B0(r,t,u,l,h,p)}}function Nk(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}return r}function Y0(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function Z0(n,e){let t=n.contentQueries;if(t!==null){let r=Ie(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];ZC(o),a.contentQueries(2,e[s],s)}}}finally{Ie(r)}}}function Bd(n,e){return n[lu]?n[xD][xn]=e:n[lu]=e,n[xD]=e,e}function Qg(n,e,t){ZC(0);let r=Ie(null);try{e(n,t)}finally{Ie(r)}}function Pk(n){return n[nd]??=[]}function kk(n){return n.cleanup??=[]}function J0(n,e){let t=n[ls],r=t?t.get(mr,null):null;r&&r.handleError(e)}function $m(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],u=t[o++],l=e[s],h=n.data[s];B0(h,l,r,a,u,i)}}function X0(n,e,t){let r=BC(e,n);z1(n[rt],r,t)}function Ok(n,e){let t=Xr(e,n),r=t[ye];Fk(r,t);let i=t[_r];i!==null&&t[td]===null&&(t[td]=km(i,t[ls])),Hm(r,t,t[Nn])}function Fk(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Hm(n,e,t){Im(e);try{let r=n.viewQuery;r!==null&&Qg(1,r,t);let i=n.template;i!==null&&$0(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[hs]?.finishViewCreation(n),n.staticContentQueries&&Z0(n,e),n.staticViewQueries&&Qg(2,n.viewQuery,t);let o=n.components;o!==null&&Vk(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[oe]&=-5,Dm()}}function Vk(n,e){for(let t=0;t<e.length;t++)Ok(n,e[t])}function Lk(n,e,t,r){let i=Ie(null);try{let o=e.tView,a=n[oe]&4096?4096:16,u=Ld(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[ds]=l;let h=n[hs];return h!==null&&(u[hs]=h.createEmbeddedView(o)),Hm(o,u,t),u}finally{Ie(i)}}function WD(n,e){return!e||e.firstChild===null||v0(n)}function jk(n,e,t,r=!0){let i=e[ye];if(Q1(i,e,n,t),r){let s=Wg(t,n),a=e[rt],u=k0(a,n[Bi]);u!==null&&W1(i,n[Pn],a,e,u,s)}let o=e[td];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function gd(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Kn(o)),wr(o)&&Bk(o,r);let s=t.type;if(s&8)gd(n,e,t.child,r);else if(s&32){let a=Fm(t,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=O0(e,t);if(Array.isArray(a))r.push(...a);else{let u=Ui(e[Wn]);gd(u[ye],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function Bk(n,e){for(let t=wn;t<n.length;t++){let r=n[t],i=r[ye].firstChild;i!==null&&gd(r[ye],r,i,e)}n[Bi]!==n[_r]&&e.push(n[Bi])}var eb=[];function Uk(n){return n[_n]??$k(n)}function $k(n){let e=eb.pop()??Object.create(qk);return e.lView=n,e}function Hk(n){n.lView[_n]!==n&&(n.lView=null,eb.push(n))}var qk=fe(P({},Ya),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Rd(n.lView)},consumerOnSignalRead(){this.lView[_n]=this}});function zk(n){let e=n[_n]??Object.create(Gk);return e.lView=n,e}var Gk=fe(P({},Ya),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=Ui(n.lView);for(;e&&!tb(e[ye]);)e=Ui(e);e&&HC(e)},consumerOnSignalRead(){this.lView[_n]=this}});function tb(n){return n.type!==2}var Wk=100;function nb(n,e=!0,t=0){let r=n[Gn],i=r.rendererFactory,o=!1;o||i.begin?.();try{Kk(n,t)}catch(s){throw e&&J0(n,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function Kk(n,e){let t=QC();try{ND(!0),Yg(n,e);let r=0;for(;xd(n);){if(r===Wk)throw new J(103,!1);r++,Yg(n,1)}}finally{ND(t)}}function Qk(n,e,t,r){let i=e[oe];if((i&256)===256)return;let o=!1,s=!1;!o&&e[Gn].inlineEffectRunner?.flush(),Im(e);let a=!0,u=null,l=null;o||(tb(n)?(l=Uk(e),u=dl(l)):jI()===null?(a=!1,l=zk(e),u=dl(l)):e[_n]&&(Gp(e[_n]),e[_n]=null));try{$C(e),GP(n.bindingStartIndex),t!==null&&$0(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let y=n.preOrderCheckHooks;y!==null&&Kl(e,y,null)}else{let y=n.preOrderHooks;y!==null&&Ql(e,y,0,null),mg(e,0)}if(s||Yk(e),rb(e,0),n.contentQueries!==null&&Z0(n,e),!o)if(h){let y=n.contentCheckHooks;y!==null&&Kl(e,y)}else{let y=n.contentHooks;y!==null&&Ql(e,y,1),mg(e,1)}ck(n,e);let p=n.components;p!==null&&ob(e,p,0);let m=n.viewQuery;if(m!==null&&Qg(2,m,r),!o)if(h){let y=n.viewCheckHooks;y!==null&&Kl(e,y)}else{let y=n.viewHooks;y!==null&&Ql(e,y,2),mg(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[gg]){for(let y of e[gg])y();e[gg]=null}o||(e[oe]&=-73)}catch(h){throw o||Rd(e),h}finally{l!==null&&(qp(l,u),a&&Hk(l)),Dm()}}function rb(n,e){for(let t=w0(n);t!==null;t=E0(t))for(let r=wn;r<t.length;r++){let i=t[r];ib(i,e)}}function Yk(n){for(let e=w0(n);e!==null;e=E0(e)){if(!(e[oe]&od.HasTransplantedViews))continue;let t=e[id];for(let r=0;r<t.length;r++){let i=t[r];HC(i)}}}function Zk(n,e,t){let r=Xr(e,n);ib(r,t)}function ib(n,e){Em(n)&&Yg(n,e)}function Yg(n,e){let r=n[ye],i=n[oe],o=n[_n],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&zp(o)),s||=!1,o&&(o.dirty=!1),n[oe]&=-9217,s)Qk(r,n,r.template,n[Nn]);else if(i&8192){rb(n,1);let a=r.components;a!==null&&ob(n,a,1)}}function ob(n,e,t){for(let r=0;r<e.length;r++)Zk(n,e[r],t)}function qm(n,e){let t=QC()?64:1088;for(n[Gn].changeDetectionScheduler?.notify(e);n;){n[oe]|=t;let r=Ui(n);if(Pg(n)&&!r)return n;n=r}return null}var zi=class{get rootNodes(){let e=this._lView,t=e[ye];return gd(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Nn]}set context(e){this._lView[Nn]=e}get destroyed(){return(this._lView[oe]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Pt];if(wr(e)){let t=e[rd],r=t?t.indexOf(this):-1;r>-1&&(Gg(e,r),Xl(t,r))}this._attachedToViewContainer=!1}N0(this._lView[ye],this._lView)}onDestroy(e){qC(this._lView,e)}markForCheck(){qm(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[oe]&=-129}reattach(){Og(this._lView),this._lView[oe]|=128}detectChanges(){this._lView[oe]|=1024,nb(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new J(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Pg(this._lView),t=this._lView[ds];t!==null&&!e&&Vm(t,this._lView),x0(this._lView[ye],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new J(902,!1);this._appRef=e;let t=Pg(this._lView),r=this._lView[ds];r!==null&&!t&&R0(r,this._lView),Og(this._lView)}},zm=(()=>{class n{static{this.__NG_ELEMENT_ID__=eO}}return n})(),Jk=zm,Xk=class extends Jk{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=Lk(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new zi(i)}};function eO(){return tO(kt(),Pe())}function tO(n,e){return n.type&4?new Xk(e,n,kd(n,e)):null}var n9=new RegExp(`^(\\d+)*(${P1}|${N1})*(.*)`);var nO=()=>null;function KD(n,e){return nO(n,e)}var ps=class{},Gm=new W("",{providedIn:"root",factory:()=>!1});var sb=new W(""),ab=new W(""),Zg=class{},md=class{};function rO(n){let e=Error(`No component factory found for ${qt(n)}.`);return e[iO]=n,e}var iO="ngComponent";var Jg=class{resolveComponentFactory(e){throw rO(e)}},gs=class{static{this.NULL=new Jg}},ms=class{},Yi=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>oO()}}return n})();function oO(){let n=Pe(),e=kt(),t=Xr(e.index,n);return(Wr(t)?t:n)[rt]}var sO=(()=>{class n{static{this.\u0275prov=H({token:n,providedIn:"root",factory:()=>null})}}return n})();function Xg(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=wD(i,a);else if(o==2){let u=a,l=e[++s];r=wD(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var yd=class extends gs{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Qr(e);return new ys(t,this.ngModule)}};function QD(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:Kr.None;e?t.push({propName:s,templateName:r,isSignal:(a&Kr.SignalBased)!==0}):t.push({propName:s,templateName:r})}return t}function aO(n){let e=n.toLowerCase();return e==="svg"?NP:e==="math"?PP:null}var ys=class extends md{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=QD(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return QD(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=lP(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=Ie(null);try{i=i||this.ngModule;let s=i instanceof cn?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new Vg(e,s):e,u=a.get(ms,null);if(u===null)throw new J(407,!1);let l=a.get(sO,null),h=a.get(ps,null),p={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:h},m=u.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",b=r?hk(m,r,this.componentDef.encapsulation,a):M0(m,y,aO(y)),A=512;this.componentDef.signals?A|=4096:this.componentDef.onPush||(A|=16);let M=null;b!==null&&(M=km(b,a,!0));let L=Bm(0,null,null,1,0,null,null,null,null,null,null),G=Ld(null,L,null,A,null,null,p,m,a,null,M);Im(G);let V,Z,ne=null;try{let X=this.componentDef,E,v=null;X.findHostDirectiveDefs?(E=[],v=new Map,X.findHostDirectiveDefs(X,E,v),E.push(X)):E=[X];let w=uO(G,b);ne=cO(w,b,X,E,G,p,m),Z=UC(L,Yr),b&&hO(m,X,b,r),t!==void 0&&fO(Z,this.ngContentSelectors,t),V=dO(ne,X,E,v,G,[pO]),Hm(L,G,null)}catch(X){throw ne!==null&&qg(ne),qg(G),X}finally{Dm()}return new em(this.componentType,V,kd(Z,G),G,Z)}finally{Ie(o)}}},em=class extends Zg{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new zi(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;$m(o[ye],o,i,e,t),this.previousInputValues.set(e,t);let s=Xr(this._tNode.index,o);qm(s,1)}}get injector(){return new ji(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function uO(n,e){let t=n[ye],r=Yr;return n[r]=e,jd(t,r,2,"#host",null)}function cO(n,e,t,r,i,o,s){let a=i[ye];lO(r,n,e,s);let u=null;e!==null&&(u=km(e,i[ls]));let l=o.rendererFactory.createRenderer(e,t),h=16;t.signals?h=4096:t.onPush&&(h=64);let p=Ld(i,G0(t),null,h,i[n.index],n,o,l,null,null,u);return a.firstCreatePass&&Kg(a,n,r.length-1),Bd(i,p),i[n.index]=p}function lO(n,e,t,r){for(let i of n)e.mergedAttrs=uu(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Xg(e,e.mergedAttrs,!0),t!==null&&V0(r,t,e))}function dO(n,e,t,r,i,o){let s=kt(),a=i[ye],u=En(s,i);K0(a,i,s,t,null,r);for(let h=0;h<t.length;h++){let p=s.directiveStart+h,m=fs(i,a,p,s);qi(m,i)}Q0(a,i,s),u&&qi(u,i);let l=fs(i,a,s.directiveStart+s.componentOffset,s);if(n[Nn]=i[Nn]=l,o!==null)for(let h of o)h(l,e);return H0(a,s,i),l}function hO(n,e,t,r){if(r)Mg(n,t,["ng-version","18.2.13"]);else{let{attrs:i,classes:o}=dP(e.selectors[0]);i&&Mg(n,t,i),o&&o.length>0&&F0(n,t,o.join(" "))}}function fO(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null?Array.from(o):null)}}function pO(){let n=kt();Tm(Pe()[ye],n)}var vu=(()=>{class n{static{this.__NG_ELEMENT_ID__=gO}}return n})();function gO(){let n=kt();return yO(n,Pe())}var mO=vu,ub=class extends mO{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return kd(this._hostTNode,this._hostLView)}get injector(){return new ji(this._hostTNode,this._hostLView)}get parentInjector(){let e=Sm(this._hostTNode,this._hostLView);if(o0(e)){let t=ud(e,this._hostLView),r=ad(e),i=t[ye].data[r+8];return new ji(i,t)}else return new ji(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=YD(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-wn}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=KD(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,WD(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!AP(e),a;if(s)a=t;else{let b=t||{};a=b.index,r=b.injector,i=b.projectableNodes,o=b.environmentInjector||b.ngModuleRef}let u=s?e:new ys(Qr(e)),l=r||this.parentInjector;if(!o&&u.ngModule==null){let A=(s?l:this.parentInjector).get(cn,null);A&&(o=A)}let h=Qr(u.componentType??{}),p=KD(this._lContainer,h?.id??null),m=p?.firstChild??null,y=u.create(l,i,m,o);return this.insertImpl(y.hostView,a,WD(this._hostTNode,p)),y}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(kP(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[Pt],l=new ub(u,u[Pn],u[Pt]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return jk(s,i,o,r),e.attachToViewContainerRef(),mC(Eg(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=YD(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Gg(this._lContainer,t);r&&(Xl(Eg(this._lContainer),t),N0(r[ye],r))}detach(e){let t=this._adjustIndex(e,-1),r=Gg(this._lContainer,t);return r&&Xl(Eg(this._lContainer),t)!=null?new zi(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function YD(n){return n[rd]}function Eg(n){return n[rd]||(n[rd]=[])}function yO(n,e){let t,r=e[n.index];return wr(r)?t=r:(t=Y0(r,e,null,n),e[n.index]=t,Bd(e,t)),_O(t,e,n,r),new ub(t,n,e)}function vO(n,e){let t=n[rt],r=t.createComment(""),i=En(e,n),o=k0(t,i);return pd(t,o,r,ek(t,i),!1),r}var _O=IO,wO=()=>!1;function EO(n,e,t){return wO(n,e,t)}function IO(n,e,t,r){if(n[Bi])return;let i;t.type&8?i=Kn(r):i=vO(e,t),n[Bi]=i}var ZD=new Set;function _u(n){ZD.has(n)||(ZD.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function DO(n){return typeof n=="function"&&n[hr]!==void 0}function wu(n,e){_u("NgSignals");let t=YI(n),r=t[hr];return e?.equal&&(r.equal=e.equal),t.set=i=>Wp(r,i),t.update=i=>ZI(r,i),t.asReadonly=CO.bind(t),t}function CO(){let n=this[hr];if(n.readonlyFn===void 0){let e=()=>this();e[hr]=n,n.readonlyFn=e}return n.readonlyFn}function cb(n){return DO(n)&&typeof n.set=="function"}function bO(n){let e=[],t=new Map;function r(i){let o=t.get(i);if(!o){let s=n(i);t.set(i,o=s.then(MO))}return o}return vd.forEach((i,o)=>{let s=[];i.templateUrl&&s.push(r(i.templateUrl).then(l=>{i.template=l}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let l=i.styles.length,h=i.styleUrls;i.styleUrls.forEach((p,m)=>{a.push(""),s.push(r(p).then(y=>{a[l+m]=y,h.splice(h.indexOf(p),1),h.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&s.push(r(i.styleUrl).then(l=>{a.push(l),i.styleUrl=void 0}));let u=Promise.all(s).then(()=>xO(o));e.push(u)}),SO(),Promise.all(e).then(()=>{})}var vd=new Map,TO=new Set;function SO(){let n=vd;return vd=new Map,n}function AO(){return vd.size===0}function MO(n){return typeof n=="string"?n:n.text()}function xO(n){TO.delete(n)}function RO(n){return Object.getPrototypeOf(n.prototype).constructor}function ti(n){let e=RO(n.type),t=!0,r=[n];for(;e;){let i;if(Zr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new J(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=Hl(n.inputs),s.inputTransforms=Hl(n.inputTransforms),s.declaredInputs=Hl(n.declaredInputs),s.outputs=Hl(n.outputs);let a=i.hostBindings;a&&FO(n,a);let u=i.viewQuery,l=i.contentQueries;if(u&&kO(n,u),l&&OO(n,l),NO(n,i),NN(n.outputs,i.outputs),Zr(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===ti&&(t=!1)}}e=Object.getPrototypeOf(e)}PO(r)}function NO(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function PO(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=uu(i.hostAttrs,t=uu(t,i.hostAttrs))}}function Hl(n){return n===as?{}:n===vn?[]:n}function kO(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function OO(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function FO(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function Wm(n){let e=n.inputConfig,t={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(t[r]=i[3])}n.inputTransforms=t}var Jr=class{},du=class{};var _d=class extends Jr{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new yd(this);let o=bC(e);this._bootstrapComponents=A0(o.bootstrap),this._r3Injector=p0(e,t,[{provide:Jr,useValue:this},{provide:gs,useValue:this.componentFactoryResolver},...r],qt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},wd=class extends du{constructor(e){super(),this.moduleType=e}create(e){return new _d(this.moduleType,e,[])}};function VO(n,e,t){return new _d(n,e,t,!1)}var tm=class extends Jr{constructor(e){super(),this.componentFactoryResolver=new yd(this),this.instance=null;let t=new cu([...e.providers,{provide:Jr,useValue:this},{provide:gs,useValue:this.componentFactoryResolver}],e.parent||_m(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Ud(n,e,t=null){return new tm({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function lb(n){return jO(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function LO(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function jO(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function Gi(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function BO(n,e,t,r){let i=Gi(n,e,t);return Gi(n,e+1,r)||i}function UO(n){return(n.flags&32)===32}function $O(n,e,t,r,i,o,s,a,u){let l=e.consts,h=jd(e,n,4,s||null,a||null);W0(e,t,h,sd(l,u)),Tm(e,h);let p=h.tView=Bm(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function HO(n,e,t,r,i,o,s,a,u,l){let h=t+Yr,p=e.firstCreatePass?$O(h,e,n,r,i,o,s,a,u):e.data[h];gu(p,!1);let m=qO(e,n,p,t);Cm()&&Lm(e,n,m,p),qi(m,n);let y=Y0(m,n,m,p);return n[h]=y,Bd(n,y),EO(y,p,n),wm(p)&&q0(e,n,p),u!=null&&z0(n,p,l),p}function Ot(n,e,t,r,i,o,s,a){let u=Pe(),l=Gt(),h=sd(l.consts,o);return HO(u,l,n,e,t,r,i,h,s,a),Ot}var qO=zO;function zO(n,e,t,r){return bm(!0),e[rt].createComment("")}var ns=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(ns||{}),db=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}}return n})(),nm=class n{constructor(){this.ngZone=B(_e),this.scheduler=B(ps),this.errorHandler=B(mr,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[ns.EarlyRead,ns.Write,ns.MixedReadWrite,ns.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}},rm=class{constructor(e,t,r,i){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function Km(n,e){!e?.injector&&TP(Km);let t=e?.injector??B(ln);return $1(t)?(_u("NgAfterNextRender"),WO(n,t,e,!0)):KO}function GO(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function WO(n,e,t,r){let i=e.get(db);i.impl??=e.get(nm);let o=t?.phase??ns.MixedReadWrite,s=t?.manualCleanup!==!0?e.get(Mm):null,a=new rm(i.impl,GO(n,o),r,s);return i.impl.register(a),a}var KO={destroy(){}};function $d(n,e,t,r){let i=Pe(),o=Nd();if(Gi(i,o,e)){let s=Gt(),a=Pd();Mk(a,i,n,e,t,r)}return $d}function hb(n,e,t,r){return Gi(n,Nd(),t)?e+os(t)+r:Er}function QO(n,e,t,r,i,o){let s=zP(),a=BO(n,s,t,i);return YC(2),a?e+os(t)+r+os(i)+o:Er}function ql(n,e){return n<<17|e<<2}function Wi(n){return n>>17&32767}function YO(n){return(n&2)==2}function ZO(n,e){return n&131071|e<<17}function im(n){return n|2}function vs(n){return(n&131068)>>2}function Ig(n,e){return n&-131069|e<<2}function JO(n){return(n&1)===1}function om(n){return n|1}function XO(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Wi(s),u=vs(s);n[r]=t;let l=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||pu(p,h)>0)&&(l=!0)}else h=t;if(i)if(u!==0){let m=Wi(n[a+1]);n[r+1]=ql(m,a),m!==0&&(n[m+1]=Ig(n[m+1],r)),n[a+1]=ZO(n[a+1],r)}else n[r+1]=ql(a,0),a!==0&&(n[a+1]=Ig(n[a+1],r)),a=r;else n[r+1]=ql(u,0),a===0?a=r:n[u+1]=Ig(n[u+1],r),u=r;l&&(n[r+1]=im(n[r+1])),JD(n,h,r,!0),JD(n,h,r,!1),eF(e,h,n,r,o),s=ql(a,u),o?e.classBindings=s:e.styleBindings=s}function eF(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&pu(o,e)>=0&&(t[r+1]=om(t[r+1]))}function JD(n,e,t,r){let i=n[t+1],o=e===null,s=r?Wi(i):vs(i),a=!1;for(;s!==0&&(a===!1||o);){let u=n[s],l=n[s+1];tF(u,e)&&(a=!0,n[s+1]=r?om(l):im(l)),s=r?Wi(l):vs(l)}a&&(n[t+1]=r?im(i):om(i))}function tF(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?pu(n,e)>=0:!1}function Ft(n,e,t){let r=Pe(),i=Nd();if(Gi(r,i,e)){let o=Gt(),s=Pd();Um(o,s,r,n,e,r[rt],t,!1)}return Ft}function XD(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";$m(n,t,o[s],s,r)}function Hd(n,e){return nF(n,e,null,!0),Hd}function nF(n,e,t,r){let i=Pe(),o=Gt(),s=YC(2);if(o.firstUpdatePass&&iF(o,n,s,r),e!==Er&&Gi(i,s,e)){let a=o.data[Qi()];cF(o,a,i,i[rt],n,i[s+1]=lF(e,t),r,s)}}function rF(n,e){return e>=n.expandoStartIndex}function iF(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[Qi()],s=rF(n,t);dF(o,r)&&e===null&&!s&&(e=!1),e=oF(i,o,e,r),XO(i,o,e,t,s,r)}}function oF(n,e,t,r){let i=YP(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Dg(null,n,e,t,r),t=hu(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=Dg(i,n,e,t,r),o===null){let u=sF(n,e,r);u!==void 0&&Array.isArray(u)&&(u=Dg(null,n,e,u[1],r),u=hu(u,e.attrs,r),aF(n,e,r,u))}else o=uF(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function sF(n,e,t){let r=t?e.classBindings:e.styleBindings;if(vs(r)!==0)return n[Wi(r)]}function aF(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Wi(i)]=r}function uF(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=hu(r,s,t)}return hu(r,e.attrs,t)}function Dg(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=hu(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function hu(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),JN(n,s,t?!0:e[++o]))}return n===void 0?null:n}function cF(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let u=n.data,l=u[a+1],h=JO(l)?eC(u,e,t,i,vs(l),s):void 0;if(!Ed(h)){Ed(o)||YO(l)&&(o=eC(u,null,t,i,a,s));let p=BC(Qi(),t);ak(r,s,p,i,o)}}function eC(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let u=n[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,m=t[i+1];m===Er&&(m=p?vn:void 0);let y=p?fg(m,r):h===r?m:void 0;if(l&&!Ed(y)&&(y=fg(u,r)),Ed(y)&&(a=y,s))return a;let b=n[i+1];i=s?Wi(b):vs(b)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=fg(u,r))}return a}function Ed(n){return n!==void 0}function lF(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=qt(yu(n)))),n}function dF(n,e){return(n.flags&(e?8:16))!==0}function hF(n,e,t,r,i,o){let s=e.consts,a=sd(s,i),u=jd(e,n,2,r,a);return W0(e,t,u,sd(s,o)),u.attrs!==null&&Xg(u,u.attrs,!1),u.mergedAttrs!==null&&Xg(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function q(n,e,t,r){let i=Pe(),o=Gt(),s=Yr+n,a=i[rt],u=o.firstCreatePass?hF(s,o,i,e,t,r):o.data[s],l=fF(o,i,u,a,e,n);i[s]=l;let h=wm(u);return gu(u,!0),V0(a,l,u),!UO(u)&&Cm()&&Lm(o,i,l,u),VP()===0&&qi(l,i),LP(),h&&(q0(o,i,u),H0(o,u,i)),r!==null&&z0(i,u),q}function z(){let n=kt();KC()?qP():(n=n.parent,gu(n,!1));let e=n;UP(e)&&$P(),jP();let t=Gt();return t.firstCreatePass&&(Tm(t,n),OC(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&r1(e)&&XD(t,e,Pe(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&i1(e)&&XD(t,e,Pe(),e.stylesWithoutHost,!1),z}function Te(n,e,t,r){return q(n,e,t,r),z(),Te}var fF=(n,e,t,r,i,o)=>(bm(!0),M0(r,i,XP()));function Yt(){return Pe()}var Id="en-US";var pF=Id;function gF(n){typeof n=="string"&&(pF=n.toLowerCase().replace(/_/g,"-"))}var mF=(n,e,t)=>{};function ke(n,e,t,r){let i=Pe(),o=Gt(),s=kt();return fb(o,i,i[rt],s,n,e,r),ke}function yF(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[nd],u=i[o+2];return a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function fb(n,e,t,r,i,o,s){let a=wm(r),l=n.firstCreatePass&&kk(n),h=e[Nn],p=Pk(e),m=!0;if(r.type&3||s){let A=En(r,e),M=s?s(A):A,L=p.length,G=s?Z=>s(Kn(Z[r.index])):r.index,V=null;if(!s&&a&&(V=yF(n,e,i,r.index)),V!==null){let Z=V.__ngLastListenerFn__||V;Z.__ngNextListenerFn__=o,V.__ngLastListenerFn__=o,m=!1}else{o=nC(r,e,h,o),mF(A,i,o);let Z=t.listen(M,i,o);p.push(o,Z),l&&l.push(i,G,L,L+1)}}else o=nC(r,e,h,o);let y=r.outputs,b;if(m&&y!==null&&(b=y[i])){let A=b.length;if(A)for(let M=0;M<A;M+=2){let L=b[M],G=b[M+1],ne=e[L][G].subscribe(o),X=p.length;p.push(o,ne),l&&l.push(i,r.index,X,-(X+1))}}}function tC(n,e,t,r){let i=Ie(null);try{return Hn(6,e,t),t(r)!==!1}catch(o){return J0(n,o),!1}finally{Hn(7,e,t),Ie(i)}}function nC(n,e,t,r){return function i(o){if(o===Function)return r;let s=n.componentOffset>-1?Xr(n.index,e):e;qm(s,5);let a=tC(e,t,r,o),u=i.__ngNextListenerFn__;for(;u;)a=tC(e,t,u,o)&&a,u=u.__ngNextListenerFn__;return a}}function Zt(n=1){return JP(n)}function Vt(n,e,t){return pb(n,"",e,"",t),Vt}function pb(n,e,t,r,i){let o=Pe(),s=hb(o,e,t,r);if(s!==Er){let a=Gt(),u=Pd();Um(a,u,o,n,s,o[rt],i,!1)}return pb}function me(n,e=""){let t=Pe(),r=Gt(),i=n+Yr,o=r.firstCreatePass?jd(r,i,1,e,null):r.data[i],s=vF(r,t,o,e,n);t[i]=s,Cm()&&Lm(r,t,s,o),gu(o,!1)}var vF=(n,e,t,r,i)=>(bm(!0),q1(e[rt],r));function Zi(n){return qd("",n,""),Zi}function qd(n,e,t){let r=Pe(),i=hb(r,n,e,t);return i!==Er&&X0(r,Qi(),i),qd}function Ji(n,e,t,r,i){let o=Pe(),s=QO(o,n,e,t,r,i);return s!==Er&&X0(o,Qi(),s),Ji}function Me(n,e,t){cb(e)&&(e=e());let r=Pe(),i=Nd();if(Gi(r,i,e)){let o=Gt(),s=Pd();Um(o,s,r,n,e,r[rt],t,!1)}return Me}function Oe(n,e){let t=cb(n);return t&&n.set(e),t}function xe(n,e){let t=Pe(),r=Gt(),i=kt();return fb(r,t,t[rt],i,n,e),xe}function _F(n,e,t){let r=Gt();if(r.firstCreatePass){let i=Zr(n);sm(t,r.data,r.blueprint,i,!0),sm(e,r.data,r.blueprint,i,!1)}}function sm(n,e,t,r,i){if(n=Nt(n),Array.isArray(n))for(let o=0;o<n.length;o++)sm(n[o],e,t,r,i);else{let o=Gt(),s=Pe(),a=kt(),u=cs(n)?n:Nt(n.provide),l=RC(n),h=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(cs(n)||!n.multi){let y=new Hi(l,i,se),b=bg(u,e,i?h:h+m,p);b===-1?(jg(cd(a,s),o,u),Cg(o,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),s.push(y)):(t[b]=y,s[b]=y)}else{let y=bg(u,e,h+m,p),b=bg(u,e,h,h+m),A=y>=0&&t[y],M=b>=0&&t[b];if(i&&!M||!i&&!A){jg(cd(a,s),o,u);let L=IF(i?EF:wF,t.length,i,r,l);!i&&M&&(t[b].providerFactory=L),Cg(o,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(L),s.push(L)}else{let L=gb(t[i?b:y],l,!i&&r);Cg(o,n,y>-1?y:b,L)}!i&&r&&M&&t[b].componentProviders++}}}function Cg(n,e,t,r){let i=cs(e),o=_P(e);if(i||o){let u=(o?Nt(e.useClass):e).prototype.ngOnDestroy;if(u){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(t);h===-1?l.push(t,[r,u]):l[h+1].push(r,u)}else l.push(t,u)}}}function gb(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function bg(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function wF(n,e,t,r){return am(this.multi,[])}function EF(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=fs(t,t[ye],this.providerFactory.index,r);o=a.slice(0,s),am(i,o);for(let u=s;u<a.length;u++)o.push(a[u])}else o=[],am(i,o);return o}function am(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function IF(n,e,t,r,i){let o=new Hi(n,t,se);return o.multi=[],o.index=e,o.componentProviders=0,gb(o,i,r&&!t),o}function zd(n,e=[]){return t=>{t.providersResolver=(r,i)=>_F(r,i?i(n):n,e)}}var DF=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=AC(!1,t.type),i=r.length>0?Ud([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=H({token:n,providedIn:"environment",factory:()=>new n(F(cn))})}}return n})();function mb(n){_u("NgStandalone"),n.getStandaloneInjector=e=>e.get(DF).getOrCreateStandaloneInjector(n)}var zl=null;function CF(n){zl!==null&&(n.defaultEncapsulation!==zl.defaultEncapsulation||n.preserveWhitespaces!==zl.preserveWhitespaces)||(zl=n)}var vr=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},yb=new vr("18.2.13");var Gd=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var Qm=new W(""),Eu=new W(""),Wd=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,Ym||(bF(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{_e.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(t)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t()},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static{this.\u0275fac=function(r){return new(r||n)(F(_e),F(Kd),F(Eu))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),Kd=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return Ym?.findTestabilityInTree(this,t,r)??null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function bF(n){Ym=n}var Ym;function Xi(n){return!!n&&typeof n.then=="function"}function vb(n){return!!n&&typeof n.subscribe=="function"}var Qd=new W(""),_b=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=B(Qd,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=i();if(Xi(o))t.push(o);else if(vb(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Zm=new W("");function TF(){QI(()=>{throw new J(600,!1)})}function SF(n){return n.isBoundToModule}var AF=10;function MF(n,e,t){try{let r=t();return Xi(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}function wb(n,e){return Array.isArray(e)?e.reduce(wb,n):P(P({},n),e)}var ni=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=B(b1),this.afterRenderManager=B(db),this.zonelessEnabled=B(Gm),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new $e,this.afterTick=new $e,this.componentTypes=[],this.components=[],this.isStable=B(Is).hasPendingTasks.pipe(Q(t=>!t)),this._injector=B(cn)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof md;if(!this._injector.get(_b).done){let m=!i&&CC(t),y=!1;throw new J(405,y)}let s;i?s=t:s=this._injector.get(gs).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=SF(s)?void 0:this._injector.get(Jr),u=r||s.selector,l=s.create(ln.NULL,[],u,a),h=l.location.nativeElement,p=l.injector.get(Qm,null);return p?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),Yl(this.components,l),p?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new J(101,!1);let t=Ie(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,Ie(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(ms,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<AF;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:o}of this._views)xF(i,o,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>xd(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Yl(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(Zm,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Yl(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new J(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Yl(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function xF(n,e,t,r){if(!t&&!xd(n))return;nb(n,e,t&&!r?0:1)}var um=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Yd=(()=>{class n{compileModuleSync(t){return new wd(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=bC(t),o=A0(i.declarations).reduce((s,a)=>{let u=Qr(a);return u&&s.push(new ys(u)),s},[]);return new um(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),RF=new W("");function NF(n,e,t){let r=new wd(t);return Promise.resolve(r)}function rC(n){for(let e=n.length-1;e>=0;e--)if(n[e]!==void 0)return n[e]}var PF=(()=>{class n{constructor(){this.zone=B(_e),this.changeDetectionScheduler=B(ps),this.applicationRef=B(ni)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function kF({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new _e(fe(P({},Eb()),{scheduleInRootZone:t})),[{provide:_e,useFactory:n},{provide:us,multi:!0,useFactory:()=>{let r=B(PF,{optional:!0});return()=>r.initialize()}},{provide:us,multi:!0,useFactory:()=>{let r=B(OF);return()=>{r.initialize()}}},e===!0?{provide:sb,useValue:!0}:[],{provide:ab,useValue:t??g0}]}function Eb(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var OF=(()=>{class n{constructor(){this.subscription=new Ke,this.initialized=!1,this.zone=B(_e),this.pendingTasks=B(Is)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{_e.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{_e.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var FF=(()=>{class n{constructor(){this.appRef=B(ni),this.taskService=B(Is),this.ngZone=B(_e),this.zonelessEnabled=B(Gm),this.disableScheduling=B(sb,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Ke,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(dd):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(B(ab,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof hd||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?LD:m0;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(dd+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,LD(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function VF(){return typeof $localize<"u"&&$localize.locale||Id}var Jm=new W("",{providedIn:"root",factory:()=>B(Jm,he.Optional|he.SkipSelf)||VF()});var Dd=new W("");function Gl(n){return!n.moduleRef}function LF(n){let e=Gl(n)?n.r3Injector:n.moduleRef.injector,t=e.get(_e);return t.run(()=>{Gl(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(mr,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),Gl(n)){let o=()=>e.destroy(),s=n.platformInjector.get(Dd);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(Dd);s.add(o),n.moduleRef.onDestroy(()=>{Yl(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return MF(r,t,()=>{let o=e.get(_b);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(Jm,Id);if(gF(s||Id),Gl(n)){let a=e.get(ni);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return jF(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function jF(n,e){let t=n.injector.get(ni);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new J(-403,!1);e.push(n)}var Ib=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){let i=r?.scheduleInRootZone,o=()=>C1(r?.ngZone,fe(P({},Eb({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing})),{scheduleInRootZone:i})),s=r?.ignoreChangesOutsideZone,a=[kF({ngZoneFactory:o,ignoreChangesOutsideZone:s}),{provide:ps,useExisting:FF}],u=VO(t.moduleType,this.injector,a);return LF({moduleRef:u,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(t,r=[]){let i=wb({},r);return NF(this.injector,i,t).then(o=>this.bootstrapModuleFactory(o,i))}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new J(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());let t=this._injector.get(Dd,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||n)(F(ln))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),su=null,Db=new W("");function BF(n){if(su&&!su.get(Db,!1))throw new J(400,!1);TF(),su=n;let e=n.get(Ib);return HF(n),e}function Xm(n,e,t=[]){let r=`Platform: ${e}`,i=new W(r);return(o=[])=>{let s=Cb();if(!s||s.injector.get(Db,!1)){let a=[...t,...o,{provide:i,useValue:!0}];n?n(a):BF(UF(a,r))}return $F(i)}}function UF(n=[],e){return ln.create({name:e,providers:[{provide:Sd,useValue:"platform"},{provide:Dd,useValue:new Set([()=>su=null])},...n]})}function $F(n){let e=Cb();if(!e)throw new J(401,!1);return e}function Cb(){return su?.get(Ib)??null}function HF(n){n.get(Nm,null)?.forEach(t=>t())}function ey(){return!1}var eo=(()=>{class n{static{this.__NG_ELEMENT_ID__=qF}}return n})();function qF(n){return zF(kt(),Pe(),(n&16)===16)}function zF(n,e,t){if(Md(n)&&!t){let r=Xr(n.index,e);return new zi(r,r)}else if(n.type&175){let r=e[Wn];return new zi(r,e)}return null}var cm=class{constructor(){}supports(e){return lb(e)}create(e){return new lm(e)}},GF=(n,e)=>e,lm=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||GF}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<iC(r,i,o)?t:r,a=iC(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=u-i;if(l!=h){for(let m=0;m<l;m++){let y=m<o.length?o[m]:o[m]=0,b=y+m;h<=b&&b<l&&(o[m]=y+1)}let p=s.previousIndex;o[p]=h-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!lb(e))throw new J(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,LO(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new dm(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Cd),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Cd),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},dm=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},hm=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Cd=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new hm,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function iC(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function oC(){return new ty([new cm])}var ty=(()=>{class n{static{this.\u0275prov=H({token:n,providedIn:"root",factory:oC})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||oC()),deps:[[n,new gm,new ws]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new J(901,!1)}}return n})();var bb=Xm(null,"core",[]),Tb=(()=>{class n{constructor(t){}static{this.\u0275fac=function(r){return new(r||n)(F(ni))}}static{this.\u0275mod=pt({type:n})}static{this.\u0275inj=ht({})}}return n})();function to(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Iu(n,e){_u("NgSignals");let t=GI(n);return e?.equal&&(t[hr].equal=e.equal),t}function Ir(n){let e=Ie(null);try{return n()}finally{Ie(e)}}function Sb(n){let e=Qr(n);if(!e)return null;let t=new ys(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var Rb=null;function Yn(){return Rb}function Nb(n){Rb??=n}var Zd=class{};var Jt=new W(""),oy=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>B(WF),providedIn:"platform"})}}return n})(),Pb=new W(""),WF=(()=>{class n extends oy{constructor(){super(),this._doc=B(Jt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Yn().getBaseHref(this._doc)}onPopState(t){let r=Yn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Yn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function sy(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function Ab(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function Dr(n){return n&&n[0]!=="?"?"?"+n:n}var Cr=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>B(ay),providedIn:"root"})}}return n})(),kb=new W(""),ay=(()=>{class n extends Cr{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??B(Jt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return sy(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Dr(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Dr(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Dr(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(F(oy),F(kb,8))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Ob=(()=>{class n extends Cr{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=sy(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Dr(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Dr(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(F(oy),F(kb,8))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),Ds=(()=>{class n{constructor(t){this._subject=new nt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=YF(Ab(Mb(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Dr(r))}normalize(t){return n.stripTrailingSlash(QF(this._basePath,Mb(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Dr(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Dr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=Dr}static{this.joinWithSlash=sy}static{this.stripTrailingSlash=Ab}static{this.\u0275fac=function(r){return new(r||n)(F(Cr))}}static{this.\u0275prov=H({token:n,factory:()=>KF(),providedIn:"root"})}}return n})();function KF(){return new Ds(F(Cr))}function QF(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function Mb(n){return n.replace(/\/index.html$/,"")}function YF(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function Fb(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var ny=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Xt=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new ny(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),xb(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);xb(o,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(se(vu),se(zm),se(ty))}}static{this.\u0275dir=zt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function xb(n,e){n.context.$implicit=e.item}var Vb=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=pt({type:n})}static{this.\u0275inj=ht({})}}return n})(),uy="browser",ZF="server";function JF(n){return n===uy}function no(n){return n===ZF}var Lb=(()=>{class n{static{this.\u0275prov=H({token:n,providedIn:"root",factory:()=>JF(B(Qt))?new ry(B(Jt),window):new iy})}}return n})(),ry=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=XF(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function XF(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var iy=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},Jd=class{};var dy=class extends Zd{constructor(){super(...arguments),this.supportsDOMEvents=!0}},hy=class n extends dy{static makeCurrent(){Nb(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=tV();return t==null?null:nV(t)}resetBaseElement(){Du=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Fb(document.cookie,e)}},Du=null;function tV(){return Du=Du||document.querySelector("base"),Du?Du.getAttribute("href"):null}function nV(n){return new URL(n,document.baseURI).pathname}var fy=class{addToWindow(e){Rn.getAngularTestability=(r,i=!0)=>{let o=e.findTestabilityInTree(r,i);if(o==null)throw new J(5103,!1);return o},Rn.getAllAngularTestabilities=()=>e.getAllTestabilities(),Rn.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let i=Rn.getAllAngularTestabilities(),o=i.length,s=function(){o--,o==0&&r()};i.forEach(a=>{a.whenStable(s)})};Rn.frameworkStabilizers||(Rn.frameworkStabilizers=[]),Rn.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let i=e.getTestability(t);return i??(r?Yn().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},rV=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),py=new W(""),$b=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new J(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(F(py),F(_e))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),Xd=class{constructor(e){this._doc=e}},cy="ng-app-id",Hb=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=no(o),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${cy}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(cy),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(cy,this.appId),t.appendChild(s),s}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(F(Jt),F(Od),F(Pm,8),F(Qt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),ly={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},my=/%COMP%/g,qb="%COMP%",iV=`_nghost-${qb}`,oV=`_ngcontent-${qb}`,sV=!0,aV=new W("",{providedIn:"root",factory:()=>sV});function uV(n){return oV.replace(my,n)}function cV(n){return iV.replace(my,n)}function zb(n,e){return e.map(t=>t.replace(my,n))}var jb=(()=>{class n{constructor(t,r,i,o,s,a,u,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=no(a),this.defaultRenderer=new Cu(t,s,u,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===zn.ShadowDom&&(r=fe(P({},r),{encapsulation:zn.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof eh?i.applyToHost(t):i instanceof bu&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case zn.Emulated:o=new eh(u,l,r,this.appId,h,s,a,p);break;case zn.ShadowDom:return new gy(u,l,t,r,s,a,this.nonce,p);default:o=new bu(u,l,r,h,s,a,p);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(F($b),F(Hb),F(Od),F(aV),F(Jt),F(Qt),F(_e),F(Pm))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),Cu=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(ly[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Bb(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Bb(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new J(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=ly[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=ly[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(yr.DashCase|yr.Important)?e.style.setProperty(t,r,i&yr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&yr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=Yn().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function Bb(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var gy=class extends Cu{constructor(e,t,r,i,o,s,a,u){super(e,o,s,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=zb(i.id,i.styles);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},bu=class extends Cu{constructor(e,t,r,i,o,s,a,u){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=u?zb(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},eh=class extends bu{constructor(e,t,r,i,o,s,a,u){let l=i+"-"+r.id;super(e,t,r,o,s,a,u,l),this.contentAttr=uV(l),this.hostAttr=cV(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},lV=(()=>{class n extends Xd{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(F(Jt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),Ub=["alt","control","meta","shift"],dV={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},hV={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},fV=(()=>{class n extends Xd{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Yn().onAndCancel(t,o.domEventName,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),Ub.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=dV[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),Ub.forEach(s=>{if(s!==i){let a=hV[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(F(Jt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})();function pV(){hy.makeCurrent()}function gV(){return new mr}function mV(){return D0(document),document}var yV=[{provide:Qt,useValue:uy},{provide:Nm,useValue:pV,multi:!0},{provide:Jt,useFactory:mV,deps:[]}],Gb=Xm(bb,"browser",yV),vV=new W(""),_V=[{provide:Eu,useClass:fy,deps:[]},{provide:Qm,useClass:Wd,deps:[_e,Kd,Eu]},{provide:Wd,useClass:Wd,deps:[_e,Kd,Eu]}],wV=[{provide:Sd,useValue:"root"},{provide:mr,useFactory:gV,deps:[]},{provide:py,useClass:lV,multi:!0,deps:[Jt,_e,Qt]},{provide:py,useClass:fV,multi:!0,deps:[Jt]},jb,Hb,$b,{provide:ms,useExisting:jb},{provide:Jd,useClass:rV,deps:[]},[]],Wb=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:Od,useValue:t.appId}]}}static{this.\u0275fac=function(r){return new(r||n)(F(vV,12))}}static{this.\u0275mod=pt({type:n})}static{this.\u0275inj=ht({providers:[...wV,..._V],imports:[Vb,Tb]})}}return n})();var Kb=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(F(Jt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var rT=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(se(Yi),se(ei))}}static{this.\u0275dir=zt({type:n})}}return n})(),EV=(()=>{class n extends rT{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=mu(n)))(i||n)}})()}static{this.\u0275dir=zt({type:n,features:[ti]})}}return n})(),iT=new W("");var IV={provide:iT,useExisting:_s(()=>bt),multi:!0};function DV(){let n=Yn()?Yn().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var CV=new W(""),bt=(()=>{class n extends rT{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!DV())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(se(Yi),se(ei),se(CV,8))}}static{this.\u0275dir=zt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&ke("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[zd([IV]),ti]})}}return n})();var oT=new W(""),sT=new W("");function aT(n){return n!=null}function uT(n){return Xi(n)?De(n):n}function cT(n){let e={};return n.forEach(t=>{e=t!=null?P(P({},e),t):e}),Object.keys(e).length===0?null:e}function lT(n,e){return e.map(t=>t(n))}function bV(n){return!n.validate}function dT(n){return n.map(e=>bV(e)?e:t=>e.validate(t))}function TV(n){if(!n)return null;let e=n.filter(aT);return e.length==0?null:function(t){return cT(lT(t,e))}}function vy(n){return n!=null?TV(dT(n)):null}function SV(n){if(!n)return null;let e=n.filter(aT);return e.length==0?null:function(t){let r=lT(t,e).map(uT);return sg(r).pipe(Q(cT))}}function _y(n){return n!=null?SV(dT(n)):null}function Yb(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function AV(n){return n._rawValidators}function MV(n){return n._rawAsyncValidators}function yy(n){return n?Array.isArray(n)?n:[n]:[]}function nh(n,e){return Array.isArray(n)?n.includes(e):n===e}function Zb(n,e){let t=yy(e);return yy(n).forEach(i=>{nh(t,i)||t.push(i)}),t}function Jb(n,e){return yy(e).filter(t=>!nh(n,t))}var rh=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=vy(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=_y(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Ts=class extends rh{get formDirective(){return null}get path(){return null}},Ru=class extends rh{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},ih=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},xV={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},d5=fe(P({},xV),{"[class.ng-submitted]":"isSubmitted"}),en=(()=>{class n extends ih{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(se(Ru,2))}}static{this.\u0275dir=zt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Hd("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[ti]})}}return n})(),tn=(()=>{class n extends ih{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(se(Ts,10))}}static{this.\u0275dir=zt({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Hd("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[ti]})}}return n})();var Tu="VALID",th="INVALID",Cs="PENDING",Su="DISABLED",Ss=class{},oh=class extends Ss{constructor(e,t){super(),this.value=e,this.source=t}},Mu=class extends Ss{constructor(e,t){super(),this.pristine=e,this.source=t}},xu=class extends Ss{constructor(e,t){super(),this.touched=e,this.source=t}},bs=class extends Ss{constructor(e,t){super(),this.status=e,this.source=t}};function hT(n){return(uh(n)?n.validators:n)||null}function RV(n){return Array.isArray(n)?vy(n):n||null}function fT(n,e){return(uh(e)?e.asyncValidators:n)||null}function NV(n){return Array.isArray(n)?_y(n):n||null}function uh(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function PV(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new J(1e3,"");if(!r[t])throw new J(1001,"")}function kV(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new J(1002,"")})}var sh=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Iu(()=>this.statusReactive()),this.statusReactive=wu(void 0),this._pristine=Iu(()=>this.pristineReactive()),this.pristineReactive=wu(!0),this._touched=Iu(()=>this.touchedReactive()),this.touchedReactive=wu(!1),this._events=new $e,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Ir(this.statusReactive)}set status(e){Ir(()=>this.statusReactive.set(e))}get valid(){return this.status===Tu}get invalid(){return this.status===th}get pending(){return this.status==Cs}get disabled(){return this.status===Su}get enabled(){return this.status!==Su}get pristine(){return Ir(this.pristineReactive)}set pristine(e){Ir(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return Ir(this.touchedReactive)}set touched(e){Ir(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Zb(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Zb(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Jb(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Jb(e,this._rawAsyncValidators))}hasValidator(e){return nh(this._rawValidators,e)}hasAsyncValidator(e){return nh(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(fe(P({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new xu(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new xu(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(fe(P({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Mu(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Mu(!0,r))}markAsPending(e={}){this.status=Cs;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new bs(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(fe(P({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Su,this.errors=null,this._forEachChild(i=>{i.disable(fe(P({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new oh(this.value,r)),this._events.next(new bs(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(fe(P({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Tu,this._forEachChild(r=>{r.enable(fe(P({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(fe(P({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Tu||this.status===Cs)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new oh(this.value,t)),this._events.next(new bs(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(fe(P({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Su:Tu}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Cs,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=uT(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new bs(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new nt,this.statusChanges=new nt}_calculateStatus(){return this._allControlsDisabled()?Su:this.errors?th:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Cs)?Cs:this._anyControlsHaveStatus(th)?th:Tu}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Mu(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new xu(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){uh(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=RV(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=NV(this._rawAsyncValidators)}},ah=class extends sh{constructor(e,t,r){super(hT(t),fT(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){kV(this,!0,e),Object.keys(e).forEach(r=>{PV(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var wy=new W("CallSetDisabledState",{providedIn:"root",factory:()=>Ey}),Ey="always";function OV(n,e){return[...e.path,n]}function pT(n,e,t=Ey){gT(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),VV(n,e),jV(n,e),LV(n,e),FV(n,e)}function Xb(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function FV(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function gT(n,e){let t=AV(n);e.validator!==null?n.setValidators(Yb(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=MV(n);e.asyncValidator!==null?n.setAsyncValidators(Yb(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();Xb(e._rawValidators,i),Xb(e._rawAsyncValidators,i)}function VV(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&mT(n,e)})}function LV(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&mT(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function mT(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function jV(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function BV(n,e){n==null,gT(n,e)}function UV(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function $V(n){return Object.getPrototypeOf(n.constructor)===EV}function HV(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function qV(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===bt?t=o:$V(o)?r=o:i=o}),i||r||t||null}var zV={provide:Ts,useExisting:_s(()=>Lt)},Au=Promise.resolve(),Lt=(()=>{class n extends Ts{get submitted(){return Ir(this.submittedReactive)}constructor(t,r,i){super(),this.callSetDisabledState=i,this._submitted=Iu(()=>this.submittedReactive()),this.submittedReactive=wu(!1),this._directives=new Set,this.ngSubmit=new nt,this.form=new ah({},vy(t),_y(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Au.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),pT(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Au.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Au.then(()=>{let r=this._findContainer(t.path),i=new ah({});BV(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Au.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Au.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),HV(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(r){return new(r||n)(se(oT,10),se(sT,10),se(wy,8))}}static{this.\u0275dir=zt({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&ke("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[zd([zV]),ti]})}}return n})();function eT(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function tT(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var GV=class extends sh{constructor(e=null,t,r){super(hT(t),fT(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),uh(t)&&(t.nonNullable||t.initialValueIsDefault)&&(tT(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){eT(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){eT(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){tT(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var WV={provide:Ru,useExisting:_s(()=>jt)},nT=Promise.resolve(),jt=(()=>{class n extends Ru{constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new GV,this._registered=!1,this.name="",this.update=new nt,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=qV(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),UV(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){pT(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){nT.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&to(r);nT.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?OV(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(se(Ts,9),se(oT,10),se(sT,10),se(iT,10),se(eo,8),se(wy,8))}}static{this.\u0275dir=zt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[zd([WV]),ti,Ki]})}}return n})(),nn=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=zt({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})();var KV=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=pt({type:n})}static{this.\u0275inj=ht({})}}return n})();var yT=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:wy,useValue:t.callSetDisabledState??Ey}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=pt({type:n})}static{this.\u0275inj=ht({imports:[KV]})}}return n})();var ce="primary",zu=Symbol("RouteTitle"),Ty=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Ps(n){return new Ty(n)}function QV(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function YV(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Zn(n[t],e[t]))return!1;return!0}function Zn(n,e){let t=n?Sy(n):void 0,r=e?Sy(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!AT(n[i],e[i]))return!1;return!0}function Sy(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function AT(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function MT(n){return n.length>0?n[n.length-1]:null}function si(n){return og(n)?n:Xi(n)?De(Promise.resolve(n)):te(n)}var ZV={exact:RT,subset:NT},xT={exact:JV,subset:XV,ignored:()=>!0};function vT(n,e,t){return ZV[t.paths](n.root,e.root,t.matrixParams)&&xT[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function JV(n,e){return Zn(n,e)}function RT(n,e,t){if(!oo(n.segments,e.segments)||!dh(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!RT(n.children[r],e.children[r],t))return!1;return!0}function XV(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>AT(n[t],e[t]))}function NT(n,e,t){return PT(n,e,e.segments,t)}function PT(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!oo(i,t)||e.hasChildren()||!dh(i,t,r))}else if(n.segments.length===t.length){if(!oo(n.segments,t)||!dh(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!NT(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!oo(n.segments,i)||!dh(n.segments,i,r)||!n.children[ce]?!1:PT(n.children[ce],e,o,r)}}function dh(n,e,t){return e.every((r,i)=>xT[t](n[i].parameters,r.parameters))}var Tr=class{constructor(e=new Se([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ps(this.queryParams),this._queryParamMap}toString(){return nL.serialize(this)}},Se=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return hh(this)}},io=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Ps(this.parameters),this._parameterMap}toString(){return OT(this)}};function eL(n,e){return oo(n,e)&&n.every((t,r)=>Zn(t.parameters,e[r].parameters))}function oo(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function tL(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===ce&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==ce&&(t=t.concat(e(i,r)))}),t}var Gu=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>new ks,providedIn:"root"})}}return n})(),ks=class{parse(e){let t=new My(e);return new Tr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Nu(e.root,!0)}`,r=oL(e.queryParams),i=typeof e.fragment=="string"?`#${rL(e.fragment)}`:"";return`${t}${r}${i}`}},nL=new ks;function hh(n){return n.segments.map(e=>OT(e)).join("/")}function Nu(n,e){if(!n.hasChildren())return hh(n);if(e){let t=n.children[ce]?Nu(n.children[ce],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==ce&&r.push(`${i}:${Nu(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=tL(n,(r,i)=>i===ce?[Nu(n.children[ce],!1)]:[`${i}:${Nu(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[ce]!=null?`${hh(n)}/${t[0]}`:`${hh(n)}/(${t.join("//")})`}}function kT(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ch(n){return kT(n).replace(/%3B/gi,";")}function rL(n){return encodeURI(n)}function Ay(n){return kT(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function fh(n){return decodeURIComponent(n)}function _T(n){return fh(n.replace(/\+/g,"%20"))}function OT(n){return`${Ay(n.path)}${iL(n.parameters)}`}function iL(n){return Object.entries(n).map(([e,t])=>`;${Ay(e)}=${Ay(t)}`).join("")}function oL(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${ch(t)}=${ch(i)}`).join("&"):`${ch(t)}=${ch(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var sL=/^[^\/()?;#]+/;function Iy(n){let e=n.match(sL);return e?e[0]:""}var aL=/^[^\/()?;=#]+/;function uL(n){let e=n.match(aL);return e?e[0]:""}var cL=/^[^=?&#]+/;function lL(n){let e=n.match(cL);return e?e[0]:""}var dL=/^[^&#]+/;function hL(n){let e=n.match(dL);return e?e[0]:""}var My=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Se([],{}):new Se([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ce]=new Se(e,t)),r}parseSegment(){let e=Iy(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new J(4009,!1);return this.capture(e),new io(fh(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=uL(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Iy(this.remaining);i&&(r=i,this.capture(r))}e[fh(t)]=fh(r)}parseQueryParam(e){let t=lL(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=hL(this.remaining);s&&(r=s,this.capture(r))}let i=_T(t),o=_T(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Iy(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new J(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ce);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[ce]:new Se([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new J(4011,!1)}};function FT(n){return n.segments.length>0?new Se([],{[ce]:n}):n}function VT(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=VT(i);if(r===ce&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Se(n.segments,e);return fL(t)}function fL(n){if(n.numberOfChildren===1&&n.children[ce]){let e=n.children[ce];return new Se(n.segments.concat(e.segments),e.children)}return n}function so(n){return n instanceof Tr}function pL(n,e,t=null,r=null){let i=LT(n);return jT(i,e,t,r)}function LT(n){let e;function t(o){let s={};for(let u of o.children){let l=t(u);s[u.outlet]=l}let a=new Se(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=FT(r);return e??i}function jT(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Dy(i,i,i,t,r);let o=gL(e);if(o.toRoot())return Dy(i,i,new Se([],{}),t,r);let s=mL(o,i,n),a=s.processChildren?Ou(s.segmentGroup,s.index,o.commands):UT(s.segmentGroup,s.index,o.commands);return Dy(i,s.segmentGroup,a,t,r)}function ph(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Lu(n){return typeof n=="object"&&n!=null&&n.outlets}function Dy(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;n===e?s=t:s=BT(n,e,t);let a=FT(VT(s));return new Tr(a,o,i)}function BT(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=BT(o,e,t)}),new Se(n.segments,r)}var gh=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&ph(r[0]))throw new J(4003,!1);let i=r.find(Lu);if(i&&i!==MT(r))throw new J(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function gL(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new gh(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new gh(t,e,r)}var xs=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function mL(n,e,t){if(n.isAbsolute)return new xs(e,!0,0);if(!t)return new xs(e,!1,NaN);if(t.parent===null)return new xs(t,!0,0);let r=ph(n.commands[0])?0:1,i=t.segments.length-1+r;return yL(t,i,n.numberOfDoubleDots)}function yL(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new J(4005,!1);i=r.segments.length}return new xs(r,!1,i-o)}function vL(n){return Lu(n[0])?n[0].outlets:{[ce]:n}}function UT(n,e,t){if(n??=new Se([],{}),n.segments.length===0&&n.hasChildren())return Ou(n,e,t);let r=_L(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Se(n.segments.slice(0,r.pathIndex),{});return o.children[ce]=new Se(n.segments.slice(r.pathIndex),n.children),Ou(o,0,i)}else return r.match&&i.length===0?new Se(n.segments,{}):r.match&&!n.hasChildren()?xy(n,e,t):r.match?Ou(n,0,i):xy(n,e,t)}function Ou(n,e,t){if(t.length===0)return new Se(n.segments,{});{let r=vL(t),i={};if(Object.keys(r).some(o=>o!==ce)&&n.children[ce]&&n.numberOfChildren===1&&n.children[ce].segments.length===0){let o=Ou(n.children[ce],e,t);return new Se(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=UT(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Se(n.segments,i)}}function _L(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Lu(a))break;let u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!ET(u,l,s))return o;r+=2}else{if(!ET(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function xy(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Lu(o)){let u=wL(o.outlets);return new Se(r,u)}if(i===0&&ph(t[0])){let u=n.segments[e];r.push(new io(u.path,wT(t[0]))),i++;continue}let s=Lu(o)?o.outlets[ce]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&ph(a)?(r.push(new io(s,wT(a))),i+=2):(r.push(new io(s,{})),i++)}return new Se(r,{})}function wL(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=xy(new Se([],{}),0,r))}),e}function wT(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function ET(n,e,t){return n==t.path&&Zn(e,t.parameters)}var Fu="imperative",gt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(gt||{}),In=class{constructor(e,t){this.id=e,this.url=t}},Os=class extends In{constructor(e,t,r="imperative",i=null){super(e,t),this.type=gt.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Jn=class extends In{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=gt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},hn=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(hn||{}),mh=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(mh||{}),br=class extends In{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=gt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ii=class extends In{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=gt.NavigationSkipped}},ju=class extends In{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=gt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},yh=class extends In{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=gt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ry=class extends In{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=gt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ny=class extends In{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=gt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Py=class extends In{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=gt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ky=class extends In{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=gt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Oy=class{constructor(e){this.route=e,this.type=gt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Fy=class{constructor(e){this.route=e,this.type=gt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Vy=class{constructor(e){this.snapshot=e,this.type=gt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ly=class{constructor(e){this.snapshot=e,this.type=gt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},jy=class{constructor(e){this.snapshot=e,this.type=gt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},By=class{constructor(e){this.snapshot=e,this.type=gt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},vh=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=gt.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Bu=class{},Fs=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function EL(n,e){return n.providers&&!n._injector&&(n._injector=Ud(n.providers,e,`Route: ${n.path}`)),n._injector??e}function kn(n){return n.outlet||ce}function IL(n,e){let t=n.filter(r=>kn(r)===e);return t.push(...n.filter(r=>kn(r)!==e)),t}function Wu(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Uy=class{get injector(){return Wu(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Ku(this.rootInjector),this.attachRef=null}},Ku=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Uy(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(F(cn))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),_h=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=$y(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=$y(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Hy(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Hy(e,this._root).map(t=>t.value)}};function $y(n,e){if(n===e.value)return e;for(let t of e.children){let r=$y(n,t);if(r)return r}return null}function Hy(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Hy(n,t);if(r.length)return r.unshift(e),r}return[]}var dn=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Ms(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var wh=class extends _h{constructor(e,t){super(e),this.snapshot=t,Jy(this,e)}toString(){return this.snapshot.toString()}};function $T(n){let e=DL(n),t=new yt([new io("",{})]),r=new yt({}),i=new yt({}),o=new yt({}),s=new yt(""),a=new ao(t,r,o,s,i,ce,n,e.root);return a.snapshot=e.root,new wh(new dn(a,[]),e)}function DL(n){let e={},t={},r={},i="",o=new Rs([],e,r,i,t,ce,n,null,{});return new Ih("",new dn(o,[]))}var ao=class{constructor(e,t,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(Q(l=>l[zu]))??te(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Q(e=>Ps(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Q(e=>Ps(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Eh(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:P(P({},e.params),n.params),data:P(P({},e.data),n.data),resolve:P(P(P(P({},n.data),e.data),i?.data),n._resolvedData)}:r={params:P({},n.params),data:P({},n.data),resolve:P(P({},n.data),n._resolvedData??{})},i&&qT(i)&&(r.resolve[zu]=i.title),r}var Rs=class{get title(){return this.data?.[zu]}constructor(e,t,r,i,o,s,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ps(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ps(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Ih=class extends _h{constructor(e,t){super(t),this.url=e,Jy(this,t)}toString(){return HT(this._root)}};function Jy(n,e){e.value._routerState=n,e.children.forEach(t=>Jy(n,t))}function HT(n){let e=n.children.length>0?` { ${n.children.map(HT).join(", ")} } `:"";return`${n.value}${e}`}function Cy(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Zn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Zn(e.params,t.params)||n.paramsSubject.next(t.params),YV(e.url,t.url)||n.urlSubject.next(t.url),Zn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function qy(n,e){let t=Zn(n.params,e.params)&&eL(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||qy(n.parent,e.parent))}function qT(n){return typeof n.title=="string"||n.title===null}var Xy=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=ce,this.activateEvents=new nt,this.deactivateEvents=new nt,this.attachEvents=new nt,this.detachEvents=new nt,this.parentContexts=B(Ku),this.location=B(vu),this.changeDetector=B(eo),this.inputBinder=B(Sh,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new J(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new J(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new J(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new J(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new zy(t,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=zt({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ki]})}}return n})(),zy=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===ao?this.route:e===Ku?this.childContexts:this.parent.get(e,t)}},Sh=new W(""),IT=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=tu([r.queryParams,r.params,r.data]).pipe(Qe(([o,s,a],u)=>(a=P(P(P({},o),s),a),u===0?te(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=Sb(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})();function CL(n,e,t){let r=Uu(n,e._root,t?t._root:void 0);return new wh(r,e)}function Uu(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=bL(n,e,t);return new dn(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Uu(n,a)),s}}let r=TL(e.value),i=e.children.map(o=>Uu(n,o));return new dn(r,i)}}function bL(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Uu(n,r,i);return Uu(n,r)})}function TL(n){return new ao(new yt(n.url),new yt(n.params),new yt(n.queryParams),new yt(n.fragment),new yt(n.data),n.outlet,n.component,n)}var $u=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},zT="ngNavigationCancelingError";function Dh(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=so(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=GT(!1,hn.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function GT(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[zT]=!0,t.cancellationCode=e,t}function SL(n){return WT(n)&&so(n.url)}function WT(n){return!!n&&n[zT]}var AL=(n,e,t,r)=>Q(i=>(new Gy(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),Gy=class{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Cy(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Ms(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Ms(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Ms(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Ms(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new By(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Ly(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(Cy(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Cy(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Ch=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ns=class{constructor(e,t){this.component=e,this.route=t}};function ML(n,e,t){let r=n._root,i=e?e._root:null;return Pu(r,i,t,[r.value])}function xL(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Ls(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!cC(n)?n:e.get(n):r}function Pu(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Ms(e);return n.children.forEach(s=>{RL(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Vu(a,t.getContext(s),i)),i}function RL(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=NL(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Ch(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Pu(n,e,a?a.children:null,r,i):Pu(n,e,t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ns(a.outlet.component,s))}else s&&Vu(e,a,i),i.canActivateChecks.push(new Ch(r)),o.component?Pu(n,null,a?a.children:null,r,i):Pu(n,null,t,r,i);return i}function NL(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!oo(n.url,e.url);case"pathParamsOrQueryParamsChange":return!oo(n.url,e.url)||!Zn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!qy(n,e)||!Zn(n.queryParams,e.queryParams);case"paramsChange":default:return!qy(n,e)}}function Vu(n,e,t){let r=Ms(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Vu(s,e.children.getContext(o),t):Vu(s,null,t):Vu(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Ns(e.outlet.component,i)):t.canDeactivateChecks.push(new Ns(null,i)):t.canDeactivateChecks.push(new Ns(null,i))}function Qu(n){return typeof n=="function"}function PL(n){return typeof n=="boolean"}function kL(n){return n&&Qu(n.canLoad)}function OL(n){return n&&Qu(n.canActivate)}function FL(n){return n&&Qu(n.canActivateChild)}function VL(n){return n&&Qu(n.canDeactivate)}function LL(n){return n&&Qu(n.canMatch)}function KT(n){return n instanceof pr||n?.name==="EmptyError"}var lh=Symbol("INITIAL_VALUE");function Vs(){return Qe(n=>tu(n.map(e=>e.pipe(gr(1),Li(lh)))).pipe(Q(e=>{for(let t of e)if(t!==!0){if(t===lh)return lh;if(t===!1||jL(t))return t}return!0}),vt(e=>e!==lh),gr(1)))}function jL(n){return so(n)||n instanceof $u}function BL(n,e){return tt(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?te(fe(P({},t),{guardsResult:!0})):UL(s,r,i,n).pipe(tt(a=>a&&PL(a)?$L(r,o,n,e):te(a)),Q(a=>fe(P({},t),{guardsResult:a})))})}function UL(n,e,t,r){return De(n).pipe(tt(i=>WL(i.component,i.route,t,e,r)),mn(i=>i!==!0,!0))}function $L(n,e,t,r){return De(e).pipe(Fi(i=>Zo(qL(i.route.parent,r),HL(i.route,r),GL(n,i.path,t),zL(n,i.route,t))),mn(i=>i!==!0,!0))}function HL(n,e){return n!==null&&e&&e(new jy(n)),te(!0)}function qL(n,e){return n!==null&&e&&e(new Vy(n)),te(!0)}function zL(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return te(!0);let i=r.map(o=>Vl(()=>{let s=Wu(e)??t,a=Ls(o,s),u=OL(a)?a.canActivate(e,n):Qn(s,()=>a(e,n));return si(u).pipe(mn())}));return te(i).pipe(Vs())}function GL(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>xL(s)).filter(s=>s!==null).map(s=>Vl(()=>{let a=s.guards.map(u=>{let l=Wu(s.node)??t,h=Ls(u,l),p=FL(h)?h.canActivateChild(r,n):Qn(l,()=>h(r,n));return si(p).pipe(mn())});return te(a).pipe(Vs())}));return te(o).pipe(Vs())}function WL(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return te(!0);let s=o.map(a=>{let u=Wu(e)??i,l=Ls(a,u),h=VL(l)?l.canDeactivate(n,e,t,r):Qn(u,()=>l(n,e,t,r));return si(h).pipe(mn())});return te(s).pipe(Vs())}function KL(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return te(!0);let o=i.map(s=>{let a=Ls(s,n),u=kL(a)?a.canLoad(e,t):Qn(n,()=>a(e,t));return si(u)});return te(o).pipe(Vs(),QT(r))}function QT(n){return Xp(ct(e=>{if(typeof e!="boolean")throw Dh(n,e)}),Q(e=>e===!0))}function QL(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return te(!0);let o=i.map(s=>{let a=Ls(s,n),u=LL(a)?a.canMatch(e,t):Qn(n,()=>a(e,t));return si(u)});return te(o).pipe(Vs(),QT(r))}var Hu=class{constructor(e){this.segmentGroup=e||null}},qu=class extends Error{constructor(e){super(),this.urlTree=e}};function As(n){return Yo(new Hu(n))}function YL(n){return Yo(new J(4e3,!1))}function ZL(n){return Yo(GT(!1,hn.GuardRejected))}var Wy=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return te(r);if(i.numberOfChildren>1||!i.children[ce])return YL(`${e.redirectTo}`);i=i.children[ce]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:u,fragment:l,routeConfig:h,url:p,outlet:m,params:y,data:b,title:A}=i,M=Qn(o,()=>a({params:y,data:b,queryParams:u,fragment:l,routeConfig:h,url:p,outlet:m,title:A}));if(M instanceof Tr)throw new qu(M);t=M}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new qu(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Tr(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new Se(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new J(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},Ky={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function JL(n,e,t,r,i){let o=YT(n,e,t);return o.matched?(r=EL(e,r),QL(r,e,t,i).pipe(Q(s=>s===!0?o:P({},Ky)))):te(o)}function YT(n,e,t){if(e.path==="**")return XL(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?P({},Ky):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||QV)(t,n,e);if(!i)return P({},Ky);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?P(P({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function XL(n){return{matched:!0,parameters:n.length>0?MT(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function DT(n,e,t,r){return t.length>0&&n2(n,t,r)?{segmentGroup:new Se(e,t2(r,new Se(t,n.children))),slicedSegments:[]}:t.length===0&&r2(n,t,r)?{segmentGroup:new Se(n.segments,e2(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Se(n.segments,n.children),slicedSegments:t}}function e2(n,e,t,r){let i={};for(let o of t)if(Ah(n,e,o)&&!r[kn(o)]){let s=new Se([],{});i[kn(o)]=s}return P(P({},r),i)}function t2(n,e){let t={};t[ce]=e;for(let r of n)if(r.path===""&&kn(r)!==ce){let i=new Se([],{});t[kn(r)]=i}return t}function n2(n,e,t){return t.some(r=>Ah(n,e,r)&&kn(r)!==ce)}function r2(n,e,t){return t.some(r=>Ah(n,e,r))}function Ah(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function i2(n,e,t){return e.length===0&&!n.children[t]}var Qy=class{};function o2(n,e,t,r,i,o,s="emptyOnly"){return new Yy(n,e,t,r,i,s,o).recognize()}var s2=31,Yy=class{constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Wy(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new J(4002,`'${e.segmentGroup}'`)}recognize(){let e=DT(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Q(({children:t,rootSnapshot:r})=>{let i=new dn(r,t),o=new Ih("",i),s=pL(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Rs([],Object.freeze({}),Object.freeze(P({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ce,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ce,t).pipe(Q(r=>({children:r,rootSnapshot:t})),Hr(r=>{if(r instanceof qu)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Hu?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(Q(s=>s instanceof dn?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return De(o).pipe(Fi(s=>{let a=r.children[s],u=IL(t,s);return this.processSegmentGroup(e,u,a,s,i)}),Vi((s,a)=>(s.push(...a),s)),qr(null),lg(),tt(s=>{if(s===null)return As(r);let a=ZT(s);return a2(a),te(a)}))}processSegment(e,t,r,i,o,s,a){return De(t).pipe(Fi(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,o,s,a).pipe(Hr(l=>{if(l instanceof Hu)return te(null);throw l}))),mn(u=>!!u),Hr(u=>{if(KT(u))return i2(r,i,o)?te(new Qy):As(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,u){return kn(r)!==s&&(s===ce||!Ah(i,o,r))?As(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,u):As(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=YT(t,i,o);if(!u)return As(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>s2&&(this.allowRedirects=!1));let y=new Rs(o,l,Object.freeze(P({},this.urlTree.queryParams)),this.urlTree.fragment,CT(i),kn(i),i.component??i._loadedComponent??null,i,bT(i)),b=Eh(y,a,this.paramsInheritanceStrategy);y.params=Object.freeze(b.params),y.data=Object.freeze(b.data);let A=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e);return this.applyRedirects.lineralizeSegments(i,A).pipe(tt(M=>this.processSegment(e,r,t,M.concat(m),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=JL(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Qe(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Qe(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:y}=u,b=new Rs(m,p,Object.freeze(P({},this.urlTree.queryParams)),this.urlTree.fragment,CT(r),kn(r),r.component??r._loadedComponent??null,r,bT(r)),A=Eh(b,s,this.paramsInheritanceStrategy);b.params=Object.freeze(A.params),b.data=Object.freeze(A.data);let{segmentGroup:M,slicedSegments:L}=DT(t,m,y,l);if(L.length===0&&M.hasChildren())return this.processChildren(h,l,M,b).pipe(Q(V=>new dn(b,V)));if(l.length===0&&L.length===0)return te(new dn(b,[]));let G=kn(r)===o;return this.processSegment(h,l,M,L,G?ce:o,!0,b).pipe(Q(V=>new dn(b,V instanceof dn?[V]:[])))}))):As(t)))}getChildConfig(e,t,r){return t.children?te({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?te({routes:t._loadedRoutes,injector:t._loadedInjector}):KL(e,t,r,this.urlSerializer).pipe(tt(i=>i?this.configLoader.loadChildren(e,t).pipe(ct(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):ZL(t))):te({routes:[],injector:e})}};function a2(n){n.sort((e,t)=>e.value.outlet===ce?-1:t.value.outlet===ce?1:e.value.outlet.localeCompare(t.value.outlet))}function u2(n){let e=n.value.routeConfig;return e&&e.path===""}function ZT(n){let e=[],t=new Set;for(let r of n){if(!u2(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=ZT(r.children);e.push(new dn(r.value,i))}return e.filter(r=>!t.has(r))}function CT(n){return n.data||{}}function bT(n){return n.resolve||{}}function c2(n,e,t,r,i,o){return tt(s=>o2(n,e,t,r,s.extractedUrl,i,o).pipe(Q(({state:a,tree:u})=>fe(P({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function l2(n,e){return tt(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return te(t);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of JT(u))s.add(l);let a=0;return De(s).pipe(Fi(u=>o.has(u)?d2(u,r,n,e):(u.data=Eh(u,u.parent,n).resolve,te(void 0))),ct(()=>a++),Jo(1),tt(u=>a===s.size?te(t):Rt))})}function JT(n){let e=n.children.map(t=>JT(t)).flat();return[n,...e]}function d2(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!qT(i)&&(o[zu]=i.title),h2(o,n,e,r).pipe(Q(s=>(n._resolvedData=s,n.data=Eh(n,n.parent,t).resolve,null)))}function h2(n,e,t,r){let i=Sy(n);if(i.length===0)return te({});let o={};return De(i).pipe(tt(s=>f2(n[s],e,t,r).pipe(mn(),ct(a=>{if(a instanceof $u)throw Dh(new ks,a);o[s]=a}))),Jo(1),ug(o),Hr(s=>KT(s)?Rt:Yo(s)))}function f2(n,e,t,r){let i=Wu(e)??r,o=Ls(n,i),s=o.resolve?o.resolve(e,t):Qn(i,()=>o(e,t));return si(s)}function by(n){return Qe(e=>{let t=n(e);return t?De(t).pipe(Q(()=>e)):te(e)})}var XT=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===ce);return r}getResolvedTitleForRoute(t){return t.data[zu]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>B(p2),providedIn:"root"})}}return n})(),p2=(()=>{class n extends XT{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(F(Kb))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Yu=new W("",{providedIn:"root",factory:()=>({})}),g2=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=ft({type:n,selectors:[["ng-component"]],standalone:!0,features:[mb],decls:1,vars:0,template:function(r,i){r&1&&Te(0,"router-outlet")},dependencies:[Xy],encapsulation:2})}}return n})();function ev(n){let e=n.children&&n.children.map(ev),t=e?fe(P({},n),{children:e}):P({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ce&&(t.component=g2),t}var bh=new W(""),tv=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=B(Yd)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return te(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=si(t.loadComponent()).pipe(Q(eS),ct(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),nu(()=>{this.componentLoaders.delete(t)})),i=new Go(r,()=>new $e).pipe(zo());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return te({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=m2(r,this.compiler,t,this.onLoadEndListener).pipe(nu(()=>{this.childrenLoaders.delete(r)})),s=new Go(o,()=>new $e).pipe(zo());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function m2(n,e,t,r){return si(n.loadChildren()).pipe(Q(eS),tt(i=>i instanceof du||Array.isArray(i)?te(i):De(e.compileModuleAsync(i))),Q(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(bh,[],{optional:!0,self:!0}).flat()),{routes:s.map(ev),injector:o}}))}function y2(n){return n&&typeof n=="object"&&"default"in n}function eS(n){return y2(n)?n.default:n}var nv=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>B(v2),providedIn:"root"})}}return n})(),v2=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),tS=new W(""),nS=new W("");function _2(n,e,t){let r=n.get(nS),i=n.get(Jt);return n.get(_e).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),w2(n))),{onViewTransitionCreated:u}=r;return u&&Qn(n,()=>u({transition:a,from:e,to:t})),s})}function w2(n){return new Promise(e=>{Km({read:()=>setTimeout(e)},{injector:n})})}var E2=new W(""),rv=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new $e,this.transitionAbortSubject=new $e,this.configLoader=B(tv),this.environmentInjector=B(cn),this.urlSerializer=B(Gu),this.rootContexts=B(Ku),this.location=B(Ds),this.inputBindingEnabled=B(Sh,{optional:!0})!==null,this.titleStrategy=B(XT),this.options=B(Yu,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=B(nv),this.createViewTransition=B(tS,{optional:!0}),this.navigationErrorHandler=B(E2,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>te(void 0),this.rootComponentType=null;let t=i=>this.events.next(new Oy(i)),r=i=>this.events.next(new Fy(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(fe(P(P({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new yt({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Fu,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(vt(o=>o.id!==0),Q(o=>fe(P({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Qe(o=>{let s=!1,a=!1;return te(o).pipe(Qe(u=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",hn.SupersededByNewNavigation),Rt;this.currentTransition=o,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:typeof u.extras.browserUrl=="string"?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?fe(P({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=u.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&h!=="reload"){let p="";return this.events.next(new ii(u.id,this.urlSerializer.serialize(u.rawUrl),p,mh.IgnoredSameUrlNavigation)),u.resolve(!1),Rt}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return te(u).pipe(Qe(p=>{let m=this.transitions?.getValue();return this.events.next(new Os(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),m!==this.transitions?.getValue()?Rt:Promise.resolve(p)}),c2(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),ct(p=>{o.targetSnapshot=p.targetSnapshot,o.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=fe(P({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let m=new yh(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(m)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:p,extractedUrl:m,source:y,restoredState:b,extras:A}=u,M=new Os(p,this.urlSerializer.serialize(m),y,b);this.events.next(M);let L=$T(this.rootComponentType).snapshot;return this.currentTransition=o=fe(P({},u),{targetSnapshot:L,urlAfterRedirects:m,extras:fe(P({},A),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,te(o)}else{let p="";return this.events.next(new ii(u.id,this.urlSerializer.serialize(u.extractedUrl),p,mh.IgnoredByUrlHandlingStrategy)),u.resolve(!1),Rt}}),ct(u=>{let l=new Ry(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),Q(u=>(this.currentTransition=o=fe(P({},u),{guards:ML(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),o)),BL(this.environmentInjector,u=>this.events.next(u)),ct(u=>{if(o.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw Dh(this.urlSerializer,u.guardsResult);let l=new Ny(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),vt(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",hn.GuardRejected),!1)),by(u=>{if(u.guards.canActivateChecks.length)return te(u).pipe(ct(l=>{let h=new Py(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),Qe(l=>{let h=!1;return te(l).pipe(l2(this.paramsInheritanceStrategy,this.environmentInjector),ct({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",hn.NoDataFromResolver)}}))}),ct(l=>{let h=new ky(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),by(u=>{let l=h=>{let p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe(ct(m=>{h.component=m}),Q(()=>{})));for(let m of h.children)p.push(...l(m));return p};return tu(l(u.targetSnapshot.root)).pipe(qr(null),gr(1))}),by(()=>this.afterPreactivation()),Qe(()=>{let{currentSnapshot:u,targetSnapshot:l}=o,h=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return h?De(h).pipe(Q(()=>o)):te(o)}),Q(u=>{let l=CL(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o=fe(P({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),ct(()=>{this.events.next(new Bu)}),AL(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),gr(1),ct({next:u=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Jn(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{s=!0}}),hg(this.transitionAbortSubject.pipe(ct(u=>{throw u}))),nu(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",hn.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Hr(u=>{if(a=!0,WT(u))this.events.next(new br(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),SL(u)?this.events.next(new Fs(u.url,u.navigationBehaviorOptions)):o.resolve(!1);else{let l=new ju(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0);try{let h=Qn(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(h instanceof $u){let{message:p,cancellationCode:m}=Dh(this.urlSerializer,h);this.events.next(new br(o.id,this.urlSerializer.serialize(o.extractedUrl),p,m)),this.events.next(new Fs(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(l);let p=t.errorHandler(u);o.resolve(!!p)}}catch(h){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(h)}}return Rt}))}))}cancelNavigationTransition(t,r,i){let o=new br(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function I2(n){return n!==Fu}var D2=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>B(C2),providedIn:"root"})}}return n})(),Zy=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},C2=(()=>{class n extends Zy{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=mu(n)))(i||n)}})()}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),rS=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>B(b2),providedIn:"root"})}}return n})(),b2=(()=>{class n extends rS{constructor(){super(...arguments),this.location=B(Ds),this.urlSerializer=B(Gu),this.options=B(Yu,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=B(nv),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Tr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=$T(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof Os)this.stateMemento=this.createStateMemento();else if(t instanceof ii)this.rawUrlTree=r.initialUrl;else if(t instanceof yh){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof Bu?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof br&&(t.code===hn.GuardRejected||t.code===hn.NoDataFromResolver)?this.restoreHistory(r):t instanceof ju?this.restoreHistory(r,!0):t instanceof Jn&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof Tr?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=P(P({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=P(P({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=mu(n)))(i||n)}})()}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ku=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(ku||{});function iS(n,e){n.events.pipe(vt(t=>t instanceof Jn||t instanceof br||t instanceof ju||t instanceof ii),Q(t=>t instanceof Jn||t instanceof ii?ku.COMPLETE:(t instanceof br?t.code===hn.Redirect||t.code===hn.SupersededByNewNavigation:!1)?ku.REDIRECTING:ku.FAILED),vt(t=>t!==ku.REDIRECTING),gr(1)).subscribe(()=>{e()})}function T2(n){throw n}var S2={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},A2={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},oi=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=B(Gd),this.stateManager=B(rS),this.options=B(Yu,{optional:!0})||{},this.pendingTasks=B(Is),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=B(rv),this.urlSerializer=B(Gu),this.location=B(Ds),this.urlHandlingStrategy=B(nv),this._events=new $e,this.errorHandler=this.options.errorHandler||T2,this.navigated=!1,this.routeReuseStrategy=B(D2),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=B(bh,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!B(Sh,{optional:!0}),this.eventsSubscription=new Ke,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof br&&r.code!==hn.Redirect&&r.code!==hn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Jn)this.navigated=!0;else if(r instanceof Fs){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=P({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||I2(i.source)},s);this.scheduleNavigation(a,Fu,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}x2(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Fu,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=P({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(ev),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=P(P({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=LT(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return jT(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=so(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Fu,null,r)}navigate(t,r={skipLocationChange:!1}){return M2(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=P({},S2):r===!1?i=P({},A2):i=r,so(t))return vT(this.currentUrlTree,t,i);let o=this.parseUrl(t);return vT(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,m)=>{a=p,u=m});let h=this.pendingTasks.add();return iS(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function M2(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new J(4008,!1)}function x2(n){return!(n instanceof Bu)&&!(n instanceof Fs)}var oS=(()=>{class n{constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.href=null,this.onChanges=new $e,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area",this.isAnchorElement?this.subscription=t.events.subscribe(l=>{l instanceof Jn&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(so(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:T0(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:so(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||n)(se(oi),se(ao),Am("tabindex"),se(Yi),se(ei),se(Cr))}}static{this.\u0275dir=zt({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&ke("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&$d("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",to],skipLocationChange:[2,"skipLocationChange","skipLocationChange",to],replaceUrl:[2,"replaceUrl","replaceUrl",to],routerLink:"routerLink"},standalone:!0,features:[Wm,Ki]})}}return n})();var Th=class{};var R2=(()=>{class n{constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(vt(t=>t instanceof Jn),Fi(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=Ud(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return De(i).pipe($r())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=te(null);let o=i.pipe(tt(s=>s===null?te(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return De([o,s]).pipe($r())}else return o})}static{this.\u0275fac=function(r){return new(r||n)(F(oi),F(Yd),F(cn),F(Th),F(tv))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),sS=new W(""),N2=(()=>{class n{constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Os?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Jn?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof ii&&t.code===mh.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof vh&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new vh(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){j0()}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})();function P2(n){return n.routerState.root}function Zu(n,e){return{\u0275kind:n,\u0275providers:e}}function k2(){let n=B(ln);return e=>{let t=n.get(ni);if(e!==t.components[0])return;let r=n.get(oi),i=n.get(aS);n.get(iv)===1&&r.initialNavigation(),n.get(uS,null,he.Optional)?.setUpPreloading(),n.get(sS,null,he.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var aS=new W("",{factory:()=>new $e}),iv=new W("",{providedIn:"root",factory:()=>1});function O2(){return Zu(2,[{provide:iv,useValue:0},{provide:Qd,multi:!0,deps:[ln],useFactory:e=>{let t=e.get(Pb,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(oi),o=e.get(aS);iS(i,()=>{r(!0)}),e.get(rv).afterPreactivation=()=>(r(!0),o.closed?te(void 0):o),i.initialNavigation()}))}}])}function F2(){return Zu(3,[{provide:Qd,multi:!0,useFactory:()=>{let e=B(oi);return()=>{e.setUpLocationChangeListener()}}},{provide:iv,useValue:2}])}var uS=new W("");function V2(n){return Zu(0,[{provide:uS,useExisting:R2},{provide:Th,useExisting:n}])}function L2(){return Zu(8,[IT,{provide:Sh,useExisting:IT}])}function j2(n){let e=[{provide:tS,useValue:_2},{provide:nS,useValue:P({skipNextTransition:!!n?.skipInitialTransition},n)}];return Zu(9,e)}var TT=new W("ROUTER_FORROOT_GUARD"),B2=[Ds,{provide:Gu,useClass:ks},oi,Ku,{provide:ao,useFactory:P2,deps:[oi]},tv,[]],ov=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[B2,[],{provide:bh,multi:!0,useValue:t},{provide:TT,useFactory:q2,deps:[[oi,new ws,new gm]]},{provide:Yu,useValue:r||{}},r?.useHash?$2():H2(),U2(),r?.preloadingStrategy?V2(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?z2(r):[],r?.bindToComponentInputs?L2().\u0275providers:[],r?.enableViewTransitions?j2().\u0275providers:[],G2()]}}static forChild(t){return{ngModule:n,providers:[{provide:bh,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(F(TT,8))}}static{this.\u0275mod=pt({type:n})}static{this.\u0275inj=ht({})}}return n})();function U2(){return{provide:sS,useFactory:()=>{let n=B(Lb),e=B(_e),t=B(Yu),r=B(rv),i=B(Gu);return t.scrollOffset&&n.setOffset(t.scrollOffset),new N2(i,r,n,e,t)}}}function $2(){return{provide:Cr,useClass:Ob}}function H2(){return{provide:Cr,useClass:ay}}function q2(n){return"guarded"}function z2(n){return[n.initialNavigation==="disabled"?F2().\u0275providers:[],n.initialNavigation==="enabledBlocking"?O2().\u0275providers:[]]}var ST=new W("");function G2(){return[{provide:ST,useFactory:k2},{provide:Zm,multi:!0,useExisting:ST}]}var Mh=class{constructor(){this.name="",this.goalLife="",this.photoUrl="",this.email="",this.phoneNumber="",this.location="",this.socialNetwork=""}};var K2="firebase",Q2="10.14.1";Ur(K2,Q2,"app");var Ju=new vr("ANGULARFIRE2_VERSION");var Y2=(n,e)=>{let t=e?[e]:VI(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},uo=class{constructor(){return Y2(Z2)}},Z2="app-check";function sv(){}var xh=class{zone;delegate;constructor(e,t=rg){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,t,r)}},av=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",sv,{},sv,sv)),t.pipe(ct({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Rh=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new xh(Zone.current)),this.insideAngular=t.run(()=>new xh(Zone.current,eu)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(F(_e))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function J2(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function rn(n){return X2(J2())(n)}function X2(n){return function(t){return t=t.lift(new av(n.ngZone)),t.pipe(An(n.outsideAngular),gn(n.insideAngular))}}var nj=new Map,rj={activated:!1,tokenObservers:[]},ij={initialized:!1,enabled:!1};function On(n){return nj.get(n)||Object.assign({},rj)}function pS(){return ij}var oj="https://content-firebaseappcheck.googleapis.com/v1";var sj="exchangeDebugToken",lS={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},Z5=24*60*60*1e3;var cv=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return N(this,null,function*(){this.stop();try{this.pending=new Lp,this.pending.promise.catch(t=>{}),yield aj(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Lp,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function aj(n){return new Promise(e=>{setTimeout(e,n)})}var uj={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},ai=new OI("appCheck","AppCheck",uj);function gS(n){if(!On(n).activated)throw ai.create("use-before-activation",{appName:n.name})}function mS(r,i){return N(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(n,a)}catch(y){throw ai.create("fetch-network-error",{originalErrorMessage:y?.message})}if(u.status!==200)throw ai.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(y){throw ai.create("fetch-parse-error",{originalErrorMessage:y?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw ai.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,m=Date.now();return{token:l.token,expireTimeMillis:m+p,issuedAtTimeMillis:m}})}function yS(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${oj}/projects/${t}/apps/${r}:${sj}?key=${i}`,body:{debug_token:e}}}var cj="firebase-app-check-database",lj=1,lv="firebase-app-check-store";var Nh=null;function dj(){return Nh||(Nh=new Promise((n,e)=>{try{let t=indexedDB.open(cj,lj);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(ai.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(lv,{keyPath:"compositeKey"})}}}catch(t){e(ai.create("storage-open",{originalErrorMessage:t?.message}))}}),Nh)}function hj(n,e){return fj(pj(n),e)}function fj(n,e){return N(this,null,function*(){let r=(yield dj()).transaction(lv,"readwrite"),o=r.objectStore(lv).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(ai.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function pj(n){return`${n.options.appId}-${n.name}`}var dv=new al("@firebase/app-check");function uv(n,e){return sl()?hj(n,e).catch(t=>{dv.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function vS(){return pS().enabled}function _S(){return N(this,null,function*(){let n=pS();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var gj={error:"UNKNOWN_ERROR"};function mj(n){return NI.encodeString(JSON.stringify(n),!1)}function hv(n,e=!1){return N(this,null,function*(){let t=n.app;gS(t);let r=On(t),i=r.token,o;if(i&&!Xu(i)&&(r.token=void 0,i=void 0),!i){let u=yield r.cachedTokenPromise;u&&(Xu(u)?i=u:yield uv(t,void 0))}if(!e&&i&&Xu(i))return{token:i.token};let s=!1;if(vS()){r.exchangeTokenPromise||(r.exchangeTokenPromise=mS(yS(t,yield _S()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let u=yield r.exchangeTokenPromise;return yield uv(t,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield On(t).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?dv.warn(u.message):dv.error(u),o=u}let a;return i?o?Xu(i)?a={token:i.token,internalError:o}:a=hS(o):(a={token:i.token},r.token=i,yield uv(t,i)):a=hS(o),s&&wj(t,a),a})}function yj(n){return N(this,null,function*(){let e=n.app;gS(e);let{provider:t}=On(e);if(vS()){let r=yield _S(),{token:i}=yield mS(yS(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function vj(n,e,t,r){let{app:i}=n,o=On(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Xu(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),dS(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>dS(n))}function wS(n,e){let t=On(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function dS(n){let{app:e}=n,t=On(e),r=t.tokenRefresher;r||(r=_j(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function _j(n){let{app:e}=n;return new cv(()=>N(this,null,function*(){let t=On(e),r;if(t.token?r=yield hv(n,!0):r=yield hv(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=On(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},lS.RETRIAL_MIN_WAIT,lS.RETRIAL_MAX_WAIT)}function wj(n,e){let t=On(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Xu(n){return n.expireTimeMillis-Date.now()>0}function hS(n){return{token:mj(gj),error:n}}var fv=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=On(this.app);for(let t of e)wS(this.app,t.next);return Promise.resolve()}};function Ej(n,e){return new fv(n,e)}function Ij(n){return{getToken:e=>hv(n,e),getLimitedUseToken:()=>yj(n),addTokenListener:e=>vj(n,"INTERNAL",e),removeTokenListener:e=>wS(n.app,e)}}var Dj="@firebase/app-check",Cj="0.8.8";var bj="app-check",fS="app-check-internal";function Tj(){Ka(new Ni(bj,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return Ej(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(fS).initialize()})),Ka(new Ni(fS,n=>{let e=n.getProvider("app-check").getImmediate();return Ij(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Ur(Dj,Cj)}Tj();var Sj=["localhost","0.0.0.0","127.0.0.1"],c8=typeof window<"u"&&Sj.includes(window.location.hostname);var Aj="firebase",Mj="10.14.1";un.registerVersion(Aj,Mj,"app-compat");var xj=["ngOnDestroy"],DS=(n,e,t,r={})=>new Proxy(n,{get:(i,o)=>t.runOutsideAngular(()=>{if(n[o])return r?.spy?.get&&r.spy.get(o,n[o]),n[o];if(xj.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let u=a?.[o];return typeof u=="function"?u.bind(a):u?.then?u.then(l=>t.run(()=>l)):t.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>s[u],apply:(a,u,l)=>s.then(h=>{let p=h?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,p),p})})})});var Ph=class{constructor(e){return e}},js=new W("angularfire2.app.options"),Bs=new W("angularfire2.app.name");function ec(n,e,t){let r=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||r;let s=un.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>un.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){let a=!!module.hot;Rj("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Ph(s)}var Rj=(n,...e)=>{ey()&&typeof console<"u"&&console[n](...e)},Nj={provide:Ph,useFactory:ec,deps:[js,_e,[new ws,Bs]]},CS=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:js,useValue:t},{provide:Bs,useValue:r}]}}constructor(t){un.registerVersion("angularfire",Ju.full,"core"),un.registerVersion("angularfire",Ju.full,"app-compat"),un.registerVersion("angular",yb.full,t.toString())}static \u0275fac=function(r){return new(r||n)(F(Qt))};static \u0275mod=pt({type:n});static \u0275inj=ht({providers:[Nj]})}return n})();function kh(n,e,t,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return Pj(i,s)||(IS("error",`${e} was already initialized on the ${t} Firebase App with different settings.${kj?" You may need to reload as Firebase is not HMR aware.":""}`),IS("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}function Pj(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var kj=typeof module<"u"&&!!module.hot,IS=(n,...e)=>{ey()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var pv=new W("angularfire2.auth.use-emulator"),gv=new W("angularfire2.auth.settings"),mv=new W("angularfire2.auth.tenant-id"),yv=new W("angularfire2.auth.langugage-code"),vv=new W("angularfire2.auth.use-device-language"),_v=new W("angularfire.auth.persistence"),wv=(n,e,t,r,i,o,s,a)=>kh(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let u=e.runOutsideAngular(()=>n.auth());if(t&&u.useEmulator(...t),r&&(u.tenantId=r),u.languageCode=i,o&&u.useDeviceLanguage(),s)for(let[l,h]of Object.entries(s))u.settings[l]=h;return a&&u.setPersistence(a),u},[t,r,i,o,s,a]),bS=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,o,s,a,u,l,h,p,m,y){let b=new $e,A=te(void 0).pipe(gn(s.outsideAngular),Qe(()=>o.runOutsideAngular(()=>import("./chunk-DT56ZVVI.js"))),Q(()=>ec(t,o,r)),Q(M=>wv(M,o,a,l,h,p,u,m)),jl({bufferSize:1,refCount:!1}));if(no(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=te(null);else{A.pipe(mn()).subscribe();let M=A.pipe(Qe(V=>V.getRedirectResult().then(Z=>Z,()=>null)),rn,jl({bufferSize:1,refCount:!1})),L=A.pipe(Qe(V=>new pe(Z=>({unsubscribe:o.runOutsideAngular(()=>V.onAuthStateChanged(ne=>Z.next(ne),ne=>Z.error(ne),()=>Z.complete()))})))),G=A.pipe(Qe(V=>new pe(Z=>({unsubscribe:o.runOutsideAngular(()=>V.onIdTokenChanged(ne=>Z.next(ne),ne=>Z.error(ne),()=>Z.complete()))}))));this.authState=M.pipe(Bl(L),An(s.outsideAngular),gn(s.insideAngular)),this.user=M.pipe(Bl(G),An(s.outsideAngular),gn(s.insideAngular)),this.idToken=this.user.pipe(Qe(V=>V?De(V.getIdToken()):te(null))),this.idTokenResult=this.user.pipe(Qe(V=>V?De(V.getIdTokenResult()):te(null))),this.credential=ag(M,b,this.authState.pipe(vt(V=>!V))).pipe(Q(V=>V?.user?V:null),An(s.outsideAngular),gn(s.insideAngular))}return DS(this,A,o,{spy:{apply:(M,L,G)=>{(M.startsWith("signIn")||M.startsWith("createUser"))&&G.then(V=>b.next(V))}}})}static \u0275fac=function(r){return new(r||n)(F(js),F(Bs,8),F(Qt),F(_e),F(Rh),F(pv,8),F(gv,8),F(mv,8),F(yv,8),F(vv,8),F(_v,8),F(uo,8))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var TS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},SS={};var ui,Ev;(function(){var n;function e(E,v){function w(){}w.prototype=v.prototype,E.D=v.prototype,E.prototype=new w,E.prototype.constructor=E,E.C=function(I,D,T){for(var _=Array(arguments.length-2),cr=2;cr<arguments.length;cr++)_[cr-2]=arguments[cr];return v.prototype[D].apply(I,_)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,v,w){w||(w=0);var I=Array(16);if(typeof v=="string")for(var D=0;16>D;++D)I[D]=v.charCodeAt(w++)|v.charCodeAt(w++)<<8|v.charCodeAt(w++)<<16|v.charCodeAt(w++)<<24;else for(D=0;16>D;++D)I[D]=v[w++]|v[w++]<<8|v[w++]<<16|v[w++]<<24;v=E.g[0],w=E.g[1],D=E.g[2];var T=E.g[3],_=v+(T^w&(D^T))+I[0]+3614090360&4294967295;v=w+(_<<7&4294967295|_>>>25),_=T+(D^v&(w^D))+I[1]+3905402710&4294967295,T=v+(_<<12&4294967295|_>>>20),_=D+(w^T&(v^w))+I[2]+606105819&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(v^D&(T^v))+I[3]+3250441966&4294967295,w=D+(_<<22&4294967295|_>>>10),_=v+(T^w&(D^T))+I[4]+4118548399&4294967295,v=w+(_<<7&4294967295|_>>>25),_=T+(D^v&(w^D))+I[5]+1200080426&4294967295,T=v+(_<<12&4294967295|_>>>20),_=D+(w^T&(v^w))+I[6]+2821735955&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(v^D&(T^v))+I[7]+4249261313&4294967295,w=D+(_<<22&4294967295|_>>>10),_=v+(T^w&(D^T))+I[8]+1770035416&4294967295,v=w+(_<<7&4294967295|_>>>25),_=T+(D^v&(w^D))+I[9]+2336552879&4294967295,T=v+(_<<12&4294967295|_>>>20),_=D+(w^T&(v^w))+I[10]+4294925233&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(v^D&(T^v))+I[11]+2304563134&4294967295,w=D+(_<<22&4294967295|_>>>10),_=v+(T^w&(D^T))+I[12]+1804603682&4294967295,v=w+(_<<7&4294967295|_>>>25),_=T+(D^v&(w^D))+I[13]+4254626195&4294967295,T=v+(_<<12&4294967295|_>>>20),_=D+(w^T&(v^w))+I[14]+2792965006&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(v^D&(T^v))+I[15]+1236535329&4294967295,w=D+(_<<22&4294967295|_>>>10),_=v+(D^T&(w^D))+I[1]+4129170786&4294967295,v=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(v^w))+I[6]+3225465664&4294967295,T=v+(_<<9&4294967295|_>>>23),_=D+(v^w&(T^v))+I[11]+643717713&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^v&(D^T))+I[0]+3921069994&4294967295,w=D+(_<<20&4294967295|_>>>12),_=v+(D^T&(w^D))+I[5]+3593408605&4294967295,v=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(v^w))+I[10]+38016083&4294967295,T=v+(_<<9&4294967295|_>>>23),_=D+(v^w&(T^v))+I[15]+3634488961&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^v&(D^T))+I[4]+3889429448&4294967295,w=D+(_<<20&4294967295|_>>>12),_=v+(D^T&(w^D))+I[9]+568446438&4294967295,v=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(v^w))+I[14]+3275163606&4294967295,T=v+(_<<9&4294967295|_>>>23),_=D+(v^w&(T^v))+I[3]+4107603335&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^v&(D^T))+I[8]+1163531501&4294967295,w=D+(_<<20&4294967295|_>>>12),_=v+(D^T&(w^D))+I[13]+2850285829&4294967295,v=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(v^w))+I[2]+4243563512&4294967295,T=v+(_<<9&4294967295|_>>>23),_=D+(v^w&(T^v))+I[7]+1735328473&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^v&(D^T))+I[12]+2368359562&4294967295,w=D+(_<<20&4294967295|_>>>12),_=v+(w^D^T)+I[5]+4294588738&4294967295,v=w+(_<<4&4294967295|_>>>28),_=T+(v^w^D)+I[8]+2272392833&4294967295,T=v+(_<<11&4294967295|_>>>21),_=D+(T^v^w)+I[11]+1839030562&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^v)+I[14]+4259657740&4294967295,w=D+(_<<23&4294967295|_>>>9),_=v+(w^D^T)+I[1]+2763975236&4294967295,v=w+(_<<4&4294967295|_>>>28),_=T+(v^w^D)+I[4]+1272893353&4294967295,T=v+(_<<11&4294967295|_>>>21),_=D+(T^v^w)+I[7]+4139469664&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^v)+I[10]+3200236656&4294967295,w=D+(_<<23&4294967295|_>>>9),_=v+(w^D^T)+I[13]+681279174&4294967295,v=w+(_<<4&4294967295|_>>>28),_=T+(v^w^D)+I[0]+3936430074&4294967295,T=v+(_<<11&4294967295|_>>>21),_=D+(T^v^w)+I[3]+3572445317&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^v)+I[6]+76029189&4294967295,w=D+(_<<23&4294967295|_>>>9),_=v+(w^D^T)+I[9]+3654602809&4294967295,v=w+(_<<4&4294967295|_>>>28),_=T+(v^w^D)+I[12]+3873151461&4294967295,T=v+(_<<11&4294967295|_>>>21),_=D+(T^v^w)+I[15]+530742520&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^v)+I[2]+3299628645&4294967295,w=D+(_<<23&4294967295|_>>>9),_=v+(D^(w|~T))+I[0]+4096336452&4294967295,v=w+(_<<6&4294967295|_>>>26),_=T+(w^(v|~D))+I[7]+1126891415&4294967295,T=v+(_<<10&4294967295|_>>>22),_=D+(v^(T|~w))+I[14]+2878612391&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~v))+I[5]+4237533241&4294967295,w=D+(_<<21&4294967295|_>>>11),_=v+(D^(w|~T))+I[12]+1700485571&4294967295,v=w+(_<<6&4294967295|_>>>26),_=T+(w^(v|~D))+I[3]+2399980690&4294967295,T=v+(_<<10&4294967295|_>>>22),_=D+(v^(T|~w))+I[10]+4293915773&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~v))+I[1]+2240044497&4294967295,w=D+(_<<21&4294967295|_>>>11),_=v+(D^(w|~T))+I[8]+1873313359&4294967295,v=w+(_<<6&4294967295|_>>>26),_=T+(w^(v|~D))+I[15]+4264355552&4294967295,T=v+(_<<10&4294967295|_>>>22),_=D+(v^(T|~w))+I[6]+2734768916&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~v))+I[13]+1309151649&4294967295,w=D+(_<<21&4294967295|_>>>11),_=v+(D^(w|~T))+I[4]+4149444226&4294967295,v=w+(_<<6&4294967295|_>>>26),_=T+(w^(v|~D))+I[11]+3174756917&4294967295,T=v+(_<<10&4294967295|_>>>22),_=D+(v^(T|~w))+I[2]+718787259&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~v))+I[9]+3951481745&4294967295,E.g[0]=E.g[0]+v&4294967295,E.g[1]=E.g[1]+(D+(_<<21&4294967295|_>>>11))&4294967295,E.g[2]=E.g[2]+D&4294967295,E.g[3]=E.g[3]+T&4294967295}r.prototype.u=function(E,v){v===void 0&&(v=E.length);for(var w=v-this.blockSize,I=this.B,D=this.h,T=0;T<v;){if(D==0)for(;T<=w;)i(this,E,T),T+=this.blockSize;if(typeof E=="string"){for(;T<v;)if(I[D++]=E.charCodeAt(T++),D==this.blockSize){i(this,I),D=0;break}}else for(;T<v;)if(I[D++]=E[T++],D==this.blockSize){i(this,I),D=0;break}}this.h=D,this.o+=v},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var v=1;v<E.length-8;++v)E[v]=0;var w=8*this.o;for(v=E.length-8;v<E.length;++v)E[v]=w&255,w/=256;for(this.u(E),E=Array(16),v=w=0;4>v;++v)for(var I=0;32>I;I+=8)E[w++]=this.g[v]>>>I&255;return E};function o(E,v){var w=a;return Object.prototype.hasOwnProperty.call(w,E)?w[E]:w[E]=v(E)}function s(E,v){this.h=v;for(var w=[],I=!0,D=E.length-1;0<=D;D--){var T=E[D]|0;I&&T==v||(w[D]=T,I=!1)}this.g=w}var a={};function u(E){return-128<=E&&128>E?o(E,function(v){return new s([v|0],0>v?-1:0)}):new s([E|0],0>E?-1:0)}function l(E){if(isNaN(E)||!isFinite(E))return p;if(0>E)return M(l(-E));for(var v=[],w=1,I=0;E>=w;I++)v[I]=E/w|0,w*=4294967296;return new s(v,0)}function h(E,v){if(E.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(E.charAt(0)=="-")return M(h(E.substring(1),v));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=l(Math.pow(v,8)),I=p,D=0;D<E.length;D+=8){var T=Math.min(8,E.length-D),_=parseInt(E.substring(D,D+T),v);8>T?(T=l(Math.pow(v,T)),I=I.j(T).add(l(_))):(I=I.j(w),I=I.add(l(_)))}return I}var p=u(0),m=u(1),y=u(16777216);n=s.prototype,n.m=function(){if(A(this))return-M(this).m();for(var E=0,v=1,w=0;w<this.g.length;w++){var I=this.i(w);E+=(0<=I?I:4294967296+I)*v,v*=4294967296}return E},n.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(b(this))return"0";if(A(this))return"-"+M(this).toString(E);for(var v=l(Math.pow(E,6)),w=this,I="";;){var D=Z(w,v).g;w=L(w,D.j(v));var T=((0<w.g.length?w.g[0]:w.h)>>>0).toString(E);if(w=D,b(w))return T+I;for(;6>T.length;)T="0"+T;I=T+I}},n.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function b(E){if(E.h!=0)return!1;for(var v=0;v<E.g.length;v++)if(E.g[v]!=0)return!1;return!0}function A(E){return E.h==-1}n.l=function(E){return E=L(this,E),A(E)?-1:b(E)?0:1};function M(E){for(var v=E.g.length,w=[],I=0;I<v;I++)w[I]=~E.g[I];return new s(w,~E.h).add(m)}n.abs=function(){return A(this)?M(this):this},n.add=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],I=0,D=0;D<=v;D++){var T=I+(this.i(D)&65535)+(E.i(D)&65535),_=(T>>>16)+(this.i(D)>>>16)+(E.i(D)>>>16);I=_>>>16,T&=65535,_&=65535,w[D]=_<<16|T}return new s(w,w[w.length-1]&-2147483648?-1:0)};function L(E,v){return E.add(M(v))}n.j=function(E){if(b(this)||b(E))return p;if(A(this))return A(E)?M(this).j(M(E)):M(M(this).j(E));if(A(E))return M(this.j(M(E)));if(0>this.l(y)&&0>E.l(y))return l(this.m()*E.m());for(var v=this.g.length+E.g.length,w=[],I=0;I<2*v;I++)w[I]=0;for(I=0;I<this.g.length;I++)for(var D=0;D<E.g.length;D++){var T=this.i(I)>>>16,_=this.i(I)&65535,cr=E.i(D)>>>16,Aa=E.i(D)&65535;w[2*I+2*D]+=_*Aa,G(w,2*I+2*D),w[2*I+2*D+1]+=T*Aa,G(w,2*I+2*D+1),w[2*I+2*D+1]+=_*cr,G(w,2*I+2*D+1),w[2*I+2*D+2]+=T*cr,G(w,2*I+2*D+2)}for(I=0;I<v;I++)w[I]=w[2*I+1]<<16|w[2*I];for(I=v;I<2*v;I++)w[I]=0;return new s(w,0)};function G(E,v){for(;(E[v]&65535)!=E[v];)E[v+1]+=E[v]>>>16,E[v]&=65535,v++}function V(E,v){this.g=E,this.h=v}function Z(E,v){if(b(v))throw Error("division by zero");if(b(E))return new V(p,p);if(A(E))return v=Z(M(E),v),new V(M(v.g),M(v.h));if(A(v))return v=Z(E,M(v)),new V(M(v.g),v.h);if(30<E.g.length){if(A(E)||A(v))throw Error("slowDivide_ only works with positive integers.");for(var w=m,I=v;0>=I.l(E);)w=ne(w),I=ne(I);var D=X(w,1),T=X(I,1);for(I=X(I,2),w=X(w,2);!b(I);){var _=T.add(I);0>=_.l(E)&&(D=D.add(w),T=_),I=X(I,1),w=X(w,1)}return v=L(E,D.j(v)),new V(D,v)}for(D=p;0<=E.l(v);){for(w=Math.max(1,Math.floor(E.m()/v.m())),I=Math.ceil(Math.log(w)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),T=l(w),_=T.j(v);A(_)||0<_.l(E);)w-=I,T=l(w),_=T.j(v);b(T)&&(T=m),D=D.add(T),E=L(E,_)}return new V(D,E)}n.A=function(E){return Z(this,E).h},n.and=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],I=0;I<v;I++)w[I]=this.i(I)&E.i(I);return new s(w,this.h&E.h)},n.or=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],I=0;I<v;I++)w[I]=this.i(I)|E.i(I);return new s(w,this.h|E.h)},n.xor=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],I=0;I<v;I++)w[I]=this.i(I)^E.i(I);return new s(w,this.h^E.h)};function ne(E){for(var v=E.g.length+1,w=[],I=0;I<v;I++)w[I]=E.i(I)<<1|E.i(I-1)>>>31;return new s(w,E.h)}function X(E,v){var w=v>>5;v%=32;for(var I=E.g.length-w,D=[],T=0;T<I;T++)D[T]=0<v?E.i(T+w)>>>v|E.i(T+w+1)<<32-v:E.i(T+w);return new s(D,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Ev=SS.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,ui=SS.Integer=s}).apply(typeof TS<"u"?TS:typeof self<"u"?self:typeof window<"u"?window:{});var Oh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Sr={};var Iv,Fj,Us,Dv,tc,Fh,Cv,bv,Tv;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Oh=="object"&&Oh];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var C=c[g];if(!(C in f))break e;f=f[C]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,g=!1,C={next:function(){if(!g&&f<c.length){var x=f++;return{value:d(x,c[x]),done:!1}}return g=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,g),c.apply(d,C)}}return function(){return c.apply(d,arguments)}}function m(c,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function y(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function b(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,C,x){for(var j=Array(arguments.length-2),Re=2;Re<arguments.length;Re++)j[Re-2]=arguments[Re];return d.prototype[C].apply(g,j)}}function A(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function M(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let C=c.length||0,x=g.length||0;c.length=C+x;for(let j=0;j<x;j++)c[C+j]=g[j]}else c.push(g)}}class L{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function G(c){return/^[\s\xa0]*$/.test(c)}function V(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function Z(c){return Z[" "](c),c}Z[" "]=function(){};var ne=V().indexOf("Gecko")!=-1&&!(V().toLowerCase().indexOf("webkit")!=-1&&V().indexOf("Edge")==-1)&&!(V().indexOf("Trident")!=-1||V().indexOf("MSIE")!=-1)&&V().indexOf("Edge")==-1;function X(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function E(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function v(c){let d={};for(let f in c)d[f]=c[f];return d}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(c,d){let f,g;for(let C=1;C<arguments.length;C++){g=arguments[C];for(f in g)c[f]=g[f];for(let x=0;x<w.length;x++)f=w[x],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function D(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function T(c){a.setTimeout(()=>{throw c},0)}function _(){var c=hp;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class cr{constructor(){this.h=this.g=null}add(d,f){let g=Aa.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var Aa=new L(()=>new DR,c=>c.reset());class DR{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Ma,xa=!1,hp=new cr,AE=()=>{let c=a.Promise.resolve(void 0);Ma=()=>{c.then(CR)}};var CR=()=>{for(var c;c=_();){try{c.h.call(c.g)}catch(f){T(f)}var d=Aa;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}xa=!1};function Vr(){this.s=this.s,this.C=this.C}Vr.prototype.s=!1,Vr.prototype.ma=function(){this.s||(this.s=!0,this.N())},Vr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Et(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}Et.prototype.h=function(){this.defaultPrevented=!0};var bR=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function Ra(c,d){if(Et.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(ne){e:{try{Z(d.nodeName);var C=!0;break e}catch{}C=!1}C||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:TR[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Ra.aa.h.call(this)}}b(Ra,Et);var TR={2:"touch",3:"pen",4:"mouse"};Ra.prototype.h=function(){Ra.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Na="closure_listenable_"+(1e6*Math.random()|0),SR=0;function AR(c,d,f,g,C){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=C,this.key=++SR,this.da=this.fa=!1}function $c(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Hc(c){this.src=c,this.g={},this.h=0}Hc.prototype.add=function(c,d,f,g,C){var x=c.toString();c=this.g[x],c||(c=this.g[x]=[],this.h++);var j=pp(c,d,g,C);return-1<j?(d=c[j],f||(d.fa=!1)):(d=new AR(d,this.src,x,!!g,C),d.fa=f,c.push(d)),d};function fp(c,d){var f=d.type;if(f in c.g){var g=c.g[f],C=Array.prototype.indexOf.call(g,d,void 0),x;(x=0<=C)&&Array.prototype.splice.call(g,C,1),x&&($c(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function pp(c,d,f,g){for(var C=0;C<c.length;++C){var x=c[C];if(!x.da&&x.listener==d&&x.capture==!!f&&x.ha==g)return C}return-1}var gp="closure_lm_"+(1e6*Math.random()|0),mp={};function ME(c,d,f,g,C){if(g&&g.once)return RE(c,d,f,g,C);if(Array.isArray(d)){for(var x=0;x<d.length;x++)ME(c,d[x],f,g,C);return null}return f=wp(f),c&&c[Na]?c.K(d,f,l(g)?!!g.capture:!!g,C):xE(c,d,f,!1,g,C)}function xE(c,d,f,g,C,x){if(!d)throw Error("Invalid event type");var j=l(C)?!!C.capture:!!C,Re=vp(c);if(Re||(c[gp]=Re=new Hc(c)),f=Re.add(d,f,g,j,x),f.proxy)return f;if(g=MR(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)bR||(C=j),C===void 0&&(C=!1),c.addEventListener(d.toString(),g,C);else if(c.attachEvent)c.attachEvent(PE(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function MR(){function c(f){return d.call(c.src,c.listener,f)}let d=xR;return c}function RE(c,d,f,g,C){if(Array.isArray(d)){for(var x=0;x<d.length;x++)RE(c,d[x],f,g,C);return null}return f=wp(f),c&&c[Na]?c.L(d,f,l(g)?!!g.capture:!!g,C):xE(c,d,f,!0,g,C)}function NE(c,d,f,g,C){if(Array.isArray(d))for(var x=0;x<d.length;x++)NE(c,d[x],f,g,C);else g=l(g)?!!g.capture:!!g,f=wp(f),c&&c[Na]?(c=c.i,d=String(d).toString(),d in c.g&&(x=c.g[d],f=pp(x,f,g,C),-1<f&&($c(x[f]),Array.prototype.splice.call(x,f,1),x.length==0&&(delete c.g[d],c.h--)))):c&&(c=vp(c))&&(d=c.g[d.toString()],c=-1,d&&(c=pp(d,f,g,C)),(f=-1<c?d[c]:null)&&yp(f))}function yp(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Na])fp(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(PE(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=vp(d))?(fp(f,c),f.h==0&&(f.src=null,d[gp]=null)):$c(c)}}}function PE(c){return c in mp?mp[c]:mp[c]="on"+c}function xR(c,d){if(c.da)c=!0;else{d=new Ra(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&yp(c),c=f.call(g,d)}return c}function vp(c){return c=c[gp],c instanceof Hc?c:null}var _p="__closure_events_fn_"+(1e9*Math.random()>>>0);function wp(c){return typeof c=="function"?c:(c[_p]||(c[_p]=function(d){return c.handleEvent(d)}),c[_p])}function It(){Vr.call(this),this.i=new Hc(this),this.M=this,this.F=null}b(It,Vr),It.prototype[Na]=!0,It.prototype.removeEventListener=function(c,d,f,g){NE(this,c,d,f,g)};function At(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new Et(d,c);else if(d instanceof Et)d.target=d.target||c;else{var C=d;d=new Et(g,c),I(d,C)}if(C=!0,f)for(var x=f.length-1;0<=x;x--){var j=d.g=f[x];C=qc(j,g,!0,d)&&C}if(j=d.g=c,C=qc(j,g,!0,d)&&C,C=qc(j,g,!1,d)&&C,f)for(x=0;x<f.length;x++)j=d.g=f[x],C=qc(j,g,!1,d)&&C}It.prototype.N=function(){if(It.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)$c(f[g]);delete c.g[d],c.h--}}this.F=null},It.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},It.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function qc(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var C=!0,x=0;x<d.length;++x){var j=d[x];if(j&&!j.da&&j.capture==f){var Re=j.listener,mt=j.ha||j.src;j.fa&&fp(c.i,j),C=Re.call(mt,g)!==!1&&C}}return C&&!g.defaultPrevented}function kE(c,d,f){if(typeof c=="function")f&&(c=m(c,f));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function OE(c){c.g=kE(()=>{c.g=null,c.i&&(c.i=!1,OE(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class RR extends Vr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:OE(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Pa(c){Vr.call(this),this.h=c,this.g={}}b(Pa,Vr);var FE=[];function VE(c){X(c.g,function(d,f){this.g.hasOwnProperty(f)&&yp(d)},c),c.g={}}Pa.prototype.N=function(){Pa.aa.N.call(this),VE(this)},Pa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ep=a.JSON.stringify,NR=a.JSON.parse,PR=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Ip(){}Ip.prototype.h=null;function LE(c){return c.h||(c.h=c.i())}function jE(){}var ka={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Dp(){Et.call(this,"d")}b(Dp,Et);function Cp(){Et.call(this,"c")}b(Cp,Et);var Ai={},BE=null;function zc(){return BE=BE||new It}Ai.La="serverreachability";function UE(c){Et.call(this,Ai.La,c)}b(UE,Et);function Oa(c){let d=zc();At(d,new UE(d))}Ai.STAT_EVENT="statevent";function $E(c,d){Et.call(this,Ai.STAT_EVENT,c),this.stat=d}b($E,Et);function Mt(c){let d=zc();At(d,new $E(d,c))}Ai.Ma="timingevent";function HE(c,d){Et.call(this,Ai.Ma,c),this.size=d}b(HE,Et);function Fa(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function Va(){this.g=!0}Va.prototype.xa=function(){this.g=!1};function kR(c,d,f,g,C,x){c.info(function(){if(c.g)if(x)for(var j="",Re=x.split("&"),mt=0;mt<Re.length;mt++){var be=Re[mt].split("=");if(1<be.length){var Dt=be[0];be=be[1];var Ct=Dt.split("_");j=2<=Ct.length&&Ct[1]=="type"?j+(Dt+"="+be+"&"):j+(Dt+"=redacted&")}}else j=null;else j=x;return"XMLHTTP REQ ("+g+") [attempt "+C+"]: "+d+`
`+f+`
`+j})}function OR(c,d,f,g,C,x,j){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+C+"]: "+d+`
`+f+`
`+x+" "+j})}function Vo(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+VR(c,f)+(g?" "+g:"")})}function FR(c,d){c.info(function(){return"TIMEOUT: "+d})}Va.prototype.info=function(){};function VR(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var C=g[1];if(Array.isArray(C)&&!(1>C.length)){var x=C[0];if(x!="noop"&&x!="stop"&&x!="close")for(var j=1;j<C.length;j++)C[j]=""}}}}return Ep(f)}catch{return d}}var Gc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},qE={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},bp;function Wc(){}b(Wc,Ip),Wc.prototype.g=function(){return new XMLHttpRequest},Wc.prototype.i=function(){return{}},bp=new Wc;function Lr(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new Pa(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new zE}function zE(){this.i=null,this.g="",this.h=!1}var GE={},Tp={};function Sp(c,d,f){c.L=1,c.v=Zc(lr(d)),c.m=f,c.P=!0,WE(c,null)}function WE(c,d){c.F=Date.now(),Kc(c),c.A=lr(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),aI(f.i,"t",g),c.C=0,f=c.j.J,c.h=new zE,c.g=bI(c.j,f?d:null,!c.m),0<c.O&&(c.M=new RR(m(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var C="readystatechange";Array.isArray(C)||(C&&(FE[0]=C.toString()),C=FE);for(var x=0;x<C.length;x++){var j=ME(f,C[x],g||d.handleEvent,!1,d.h||d);if(!j)break;d.g[j.key]=j}d=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),Oa(),kR(c.i,c.u,c.A,c.l,c.R,c.m)}Lr.prototype.ca=function(c){c=c.target;let d=this.M;d&&dr(c)==3?d.j():this.Y(c)},Lr.prototype.Y=function(c){try{if(c==this.g)e:{let Ct=dr(this.g);var d=this.g.Ba();let Bo=this.g.Z();if(!(3>Ct)&&(Ct!=3||this.g&&(this.h.h||this.g.oa()||pI(this.g)))){this.J||Ct!=4||d==7||(d==8||0>=Bo?Oa(3):Oa(2)),Ap(this);var f=this.g.Z();this.X=f;t:if(KE(this)){var g=pI(this.g);c="";var C=g.length,x=dr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Mi(this),La(this);var j="";break t}this.h.i=new a.TextDecoder}for(d=0;d<C;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(x&&d==C-1)});g.length=0,this.h.g+=c,this.C=0,j=this.h.g}else j=this.g.oa();if(this.o=f==200,OR(this.i,this.u,this.A,this.l,this.R,Ct,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Re,mt=this.g;if((Re=mt.g?mt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!G(Re)){var be=Re;break t}}be=null}if(f=be)Vo(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Mp(this,f);else{this.o=!1,this.s=3,Mt(12),Mi(this),La(this);break e}}if(this.P){f=!0;let Tn;for(;!this.J&&this.C<j.length;)if(Tn=LR(this,j),Tn==Tp){Ct==4&&(this.s=4,Mt(14),f=!1),Vo(this.i,this.l,null,"[Incomplete Response]");break}else if(Tn==GE){this.s=4,Mt(15),Vo(this.i,this.l,j,"[Invalid Chunk]"),f=!1;break}else Vo(this.i,this.l,Tn,null),Mp(this,Tn);if(KE(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ct!=4||j.length!=0||this.h.h||(this.s=1,Mt(16),f=!1),this.o=this.o&&f,!f)Vo(this.i,this.l,j,"[Invalid Chunked Response]"),Mi(this),La(this);else if(0<j.length&&!this.W){this.W=!0;var Dt=this.j;Dt.g==this&&Dt.ba&&!Dt.M&&(Dt.j.info("Great, no buffering proxy detected. Bytes received: "+j.length),Op(Dt),Dt.M=!0,Mt(11))}}else Vo(this.i,this.l,j,null),Mp(this,j);Ct==4&&Mi(this),this.o&&!this.J&&(Ct==4?EI(this.j,this):(this.o=!1,Kc(this)))}else tN(this.g),f==400&&0<j.indexOf("Unknown SID")?(this.s=3,Mt(12)):(this.s=0,Mt(13)),Mi(this),La(this)}}}catch{}finally{}};function KE(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function LR(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?Tp:(f=Number(d.substring(f,g)),isNaN(f)?GE:(g+=1,g+f>d.length?Tp:(d=d.slice(g,g+f),c.C=g+f,d)))}Lr.prototype.cancel=function(){this.J=!0,Mi(this)};function Kc(c){c.S=Date.now()+c.I,QE(c,c.I)}function QE(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Fa(m(c.ba,c),d)}function Ap(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Lr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(FR(this.i,this.A),this.L!=2&&(Oa(),Mt(17)),Mi(this),this.s=2,La(this)):QE(this,this.S-c)};function La(c){c.j.G==0||c.J||EI(c.j,c)}function Mi(c){Ap(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,VE(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function Mp(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||xp(f.h,c))){if(!c.K&&xp(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var C=g;if(C[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)nl(f),el(f);else break e;kp(f),Mt(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=Fa(m(f.Za,f),6e3));if(1>=JE(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Ri(f,11)}else if((c.K||f.g==c)&&nl(f),!G(d))for(C=f.Da.g.parse(d),d=0;d<C.length;d++){let be=C[d];if(f.T=be[0],be=be[1],f.G==2)if(be[0]=="c"){f.K=be[1],f.ia=be[2];let Dt=be[3];Dt!=null&&(f.la=Dt,f.j.info("VER="+f.la));let Ct=be[4];Ct!=null&&(f.Aa=Ct,f.j.info("SVER="+f.Aa));let Bo=be[5];Bo!=null&&typeof Bo=="number"&&0<Bo&&(g=1.5*Bo,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let Tn=c.g;if(Tn){let il=Tn.g?Tn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(il){var x=g.h;x.g||il.indexOf("spdy")==-1&&il.indexOf("quic")==-1&&il.indexOf("h2")==-1||(x.j=x.l,x.g=new Set,x.h&&(Rp(x,x.h),x.h=null))}if(g.D){let Fp=Tn.g?Tn.g.getResponseHeader("X-HTTP-Session-Id"):null;Fp&&(g.ya=Fp,Le(g.I,g.D,Fp))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var j=c;if(g.qa=CI(g,g.J?g.ia:null,g.W),j.K){XE(g.h,j);var Re=j,mt=g.L;mt&&(Re.I=mt),Re.B&&(Ap(Re),Kc(Re)),g.g=j}else _I(g);0<f.i.length&&tl(f)}else be[0]!="stop"&&be[0]!="close"||Ri(f,7);else f.G==3&&(be[0]=="stop"||be[0]=="close"?be[0]=="stop"?Ri(f,7):Pp(f):be[0]!="noop"&&f.l&&f.l.ta(be),f.v=0)}}Oa(4)}catch{}}var jR=class{constructor(c,d){this.g=c,this.map=d}};function YE(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ZE(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function JE(c){return c.h?1:c.g?c.g.size:0}function xp(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function Rp(c,d){c.g?c.g.add(d):c.h=d}function XE(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}YE.prototype.cancel=function(){if(this.i=eI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function eI(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return A(c.i)}function BR(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function UR(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function tI(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=UR(c),g=BR(c),C=g.length,x=0;x<C;x++)d.call(void 0,g[x],f&&f[x],c)}var nI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $R(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),C=null;if(0<=g){var x=c[f].substring(0,g);C=c[f].substring(g+1)}else x=c[f];d(x,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function xi(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof xi){this.h=c.h,Qc(this,c.j),this.o=c.o,this.g=c.g,Yc(this,c.s),this.l=c.l;var d=c.i,f=new Ua;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),rI(this,f),this.m=c.m}else c&&(d=String(c).match(nI))?(this.h=!1,Qc(this,d[1]||"",!0),this.o=ja(d[2]||""),this.g=ja(d[3]||"",!0),Yc(this,d[4]),this.l=ja(d[5]||"",!0),rI(this,d[6]||"",!0),this.m=ja(d[7]||"")):(this.h=!1,this.i=new Ua(null,this.h))}xi.prototype.toString=function(){var c=[],d=this.j;d&&c.push(Ba(d,iI,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Ba(d,iI,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(Ba(f,f.charAt(0)=="/"?zR:qR,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",Ba(f,WR)),c.join("")};function lr(c){return new xi(c)}function Qc(c,d,f){c.j=f?ja(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function Yc(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function rI(c,d,f){d instanceof Ua?(c.i=d,KR(c.i,c.h)):(f||(d=Ba(d,GR)),c.i=new Ua(d,c.h))}function Le(c,d,f){c.i.set(d,f)}function Zc(c){return Le(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function ja(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Ba(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,HR),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function HR(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var iI=/[#\/\?@]/g,qR=/[#\?:]/g,zR=/[#\?]/g,GR=/[#\?@]/g,WR=/#/g;function Ua(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function jr(c){c.g||(c.g=new Map,c.h=0,c.i&&$R(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=Ua.prototype,n.add=function(c,d){jr(this),this.i=null,c=Lo(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function oI(c,d){jr(c),d=Lo(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function sI(c,d){return jr(c),d=Lo(c,d),c.g.has(d)}n.forEach=function(c,d){jr(this),this.g.forEach(function(f,g){f.forEach(function(C){c.call(d,C,g,this)},this)},this)},n.na=function(){jr(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let C=c[g];for(let x=0;x<C.length;x++)f.push(d[g])}return f},n.V=function(c){jr(this);let d=[];if(typeof c=="string")sI(this,c)&&(d=d.concat(this.g.get(Lo(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},n.set=function(c,d){return jr(this),this.i=null,c=Lo(this,c),sI(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function aI(c,d,f){oI(c,d),0<f.length&&(c.i=null,c.g.set(Lo(c,d),A(f)),c.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let x=encodeURIComponent(String(g)),j=this.V(g);for(g=0;g<j.length;g++){var C=x;j[g]!==""&&(C+="="+encodeURIComponent(String(j[g]))),c.push(C)}}return this.i=c.join("&")};function Lo(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function KR(c,d){d&&!c.j&&(jr(c),c.i=null,c.g.forEach(function(f,g){var C=g.toLowerCase();g!=C&&(oI(this,g),aI(this,C,f))},c)),c.j=d}function QR(c,d){let f=new Va;if(a.Image){let g=new Image;g.onload=y(Br,f,"TestLoadImage: loaded",!0,d,g),g.onerror=y(Br,f,"TestLoadImage: error",!1,d,g),g.onabort=y(Br,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=y(Br,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function YR(c,d){let f=new Va,g=new AbortController,C=setTimeout(()=>{g.abort(),Br(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(x=>{clearTimeout(C),x.ok?Br(f,"TestPingServer: ok",!0,d):Br(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(C),Br(f,"TestPingServer: error",!1,d)})}function Br(c,d,f,g,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),g(f)}catch{}}function ZR(){this.g=new PR}function JR(c,d,f){let g=f||"";try{tI(c,function(C,x){let j=C;l(C)&&(j=Ep(C)),d.push(g+x+"="+encodeURIComponent(j))})}catch(C){throw d.push(g+"type="+encodeURIComponent("_badmap")),C}}function $a(c){this.l=c.Ub||null,this.j=c.eb||!1}b($a,Ip),$a.prototype.g=function(){return new Jc(this.l,this.j)},$a.prototype.i=function(c){return function(){return c}}({});function Jc(c,d){It.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(Jc,It),n=Jc.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,qa(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ha(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,qa(this)),this.g&&(this.readyState=3,qa(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;uI(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function uI(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?Ha(this):qa(this),this.readyState==3&&uI(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,Ha(this))},n.Qa=function(c){this.g&&(this.response=c,Ha(this))},n.ga=function(){this.g&&Ha(this)};function Ha(c){c.readyState=4,c.l=null,c.j=null,c.v=null,qa(c)}n.setRequestHeader=function(c,d){this.u.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function qa(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Jc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function cI(c){let d="";return X(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function Np(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=cI(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Le(c,d,f))}function We(c){It.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(We,It);var XR=/^https?$/i,eN=["POST","PUT"];n=We.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():bp.g(),this.v=this.o?LE(this.o):LE(bp),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(x){lI(this,x);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var C in g)f.set(C,g[C]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let x of g.keys())f.set(x,g.get(x));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(x=>x.toLowerCase()=="content-type"),C=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(eN,d,void 0))||g||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[x,j]of f)this.g.setRequestHeader(x,j);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{fI(this),this.u=!0,this.g.send(c),this.u=!1}catch(x){lI(this,x)}};function lI(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,dI(c),Xc(c)}function dI(c){c.A||(c.A=!0,At(c,"complete"),At(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,At(this,"complete"),At(this,"abort"),Xc(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Xc(this,!0)),We.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?hI(this):this.bb())},n.bb=function(){hI(this)};function hI(c){if(c.h&&typeof s<"u"&&(!c.v[1]||dr(c)!=4||c.Z()!=2)){if(c.u&&dr(c)==4)kE(c.Ea,0,c);else if(At(c,"readystatechange"),dr(c)==4){c.h=!1;try{let j=c.Z();e:switch(j){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=j===0){var C=String(c.D).match(nI)[1]||null;!C&&a.self&&a.self.location&&(C=a.self.location.protocol.slice(0,-1)),g=!XR.test(C?C.toLowerCase():"")}f=g}if(f)At(c,"complete"),At(c,"success");else{c.m=6;try{var x=2<dr(c)?c.g.statusText:""}catch{x=""}c.l=x+" ["+c.Z()+"]",dI(c)}}finally{Xc(c)}}}}function Xc(c,d){if(c.g){fI(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||At(c,"ready");try{f.onreadystatechange=g}catch{}}}function fI(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function dr(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<dr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),NR(d)}};function pI(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function tN(c){let d={};c=(c.g&&2<=dr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(G(c[g]))continue;var f=D(c[g]);let C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let x=d[C]||[];d[C]=x,x.push(f)}E(d,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function za(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function gI(c){this.Aa=0,this.i=[],this.j=new Va,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=za("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=za("baseRetryDelayMs",5e3,c),this.cb=za("retryDelaySeedMs",1e4,c),this.Wa=za("forwardChannelMaxRetries",2,c),this.wa=za("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new YE(c&&c.concurrentRequestLimit),this.Da=new ZR,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=gI.prototype,n.la=8,n.G=1,n.connect=function(c,d,f,g){Mt(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=CI(this,null,this.W),tl(this)};function Pp(c){if(mI(c),c.G==3){var d=c.U++,f=lr(c.I);if(Le(f,"SID",c.K),Le(f,"RID",d),Le(f,"TYPE","terminate"),Ga(c,f),d=new Lr(c,c.j,d),d.L=2,d.v=Zc(lr(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=bI(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Kc(d)}DI(c)}function el(c){c.g&&(Op(c),c.g.cancel(),c.g=null)}function mI(c){el(c),c.u&&(a.clearTimeout(c.u),c.u=null),nl(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function tl(c){if(!ZE(c.h)&&!c.s){c.s=!0;var d=c.Ga;Ma||AE(),xa||(Ma(),xa=!0),hp.add(d,c),c.B=0}}function nN(c,d){return JE(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Fa(m(c.Ga,c,d),II(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let C=new Lr(this,this.j,c),x=this.o;if(this.S&&(x?(x=v(x),I(x,this.S)):x=this.S),this.m!==null||this.O||(C.H=x,x=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=vI(this,C,d),f=lr(this.I),Le(f,"RID",c),Le(f,"CVER",22),this.D&&Le(f,"X-HTTP-Session-Id",this.D),Ga(this,f),x&&(this.O?d="headers="+encodeURIComponent(String(cI(x)))+"&"+d:this.m&&Np(f,this.m,x)),Rp(this.h,C),this.Ua&&Le(f,"TYPE","init"),this.P?(Le(f,"$req",d),Le(f,"SID","null"),C.T=!0,Sp(C,f,null)):Sp(C,f,d),this.G=2}}else this.G==3&&(c?yI(this,c):this.i.length==0||ZE(this.h)||yI(this))};function yI(c,d){var f;d?f=d.l:f=c.U++;let g=lr(c.I);Le(g,"SID",c.K),Le(g,"RID",f),Le(g,"AID",c.T),Ga(c,g),c.m&&c.o&&Np(g,c.m,c.o),f=new Lr(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=vI(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Rp(c.h,f),Sp(f,g,d)}function Ga(c,d){c.H&&X(c.H,function(f,g){Le(d,g,f)}),c.l&&tI({},function(f,g){Le(d,g,f)})}function vI(c,d,f){f=Math.min(c.i.length,f);var g=c.l?m(c.l.Na,c.l,c):null;e:{var C=c.i;let x=-1;for(;;){let j=["count="+f];x==-1?0<f?(x=C[0].g,j.push("ofs="+x)):x=0:j.push("ofs="+x);let Re=!0;for(let mt=0;mt<f;mt++){let be=C[mt].g,Dt=C[mt].map;if(be-=x,0>be)x=Math.max(0,C[mt].g-100),Re=!1;else try{JR(Dt,j,"req"+be+"_")}catch{g&&g(Dt)}}if(Re){g=j.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function _I(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;Ma||AE(),xa||(Ma(),xa=!0),hp.add(d,c),c.v=0}}function kp(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Fa(m(c.Fa,c),II(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,wI(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Fa(m(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Mt(10),el(this),wI(this))};function Op(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function wI(c){c.g=new Lr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=lr(c.qa);Le(d,"RID","rpc"),Le(d,"SID",c.K),Le(d,"AID",c.T),Le(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Le(d,"TO",c.ja),Le(d,"TYPE","xmlhttp"),Ga(c,d),c.m&&c.o&&Np(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=Zc(lr(d)),f.m=null,f.P=!0,WE(f,c)}n.Za=function(){this.C!=null&&(this.C=null,el(this),kp(this),Mt(19))};function nl(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function EI(c,d){var f=null;if(c.g==d){nl(c),Op(c),c.g=null;var g=2}else if(xp(c.h,d))f=d.D,XE(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var C=c.B;g=zc(),At(g,new HE(g,f)),tl(c)}else _I(c);else if(C=d.s,C==3||C==0&&0<d.X||!(g==1&&nN(c,d)||g==2&&kp(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),C){case 1:Ri(c,5);break;case 4:Ri(c,10);break;case 3:Ri(c,6);break;default:Ri(c,2)}}}function II(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function Ri(c,d){if(c.j.info("Error code "+d),d==2){var f=m(c.fb,c),g=c.Xa;let C=!g;g=new xi(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Qc(g,"https"),Zc(g),C?QR(g.toString(),f):YR(g.toString(),f)}else Mt(2);c.G=0,c.l&&c.l.sa(d),DI(c),mI(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Mt(2)):(this.j.info("Failed to ping google.com"),Mt(1))};function DI(c){if(c.G=0,c.ka=[],c.l){let d=eI(c.h);(d.length!=0||c.i.length!=0)&&(M(c.ka,d),M(c.ka,c.i),c.h.i.length=0,A(c.i),c.i.length=0),c.l.ra()}}function CI(c,d,f){var g=f instanceof xi?lr(f):new xi(f);if(g.g!="")d&&(g.g=d+"."+g.g),Yc(g,g.s);else{var C=a.location;g=C.protocol,d=d?d+"."+C.hostname:C.hostname,C=+C.port;var x=new xi(null);g&&Qc(x,g),d&&(x.g=d),C&&Yc(x,C),f&&(x.l=f),g=x}return f=c.D,d=c.ya,f&&d&&Le(g,f,d),Le(g,"VER",c.la),Ga(c,g),g}function bI(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new We(new $a({eb:f})):new We(c.pa),d.Ha(c.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function TI(){}n=TI.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function rl(){}rl.prototype.g=function(c,d){return new an(c,d)};function an(c,d){It.call(this),this.g=new gI(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!G(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!G(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new jo(this)}b(an,It),an.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},an.prototype.close=function(){Pp(this.g)},an.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=Ep(c),c=f);d.i.push(new jR(d.Ya++,c)),d.G==3&&tl(d)},an.prototype.N=function(){this.g.l=null,delete this.j,Pp(this.g),delete this.g,an.aa.N.call(this)};function SI(c){Dp.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}b(SI,Dp);function AI(){Cp.call(this),this.status=1}b(AI,Cp);function jo(c){this.g=c}b(jo,TI),jo.prototype.ua=function(){At(this.g,"a")},jo.prototype.ta=function(c){At(this.g,new SI(c))},jo.prototype.sa=function(c){At(this.g,new AI)},jo.prototype.ra=function(){At(this.g,"b")},rl.prototype.createWebChannel=rl.prototype.g,an.prototype.send=an.prototype.o,an.prototype.open=an.prototype.m,an.prototype.close=an.prototype.close,Tv=Sr.createWebChannelTransport=function(){return new rl},bv=Sr.getStatEventTarget=function(){return zc()},Cv=Sr.Event=Ai,Fh=Sr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Gc.NO_ERROR=0,Gc.TIMEOUT=8,Gc.HTTP_ERROR=6,tc=Sr.ErrorCode=Gc,qE.COMPLETE="complete",Dv=Sr.EventType=qE,jE.EventType=ka,ka.OPEN="a",ka.CLOSE="b",ka.ERROR="c",ka.MESSAGE="d",It.prototype.listen=It.prototype.K,Us=Sr.WebChannel=jE,Fj=Sr.FetchXmlHttpFactory=$a,We.prototype.listenOnce=We.prototype.L,We.prototype.getLastError=We.prototype.Ka,We.prototype.getLastErrorCode=We.prototype.Ba,We.prototype.getStatus=We.prototype.Z,We.prototype.getResponseJson=We.prototype.Oa,We.prototype.getResponseText=We.prototype.oa,We.prototype.send=We.prototype.ea,We.prototype.setWithCredentials=We.prototype.Ha,Iv=Sr.XhrIo=We}).apply(typeof Oh<"u"?Oh:typeof self<"u"?self:typeof window<"u"?window:{});var AS="@firebase/firestore";var st=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};st.UNAUTHENTICATED=new st(null),st.GOOGLE_CREDENTIALS=new st("google-credentials-uid"),st.FIRST_PARTY=new st("first-party-uid"),st.MOCK_USER=new st("mock-user");var va="10.14.0";var gi=new al("@firebase/firestore");function Gs(){return gi.logLevel}function RA(n){gi.setLogLevel(n)}function O(n,...e){if(gi.logLevel<=Un.DEBUG){let t=e.map(Rw);gi.debug(`Firestore (${va}): ${n}`,...t)}}function Ze(n,...e){if(gi.logLevel<=Un.ERROR){let t=e.map(Rw);gi.error(`Firestore (${va}): ${n}`,...t)}}function Fn(n,...e){if(gi.logLevel<=Un.WARN){let t=e.map(Rw);gi.warn(`Firestore (${va}): ${n}`,...t)}}function Rw(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function K(n="Unexpected state"){let e=`FIRESTORE (${va}) INTERNAL ASSERTION FAILED: `+n;throw Ze(e),new Error(e)}function Y(n,e){n||K()}function NA(n,e){n||K()}function U(n,e){return n}var R={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},k=class extends kI{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var lt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Gh=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Nv=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(st.UNAUTHENTICATED))}shutdown(){}},Pv=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},kv=class{constructor(e){this.t=e,this.currentUser=st.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Y(this.o===void 0);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new lt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new lt,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>N(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{O("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(O("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new lt)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(O("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Y(typeof r.accessToken=="string"),new Gh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Y(e===null||typeof e=="string"),new st(e)}},Ov=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=st.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Fv=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Ov(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(st.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Vv=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Lv=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Y(this.o===void 0);let r=o=>{o.error!=null&&O("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,O("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{O("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):O("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Y(typeof t.token=="string"),this.R=t.token,new Vv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Vj(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Wh=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=Vj(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function ae(n,e){return n<e?-1:n>e?1:0}function ta(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function PA(n){return n+"\0"}var ze=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new k(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new k(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new k(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new k(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ae(this.nanoseconds,e.nanoseconds):ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ee=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new ze(0,0))}static max(){return new n(new ze(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Kh=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&K(),r===void 0?r=e.length-t:r>e.length-t&&K(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},Ee=class n extends Kh{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new k(R.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},Lj=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Je=class n extends Kh{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return Lj.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new k(R.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new k(R.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new k(R.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new k(R.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var $=class n{constructor(e){this.path=e}static fromPath(e){return new n(Ee.fromString(e))}static fromName(e){return new n(Ee.fromString(e).popFirst(5))}static empty(){return new n(Ee.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ee.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ee.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Ee(e.slice()))}};var na=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function jv(n){return n.fields.find(e=>e.kind===2)}function lo(n){return n.fields.filter(e=>e.kind!==2)}na.UNKNOWN_ID=-1;var Js=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var fc=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,Cn.min())}};function kA(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ee.fromTimestamp(r===1e9?new ze(t+1,0):new ze(t,r));return new Cn(i,$.empty(),e)}function OA(n){return new Cn(n.readTime,n.key,-1)}var Cn=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(ee.min(),$.empty(),-1)}static max(){return new n(ee.max(),$.empty(),-1)}};function Nw(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=$.comparator(n.documentKey,e.documentKey),t!==0?t:ae(n.largestBatchId,e.largestBatchId))}var FA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Qh=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function bi(n){return N(this,null,function*(){if(n.code!==R.FAILED_PRECONDITION||n.message!==FA)throw n;O("LocalStore","Unexpectedly lost primary lease")})}var S=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&K(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};var Yh=class n{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new lt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new yo(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=Pw(r.target.error);this.V.reject(new yo(e,i))}}static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(o){throw new yo(t,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(O("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new Uv(t)}},mi=class n{constructor(e,t,r){this.name=e,this.version=t,this.p=r,n.S(Wa())===12.2&&Ze("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return O("SimpleDb","Removing database:",e),ho(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!sl())return!1;if(n.v())return!0;let e=Wa(),t=n.S(e),r=0<t&&t<10,i=VA(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return N(this,null,function*(){return this.db||(O("SimpleDb","Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;t(s)},i.onblocked=()=>{r(new yo(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new k(R.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new k(R.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new yo(e,s))},i.onupgradeneeded=o=>{O("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,i.transaction,o.oldVersion,this.version).next(()=>{O("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return N(this,null,function*(){let o=t==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(e);let a=Yh.open(this.db,e,o?"readonly":"readwrite",r),u=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),S.reject(l))).toPromise();return u.catch(()=>{}),yield a.m,u}catch(a){let u=a,l=u.name!=="FirebaseError"&&s<3;if(O("SimpleDb","Transaction failed with error:",u.message,"Retrying:",l),this.close(),!l)return Promise.reject(u)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function VA(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var Bv=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return ho(this.B.delete())}},yo=class extends k{constructor(e,t){super(R.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function Ti(n){return n.name==="IndexedDbTransactionError"}var Uv=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(O("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(O("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ho(r)}add(e){return O("SimpleDb","ADD",this.store.name,e,e),ho(this.store.add(e))}get(e){return ho(this.store.get(e)).next(t=>(t===void 0&&(t=null),O("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return O("SimpleDb","DELETE",this.store.name,e),ho(this.store.delete(e))}count(){return O("SimpleDb","COUNT",this.store.name),ho(this.store.count())}U(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new S((s,a)=>{o.onerror=u=>{a(u.target.error)},o.onsuccess=u=>{s(u.target.result)}})}{let o=this.cursor(r),s=[];return this.W(o,(a,u)=>{s.push(u)}).next(()=>s)}}G(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new S((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}j(e,t){O("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,t);r.H=!1;let i=this.cursor(r);return this.W(i,(o,s,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.W(i,t)}Y(e){let t=this.cursor({});return new S((r,i)=>{t.onerror=o=>{let s=Pw(o.target.error);i(s)},t.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}W(e,t){let r=[];return new S((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let u=new Bv(a),l=t(a.primaryKey,a.value,u);if(l instanceof S){let h=l.catch(p=>(u.done(),S.reject(p)));r.push(h)}u.isDone?i():u.K===null?a.continue():a.continue(u.K)}}).next(()=>S.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function ho(n){return new S((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=Pw(r.target.error);t(i)}})}var MS=!1;function Pw(n){let e=mi.S(Wa());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new k("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return MS||(MS=!0,setTimeout(()=>{throw r},0)),r}}return n}var $v=class{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){O("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>N(this,null,function*(){this.task=null;try{O("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(t){Ti(t)?O("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):yield bi(t)}yield this.X(6e4)}))}},Hv=class{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){return N(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))})}te(e,t){let r=new Set,i=t,o=!0;return S.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return O("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(i,o)).next(a=>(O("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}re(e,t){let r=e;return t.changes.forEach((i,o)=>{let s=OA(o);Nw(s,r)>0&&(r=s)}),new Cn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var fn=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function kc(n){return n==null}function pc(n){return n===0&&1/n==-1/0}function LA(n){return typeof n=="number"&&Number.isInteger(n)&&!pc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Bt(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=xS(e)),e=jj(n.get(t),e);return xS(e)}function jj(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case"":t+="";break;default:t+=o}}return t}function xS(n){return n+""}function Xn(n){let e=n.length;if(Y(e>=2),e===2)return Y(n.charAt(0)===""&&n.charAt(1)===""),Ee.emptyPath();let t=e-2,r=[],i="";for(let o=0;o<e;){let s=n.indexOf("",o);switch((s<0||s>t)&&K(),n.charAt(s+1)){case"":let a=n.substring(o,s),u;i.length===0?u=a:(i+=a,u=i,i=""),r.push(u);break;case"":i+=n.substring(o,s),i+="\0";break;case"":i+=n.substring(o,s+1);break;default:K()}o=s+2}return new Ee(r)}var RS=["userId","batchId"];function Uh(n,e){return[n,Bt(e)]}function jA(n,e,t){return[n,Bt(e),t]}var Bj={},Uj=["prefixPath","collectionGroup","readTime","documentId"],$j=["prefixPath","collectionGroup","documentId"],Hj=["collectionGroup","readTime","prefixPath","documentId"],qj=["canonicalId","targetId"],zj=["targetId","path"],Gj=["path","targetId"],Wj=["collectionId","parent"],Kj=["indexId","uid"],Qj=["uid","sequenceNumber"],Yj=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Zj=["indexId","uid","orderedDocumentKey"],Jj=["userId","collectionPath","documentId"],Xj=["userId","collectionPath","largestBatchId"],eB=["userId","collectionGroup","largestBatchId"],BA=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],tB=[...BA,"documentOverlays"],UA=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],$A=UA,kw=[...$A,"indexConfiguration","indexState","indexEntries"],nB=kw,rB=[...kw,"globals"];var gc=class extends Qh{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}};function dt(n,e){let t=U(n);return mi.F(t._e,e)}function NS(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Mo(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function HA(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ue=class n{constructor(e,t){this.comparator=e,this.root=t||tr.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,tr.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,tr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Zs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Zs(this.root,e,this.comparator,!1)}getReverseIterator(){return new Zs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Zs(this.root,e,this.comparator,!0)}},Zs=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},tr=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw K();let e=this.left.check();if(e!==this.right.check())throw K();return e+(this.isRed()?0:1)}};tr.EMPTY=null,tr.RED=!0,tr.BLACK=!1;tr.EMPTY=new class{constructor(){this.size=0}get key(){throw K()}get value(){throw K()}get color(){throw K()}get left(){throw K()}get right(){throw K()}copy(e,t,r,i,o){return this}insert(e,t,r){return new tr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Fe=class n{constructor(e){this.comparator=e,this.data=new Ue(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Zh(this.data.getIterator())}getIteratorFrom(e){return new Zh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Zh=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function $s(n){return n.hasNext()?n.getNext():void 0}var pn=class n{constructor(e){this.fields=e,e.sort(Je.comparator)}static empty(){return new n([])}unionWith(e){let t=new Fe(Je.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ta(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Jh=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function qA(){return typeof atob<"u"}var et=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Jh("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};et.EMPTY_BYTE_STRING=new et("");var iB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xr(n){if(Y(!!n),typeof n=="string"){let e=0,t=iB.exec(n);if(Y(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:He(n.seconds),nanos:He(n.nanos)}}function He(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function yi(n){return typeof n=="string"?et.fromBase64String(n):et.fromUint8Array(n)}function qf(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Ow(n){let e=n.mapValue.fields.__previous_value__;return qf(e)?Ow(e):e}function mc(n){let e=xr(n.mapValue.fields.__local_write_time__.timestampValue);return new ze(e.seconds,e.nanos)}var qv=class{constructor(e,t,r,i,o,s,a,u,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},vi=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var fi={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},$h={nullValue:"NULL_VALUE"};function vo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?qf(n)?4:zA(n)?9007199254740991:zf(n)?10:11:K()}function ir(n,e){if(n===e)return!0;let t=vo(n);if(t!==vo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return mc(n).isEqual(mc(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=xr(i.timestampValue),a=xr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return yi(i.bytesValue).isEqual(yi(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return He(i.geoPointValue.latitude)===He(o.geoPointValue.latitude)&&He(i.geoPointValue.longitude)===He(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return He(i.integerValue)===He(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=He(i.doubleValue),a=He(o.doubleValue);return s===a?pc(s)===pc(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return ta(n.arrayValue.values||[],e.arrayValue.values||[],ir);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(NS(s)!==NS(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!ir(s[u],a[u])))return!1;return!0}(n,e);default:return K()}}function yc(n,e){return(n.values||[]).find(t=>ir(t,e))!==void 0}function _i(n,e){if(n===e)return 0;let t=vo(n),r=vo(e);if(t!==r)return ae(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ae(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=He(o.integerValue||o.doubleValue),u=He(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return PS(n.timestampValue,e.timestampValue);case 4:return PS(mc(n),mc(e));case 5:return ae(n.stringValue,e.stringValue);case 6:return function(o,s){let a=yi(o),u=yi(s);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=ae(a[l],u[l]);if(h!==0)return h}return ae(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=ae(He(o.latitude),He(s.latitude));return a!==0?a:ae(He(o.longitude),He(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return kS(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,l,h;let p=o.fields||{},m=s.fields||{},y=(a=p.value)===null||a===void 0?void 0:a.arrayValue,b=(u=m.value)===null||u===void 0?void 0:u.arrayValue,A=ae(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=b?.values)===null||h===void 0?void 0:h.length)||0);return A!==0?A:kS(y,b)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===fi.mapValue&&s===fi.mapValue)return 0;if(o===fi.mapValue)return 1;if(s===fi.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=ae(u[p],h[p]);if(m!==0)return m;let y=_i(a[u[p]],l[h[p]]);if(y!==0)return y}return ae(u.length,h.length)}(n.mapValue,e.mapValue);default:throw K()}}function PS(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ae(n,e);let t=xr(n),r=xr(e),i=ae(t.seconds,r.seconds);return i!==0?i:ae(t.nanos,r.nanos)}function kS(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=_i(t[i],r[i]);if(o)return o}return ae(t.length,r.length)}function ra(n){return zv(n)}function zv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=xr(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return yi(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return $.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=zv(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${zv(t.fields[s])}`;return i+"}"}(n.mapValue):K()}function _o(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Gv(n){return!!n&&"integerValue"in n}function vc(n){return!!n&&"arrayValue"in n}function OS(n){return!!n&&"nullValue"in n}function FS(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Hh(n){return!!n&&"mapValue"in n}function zf(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function uc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Mo(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=uc(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=uc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function zA(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var GA={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function oB(n){return"nullValue"in n?$h:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?_o(vi.empty(),$.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?zf(n)?GA:{mapValue:{}}:K()}function sB(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?_o(vi.empty(),$.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?GA:"mapValue"in n?zf(n)?{mapValue:{}}:fi:K()}function VS(n,e){let t=_i(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function LS(n,e){let t=_i(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var St=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Hh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=uc(t)}setAll(e){let t=Je.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=uc(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Hh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ir(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Hh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Mo(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(uc(this.value))}};function WA(n){let e=[];return Mo(n.fields,(t,r)=>{let i=new Je([t]);if(Hh(r)){let o=WA(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new pn(e)}var at=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,ee.min(),ee.min(),ee.min(),St.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,ee.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,ee.min(),ee.min(),St.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ee.min(),ee.min(),St.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=St.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=St.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var or=class{constructor(e,t){this.position=e,this.inclusive=t}};function jS(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=$.comparator($.fromName(s.referenceValue),t.key):r=_i(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function BS(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ir(n.position[t],e.position[t]))return!1;return!0}var wo=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function aB(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Xh=class{},ve=class n extends Xh{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Qv(e,t,r):t==="array-contains"?new Jv(e,r):t==="in"?new ef(e,r):t==="not-in"?new Xv(e,r):t==="array-contains-any"?new e_(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Yv(e,r):new Zv(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(_i(t,this.value)):t!==null&&vo(this.value)===vo(t)&&this.matchesComparison(_i(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return K()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Ae=class n extends Xh{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return ia(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function ia(n){return n.op==="and"}function Wv(n){return n.op==="or"}function Fw(n){return KA(n)&&ia(n)}function KA(n){for(let e of n.filters)if(e instanceof Ae)return!1;return!0}function Kv(n){if(n instanceof ve)return n.field.canonicalString()+n.op.toString()+ra(n.value);if(Fw(n))return n.filters.map(e=>Kv(e)).join(",");{let e=n.filters.map(t=>Kv(t)).join(",");return`${n.op}(${e})`}}function QA(n,e){return n instanceof ve?function(r,i){return i instanceof ve&&r.op===i.op&&r.field.isEqual(i.field)&&ir(r.value,i.value)}(n,e):n instanceof Ae?function(r,i){return i instanceof Ae&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&QA(s,i.filters[a]),!0):!1}(n,e):void K()}function YA(n,e){let t=n.filters.concat(e);return Ae.create(t,n.op)}function ZA(n){return n instanceof ve?function(t){return`${t.field.canonicalString()} ${t.op} ${ra(t.value)}`}(n):n instanceof Ae?function(t){return t.op.toString()+" {"+t.getFilters().map(ZA).join(" ,")+"}"}(n):"Filter"}var Qv=class extends ve{constructor(e,t,r){super(e,t,r),this.key=$.fromName(r.referenceValue)}matches(e){let t=$.comparator(e.key,this.key);return this.matchesComparison(t)}},Yv=class extends ve{constructor(e,t){super(e,"in",t),this.keys=JA("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Zv=class extends ve{constructor(e,t){super(e,"not-in",t),this.keys=JA("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function JA(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>$.fromName(r.referenceValue))}var Jv=class extends ve{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return vc(t)&&yc(t.arrayValue,this.value)}},ef=class extends ve{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&yc(this.value.arrayValue,t)}},Xv=class extends ve{constructor(e,t){super(e,"not-in",t)}matches(e){if(yc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!yc(this.value.arrayValue,t)}},e_=class extends ve{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!vc(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>yc(this.value.arrayValue,r))}};var t_=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function n_(n,e=null,t=[],r=[],i=null,o=null,s=null){return new t_(n,e,t,r,i,o,s)}function Eo(n){let e=U(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Kv(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),kc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ra(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ra(r)).join(",")),e.ue=t}return e.ue}function Oc(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!aB(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!QA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!BS(n.startAt,e.startAt)&&BS(n.endAt,e.endAt)}function tf(n){return $.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function nf(n,e){return n.filters.filter(t=>t instanceof ve&&t.field.isEqual(e))}function US(n,e,t){let r=$h,i=!0;for(let o of nf(n,e)){let s=$h,a=!0;switch(o.op){case"<":case"<=":s=oB(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=$h}VS({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];VS({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}function $S(n,e,t){let r=fi,i=!0;for(let o of nf(n,e)){let s=fi,a=!0;switch(o.op){case">=":case">":s=sB(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=fi}LS({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];LS({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}var Vn=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function XA(n,e,t,r,i,o,s,a){return new Vn(n,e,t,r,i,o,s,a)}function _a(n){return new Vn(n)}function HS(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Vw(n){return n.collectionGroup!==null}function Xs(n){let e=U(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Fe(Je.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new wo(o,r))}),t.has(Je.keyField().canonicalString())||e.ce.push(new wo(Je.keyField(),r))}return e.ce}function Ut(n){let e=U(n);return e.le||(e.le=uB(e,Xs(n))),e.le}function uB(n,e){if(n.limitType==="F")return n_(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new wo(i.field,o)});let t=n.endAt?new or(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new or(n.startAt.position,n.startAt.inclusive):null;return n_(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function r_(n,e){let t=n.filters.concat([e]);return new Vn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function rf(n,e,t){return new Vn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Fc(n,e){return Oc(Ut(n),Ut(e))&&n.limitType===e.limitType}function eM(n){return`${Eo(Ut(n))}|lt:${n.limitType}`}function Ws(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>ZA(i)).join(", ")}]`),kc(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>ra(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>ra(i)).join(",")),`Target(${r})`}(Ut(n))}; limitType=${n.limitType})`}function Vc(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):$.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of Xs(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let l=jS(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,Xs(r),i)||r.endAt&&!function(s,a,u){let l=jS(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,Xs(r),i))}(n,e)}function tM(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function nM(n){return(e,t)=>{let r=!1;for(let i of Xs(n)){let o=cB(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function cB(n,e,t){let r=n.field.isKeyField()?$.comparator(e.key,t.key):function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?_i(u,l):K()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return K()}}var sr=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Mo(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return HA(this.inner)}size(){return this.innerSize}};var lB=new Ue($.comparator);function on(){return lB}var rM=new Ue($.comparator);function sc(...n){let e=rM;for(let t of n)e=e.insert(t.key,t);return e}function iM(n){let e=rM;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function er(){return cc()}function oM(){return cc()}function cc(){return new sr(n=>n.toString(),(n,e)=>n.isEqual(e))}var dB=new Ue($.comparator),hB=new Fe($.comparator);function ue(...n){let e=hB;for(let t of n)e=e.add(t);return e}var fB=new Fe(ae);function Lw(){return fB}function jw(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pc(e)?"-0":e}}function sM(n){return{integerValue:""+n}}function aM(n,e){return LA(e)?sM(e):jw(n,e)}var oa=class{constructor(){this._=void 0}};function pB(n,e,t){return n instanceof wi?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&qf(o)&&(o=Ow(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof Rr?cM(n,e):n instanceof Nr?lM(n,e):function(i,o){let s=uM(i,o),a=qS(s)+qS(i.Pe);return Gv(s)&&Gv(i.Pe)?sM(a):jw(i.serializer,a)}(n,e)}function gB(n,e,t){return n instanceof Rr?cM(n,e):n instanceof Nr?lM(n,e):t}function uM(n,e){return n instanceof Ei?function(r){return Gv(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var wi=class extends oa{},Rr=class extends oa{constructor(e){super(),this.elements=e}};function cM(n,e){let t=dM(e);for(let r of n.elements)t.some(i=>ir(i,r))||t.push(r);return{arrayValue:{values:t}}}var Nr=class extends oa{constructor(e){super(),this.elements=e}};function lM(n,e){let t=dM(e);for(let r of n.elements)t=t.filter(i=>!ir(i,r));return{arrayValue:{values:t}}}var Ei=class extends oa{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function qS(n){return He(n.integerValue||n.doubleValue)}function dM(n){return vc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var Io=class{constructor(e,t){this.field=e,this.transform=t}};function mB(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Rr&&i instanceof Rr||r instanceof Nr&&i instanceof Nr?ta(r.elements,i.elements,ir):r instanceof Ei&&i instanceof Ei?ir(r.Pe,i.Pe):r instanceof wi&&i instanceof wi}(n.transform,e.transform)}var i_=class{constructor(e,t){this.version=e,this.transformResults=t}},Ye=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function qh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var sa=class{};function hM(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Di(n.key,Ye.none()):new Ii(n.key,n.data,Ye.none());{let t=n.data,r=St.empty(),i=new Fe(Je.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Ln(n.key,r,new pn(i.toArray()),Ye.none())}}function yB(n,e,t){n instanceof Ii?function(i,o,s){let a=i.value.clone(),u=GS(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Ln?function(i,o,s){if(!qh(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=GS(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(fM(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function lc(n,e,t,r){return n instanceof Ii?function(o,s,a,u){if(!qh(o.precondition,s))return a;let l=o.value.clone(),h=WS(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof Ln?function(o,s,a,u){if(!qh(o.precondition,s))return a;let l=WS(o.fieldTransforms,u,s),h=s.data;return h.setAll(fM(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(o,s,a){return qh(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function vB(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=uM(r.transform,i||null);o!=null&&(t===null&&(t=St.empty()),t.set(r.field,o))}return t||null}function zS(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ta(r,i,(o,s)=>mB(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Ii=class extends sa{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Ln=class extends sa{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function fM(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function GS(n,e,t){let r=new Map;Y(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,gB(s,a,t[i]))}return r}function WS(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,pB(o,s,e))}return r}var Di=class extends sa{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},_c=class extends sa{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var wc=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&yB(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=lc(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=lc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=oM();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let u=hM(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(ee.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ue())}isEqual(e){return this.batchId===e.batchId&&ta(this.mutations,e.mutations,(t,r)=>zS(t,r))&&ta(this.baseMutations,e.baseMutations,(t,r)=>zS(t,r))}},o_=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Y(e.mutations.length===r.length);let i=function(){return dB}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var Ec=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var s_=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var it,we;function pM(n){switch(n){default:return K();case R.CANCELLED:case R.UNKNOWN:case R.DEADLINE_EXCEEDED:case R.RESOURCE_EXHAUSTED:case R.INTERNAL:case R.UNAVAILABLE:case R.UNAUTHENTICATED:return!1;case R.INVALID_ARGUMENT:case R.NOT_FOUND:case R.ALREADY_EXISTS:case R.PERMISSION_DENIED:case R.FAILED_PRECONDITION:case R.ABORTED:case R.OUT_OF_RANGE:case R.UNIMPLEMENTED:case R.DATA_LOSS:return!0}}function gM(n){if(n===void 0)return Ze("GRPC error has no .code"),R.UNKNOWN;switch(n){case it.OK:return R.OK;case it.CANCELLED:return R.CANCELLED;case it.UNKNOWN:return R.UNKNOWN;case it.DEADLINE_EXCEEDED:return R.DEADLINE_EXCEEDED;case it.RESOURCE_EXHAUSTED:return R.RESOURCE_EXHAUSTED;case it.INTERNAL:return R.INTERNAL;case it.UNAVAILABLE:return R.UNAVAILABLE;case it.UNAUTHENTICATED:return R.UNAUTHENTICATED;case it.INVALID_ARGUMENT:return R.INVALID_ARGUMENT;case it.NOT_FOUND:return R.NOT_FOUND;case it.ALREADY_EXISTS:return R.ALREADY_EXISTS;case it.PERMISSION_DENIED:return R.PERMISSION_DENIED;case it.FAILED_PRECONDITION:return R.FAILED_PRECONDITION;case it.ABORTED:return R.ABORTED;case it.OUT_OF_RANGE:return R.OUT_OF_RANGE;case it.UNIMPLEMENTED:return R.UNIMPLEMENTED;case it.DATA_LOSS:return R.DATA_LOSS;default:return K()}}(we=it||(it={}))[we.OK=0]="OK",we[we.CANCELLED=1]="CANCELLED",we[we.UNKNOWN=2]="UNKNOWN",we[we.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",we[we.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",we[we.NOT_FOUND=5]="NOT_FOUND",we[we.ALREADY_EXISTS=6]="ALREADY_EXISTS",we[we.PERMISSION_DENIED=7]="PERMISSION_DENIED",we[we.UNAUTHENTICATED=16]="UNAUTHENTICATED",we[we.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",we[we.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",we[we.ABORTED=10]="ABORTED",we[we.OUT_OF_RANGE=11]="OUT_OF_RANGE",we[we.UNIMPLEMENTED=12]="UNIMPLEMENTED",we[we.INTERNAL=13]="INTERNAL",we[we.UNAVAILABLE=14]="UNAVAILABLE",we[we.DATA_LOSS=15]="DATA_LOSS";var KS=null;function mM(){return new TextEncoder}var _B=new ui([4294967295,4294967295],0);function QS(n){let e=mM().encode(n),t=new Ev;return t.update(e),new Uint8Array(t.digest())}function YS(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ui([t,r],0),new ui([i,o],0)]}var a_=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new mo(`Invalid padding: ${t}`);if(r<0)throw new mo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new mo(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new mo(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=ui.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(ui.fromNumber(r)));return i.compare(_B)===1&&(i=new ui([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=QS(e),[r,i]=YS(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let t=QS(e),[r,i]=YS(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},mo=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Ic=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Dc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(ee.min(),i,new Ue(ae),on(),ue())}},Dc=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ue(),ue(),ue())}};var ea=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},of=class{constructor(e,t){this.targetId=e,this.me=t}},sf=class{constructor(e,t,r=et.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},af=class{constructor(){this.fe=0,this.ge=JS(),this.pe=et.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ue(),t=ue(),r=ue();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:K()}}),new Dc(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=JS()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Y(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},u_=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=on(),this.qe=ZS(),this.Qe=new Ue(ae)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:K()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let o=i.target;if(tf(o))if(r===0){let s=new $(o.path);this.Ue(t,s,at.newNoDocument(s,ee.min()))}else Y(r===1);else{let s=this.Ye(t);if(s!==r){let a=this.Ze(e),u=a?this.Xe(a,e,s):1;if(u!==0){this.je(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}KS?.et(function(h,p,m,y,b){var A,M,L,G,V,Z;let ne={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},X=p.unchangedNames;return X&&(ne.bloomFilter={applied:b===0,hashCount:(A=X?.hashCount)!==null&&A!==void 0?A:0,bitmapLength:(G=(L=(M=X?.bits)===null||M===void 0?void 0:M.bitmap)===null||L===void 0?void 0:L.length)!==null&&G!==void 0?G:0,padding:(Z=(V=X?.bits)===null||V===void 0?void 0:V.padding)!==null&&Z!==void 0?Z:0,mightContain:E=>{var v;return(v=y?.mightContain(E))!==null&&v!==void 0&&v}}),ne}(s,e.me,this.Le.tt(),a,u))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=yi(r).toUint8Array()}catch(u){if(u instanceof Jh)return Fn("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new a_(s,i,o)}catch(u){return Fn(u instanceof mo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,o,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&tf(a.target)){let u=new $(a.target.path);this.ke.get(u)!==null||this.it(s,u)||this.Ue(s,u,at.newNoDocument(u,e))}o.be&&(t.set(s,o.ve()),o.Ce())}});let r=ue();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new Ic(e,t,this.Qe,this.ke,r);return this.ke=on(),this.qe=ZS(),this.Qe=new Ue(ae),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new af,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Fe(ae),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||O("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new af),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function ZS(){return new Ue($.comparator)}function JS(){return new Ue($.comparator)}var wB={asc:"ASCENDING",desc:"DESCENDING"},EB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},IB={and:"AND",or:"OR"},c_=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function l_(n,e){return n.useProto3Json||kc(e)?e:{value:e}}function aa(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function yM(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function DB(n,e){return aa(n,e.toTimestamp())}function Xe(n){return Y(!!n),ee.fromTimestamp(function(t){let r=xr(t);return new ze(r.seconds,r.nanos)}(n))}function Bw(n,e){return d_(n,e).canonicalString()}function d_(n,e){let t=function(i){return new Ee(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function vM(n){let e=Ee.fromString(n);return Y(AM(e)),e}function Cc(n,e){return Bw(n.databaseId,e.path)}function nr(n,e){let t=vM(e);if(t.get(1)!==n.databaseId.projectId)throw new k(R.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new k(R.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new $(EM(t))}function _M(n,e){return Bw(n.databaseId,e)}function wM(n){let e=vM(n);return e.length===4?Ee.emptyPath():EM(e)}function h_(n){return new Ee(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function EM(n){return Y(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function XS(n,e,t){return{name:Cc(n,e),fields:t.value.mapValue.fields}}function IM(n,e,t){let r=nr(n,e.name),i=Xe(e.updateTime),o=e.createTime?Xe(e.createTime):ee.min(),s=new St({mapValue:{fields:e.fields}}),a=at.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function CB(n,e){return"found"in e?function(r,i){Y(!!i.found),i.found.name,i.found.updateTime;let o=nr(r,i.found.name),s=Xe(i.found.updateTime),a=i.found.createTime?Xe(i.found.createTime):ee.min(),u=new St({mapValue:{fields:i.found.fields}});return at.newFoundDocument(o,s,a,u)}(n,e):"missing"in e?function(r,i){Y(!!i.missing),Y(!!i.readTime);let o=nr(r,i.missing),s=Xe(i.readTime);return at.newNoDocument(o,s)}(n,e):K()}function bB(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:K()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(Y(h===void 0||typeof h=="string"),et.fromBase64String(h||"")):(Y(h===void 0||h instanceof Buffer||h instanceof Uint8Array),et.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?R.UNKNOWN:gM(l.code);return new k(h,l.message||"")}(s);t=new sf(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=nr(n,r.document.name),o=Xe(r.document.updateTime),s=r.document.createTime?Xe(r.document.createTime):ee.min(),a=new St({mapValue:{fields:r.document.fields}}),u=at.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new ea(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=nr(n,r.document),o=r.readTime?Xe(r.readTime):ee.min(),s=at.newNoDocument(i,o),a=r.removedTargetIds||[];t=new ea([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=nr(n,r.document),o=r.removedTargetIds||[];t=new ea([],o,i,null)}else{if(!("filter"in e))return K();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new s_(i,o),a=r.targetId;t=new of(a,s)}}return t}function bc(n,e){let t;if(e instanceof Ii)t={update:XS(n,e.key,e.value)};else if(e instanceof Di)t={delete:Cc(n,e.key)};else if(e instanceof Ln)t={update:XS(n,e.key,e.data),updateMask:RB(e.fieldMask)};else{if(!(e instanceof _c))return K();t={verify:Cc(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof wi)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Rr)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Nr)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ei)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw K()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:DB(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:K()}(n,e.precondition)),t}function f_(n,e){let t=e.currentDocument?function(o){return o.updateTime!==void 0?Ye.updateTime(Xe(o.updateTime)):o.exists!==void 0?Ye.exists(o.exists):Ye.none()}(e.currentDocument):Ye.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let u=null;if("setToServerValue"in a)Y(a.setToServerValue==="REQUEST_TIME"),u=new wi;else if("appendMissingElements"in a){let h=a.appendMissingElements.values||[];u=new Rr(h)}else if("removeAllFromArray"in a){let h=a.removeAllFromArray.values||[];u=new Nr(h)}else"increment"in a?u=new Ei(s,a.increment):K();let l=Je.fromServerFormat(a.fieldPath);return new Io(l,u)}(n,i)):[];if(e.update){e.update.name;let i=nr(n,e.update.name),o=new St({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(u){let l=u.fieldPaths||[];return new pn(l.map(h=>Je.fromServerFormat(h)))}(e.updateMask);return new Ln(i,o,s,t,r)}return new Ii(i,o,t,r)}if(e.delete){let i=nr(n,e.delete);return new Di(i,t)}if(e.verify){let i=nr(n,e.verify);return new _c(i,t)}return K()}function TB(n,e){return n&&n.length>0?(Y(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?Xe(i.updateTime):Xe(o);return s.isEqual(ee.min())&&(s=Xe(o)),new i_(s,i.transformResults||[])}(t,e))):[]}function DM(n,e){return{documents:[_M(n,e.path)]}}function CM(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=_M(n,i);let o=function(l){if(l.length!==0)return SM(Ae.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:Ks(m.field),direction:AB(m.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=l_(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function bM(n){let e=wM(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Y(r===1);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(p){let m=TM(p);return m instanceof Ae&&Fw(m)?m.getFilters():[m]}(t.where));let s=[];t.orderBy&&(s=function(p){return p.map(m=>function(b){return new wo(Qs(b.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(m))}(t.orderBy));let a=null;t.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,kc(m)?null:m}(t.limit));let u=null;t.startAt&&(u=function(p){let m=!!p.before,y=p.values||[];return new or(y,m)}(t.startAt));let l=null;return t.endAt&&(l=function(p){let m=!p.before,y=p.values||[];return new or(y,m)}(t.endAt)),XA(e,i,s,o,a,"F",u,l)}function SB(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return K()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function TM(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Qs(t.unaryFilter.field);return ve.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Qs(t.unaryFilter.field);return ve.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Qs(t.unaryFilter.field);return ve.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Qs(t.unaryFilter.field);return ve.create(s,"!=",{nullValue:"NULL_VALUE"});default:return K()}}(n):n.fieldFilter!==void 0?function(t){return ve.create(Qs(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return K()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Ae.create(t.compositeFilter.filters.map(r=>TM(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return K()}}(t.compositeFilter.op))}(n):K()}function AB(n){return wB[n]}function MB(n){return EB[n]}function xB(n){return IB[n]}function Ks(n){return{fieldPath:n.canonicalString()}}function Qs(n){return Je.fromServerFormat(n.fieldPath)}function SM(n){return n instanceof ve?function(t){if(t.op==="=="){if(FS(t.value))return{unaryFilter:{field:Ks(t.field),op:"IS_NAN"}};if(OS(t.value))return{unaryFilter:{field:Ks(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(FS(t.value))return{unaryFilter:{field:Ks(t.field),op:"IS_NOT_NAN"}};if(OS(t.value))return{unaryFilter:{field:Ks(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ks(t.field),op:MB(t.op),value:t.value}}}(n):n instanceof Ae?function(t){let r=t.getFilters().map(i=>SM(i));return r.length===1?r[0]:{compositeFilter:{op:xB(t.op),filters:r}}}(n):K()}function RB(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function AM(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var ua=class n{constructor(e,t,r,i,o=ee.min(),s=ee.min(),a=et.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var uf=class{constructor(e){this.ct=e}};function NB(n,e){let t;if(e.document)t=IM(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=$.fromSegments(e.noDocument.path),i=Co(e.noDocument.readTime);t=at.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return K();{let r=$.fromSegments(e.unknownDocument.path),i=Co(e.unknownDocument.version);t=at.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let o=new ze(i[0],i[1]);return ee.fromTimestamp(o)}(e.readTime)),t}function eA(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:cf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:Cc(o,s.key),fields:s.data.value.mapValue.fields,updateTime:aa(o,s.version.toTimestamp()),createTime:aa(o,s.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Do(e.version)};else{if(!e.isUnknownDocument())return K();r.unknownDocument={path:t.path.toArray(),version:Do(e.version)}}return r}function cf(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Do(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Co(n){let e=new ze(n.seconds,n.nanoseconds);return ee.fromTimestamp(e)}function fo(n,e){let t=(e.baseMutations||[]).map(o=>f_(n.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>f_(n.ct,o)),i=ze.fromMillis(e.localWriteTimeMs);return new wc(e.batchId,i,t,r)}function ac(n){let e=Co(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Co(n.lastLimboFreeSnapshotVersion):ee.min(),r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){return Y(o.documents.length===1),Ut(_a(wM(o.documents[0])))}(n.query):function(o){return Ut(bM(o))}(n.query),new ua(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,et.fromBase64String(n.resumeToken))}function MM(n,e){let t=Do(e.snapshotVersion),r=Do(e.lastLimboFreeSnapshotVersion),i;i=tf(e.target)?DM(n.ct,e.target):CM(n.ct,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Eo(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Uw(n){let e=bM({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?rf(e,e.limit,"L"):e}function Sv(n,e){return new Ec(e.largestBatchId,f_(n.ct,e.overlayMutation))}function tA(n,e){let t=e.path.lastSegment();return[n,Bt(e.path.popLast()),t]}function nA(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Do(r.readTime),documentKey:Bt(r.documentKey.path),largestBatchId:r.largestBatchId}}var p_=class{getBundleMetadata(e,t){return rA(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:Co(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return rA(e).put(function(i){return{bundleId:i.id,createTime:Do(Xe(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return iA(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:Uw(o.bundledQuery),readTime:Co(o.readTime)}}(r)})}saveNamedQuery(e,t){return iA(e).put(function(i){return{name:i.name,readTime:Do(Xe(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function rA(n){return dt(n,"bundles")}function iA(n){return dt(n,"namedQueries")}var lf=class n{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return nc(e).get(tA(this.userId,t)).next(r=>r?Sv(this.serializer,r):null)}getOverlays(e,t){let r=er();return S.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((o,s)=>{let a=new Ec(t,s);i.push(this.ht(e,a))}),S.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(s=>i.add(Bt(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(nc(e).j("collectionPathOverlayIndex",a))}),S.waitFor(o)}getOverlaysForCollection(e,t,r){let i=er(),o=Bt(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return nc(e).U("collectionPathOverlayIndex",s).next(a=>{for(let u of a){let l=Sv(this.serializer,u);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let o=er(),s,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return nc(e).J({index:"collectionGroupOverlayIndex",range:a},(u,l,h)=>{let p=Sv(this.serializer,l);o.size()<i||p.largestBatchId===s?(o.set(p.getKey(),p),s=p.largestBatchId):h.done()}).next(()=>o)}ht(e,t){return nc(e).put(function(i,o,s){let[a,u,l]=tA(o,s.mutation.key);return{userId:o,collectionPath:u,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:bc(i.ct,s.mutation)}}(this.serializer,this.userId,t))}};function nc(n){return dt(n,"documentOverlays")}var g_=class{Pt(e){return dt(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{let r=t?.value;return r?et.fromUint8Array(r):et.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}};var Ar=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(He(e.integerValue));else if("doubleValue"in e){let r=He(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),pc(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=xr(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(yi(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?zA(e)?this.dt(t,Number.MAX_SAFE_INTEGER):zf(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):K()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let o=e.fields||{};this.dt(t,53);let s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(He(a)),this.Vt(s,t),this.Tt(o[s],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),$.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};Ar.vt=new Ar;function PB(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function oA(n){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=PB(255&r[o]);if(i+=s,s!==8)break}return i}(n);return Math.ceil(e/8)}var m_=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{let i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){let t=this.qt(e),r=oA(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){let t=this.qt(e),r=oA(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let t=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){let t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){let t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},y_=class{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}},v_=class{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}},po=class{constructor(){this.jt=new m_,this.Ht=new y_(this.jt),this.Jt=new v_(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var go=class n{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new n(this.indexId,this.documentKey,this.arrayValue,r)}};function ci(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=sA(n.arrayValue,e.arrayValue),t!==0?t:(t=sA(n.directionalValue,e.directionalValue),t!==0?t:$.comparator(n.documentKey,e.documentKey)))}function sA(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}var df=class{constructor(e){this.Xt=new Fe((t,r)=>Je.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(let t of e.filters){let r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(Y(e.collectionGroup===this.collectionId),this.nn)return!1;let t=jv(e);if(t!==void 0&&!this.sn(t))return!1;let r=lo(e),i=new Set,o=0,s=0;for(;o<r.length&&this.sn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let u=r[o];if(!this.on(a,u)||!this._n(this.en[s++],u))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.en.length||!this._n(this.en[s++],a))return!1}return!0}an(){if(this.nn)return null;let e=new Fe(Je.comparator),t=[];for(let r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Js(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Js(r.field,0))}for(let r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Js(r.field,r.dir==="asc"?0:1)));return new na(na.UNKNOWN_ID,this.collectionId,t,fc.empty())}sn(e){for(let t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function xM(n){var e,t;if(Y(n instanceof ve||n instanceof Ae),n instanceof ve){if(n instanceof ef){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>ve.create(n.field,"==",o)))||[];return Ae.create(i,"or")}return n}let r=n.filters.map(i=>xM(i));return Ae.create(r,n.op)}function kB(n){if(n.getFilters().length===0)return[];let e=E_(xM(n));return Y(RM(e)),__(e)||w_(e)?[e]:e.getFilters()}function __(n){return n instanceof ve}function w_(n){return n instanceof Ae&&Fw(n)}function RM(n){return __(n)||w_(n)||function(t){if(t instanceof Ae&&Wv(t)){for(let r of t.getFilters())if(!__(r)&&!w_(r))return!1;return!0}return!1}(n)}function E_(n){if(Y(n instanceof ve||n instanceof Ae),n instanceof ve)return n;if(n.filters.length===1)return E_(n.filters[0]);let e=n.filters.map(r=>E_(r)),t=Ae.create(e,n.op);return t=hf(t),RM(t)?t:(Y(t instanceof Ae),Y(ia(t)),Y(t.filters.length>1),t.filters.reduce((r,i)=>$w(r,i)))}function $w(n,e){let t;return Y(n instanceof ve||n instanceof Ae),Y(e instanceof ve||e instanceof Ae),t=n instanceof ve?e instanceof ve?function(i,o){return Ae.create([i,o],"and")}(n,e):aA(n,e):e instanceof ve?aA(e,n):function(i,o){if(Y(i.filters.length>0&&o.filters.length>0),ia(i)&&ia(o))return YA(i,o.getFilters());let s=Wv(i)?i:o,a=Wv(i)?o:i,u=s.filters.map(l=>$w(l,a));return Ae.create(u,"or")}(n,e),hf(t)}function aA(n,e){if(ia(e))return YA(e,n.getFilters());{let t=e.filters.map(r=>$w(n,r));return Ae.create(t,"or")}}function hf(n){if(Y(n instanceof ve||n instanceof Ae),n instanceof ve)return n;let e=n.getFilters();if(e.length===1)return hf(e[0]);if(KA(n))return n;let t=e.map(i=>hf(i)),r=[];return t.forEach(i=>{i instanceof ve?r.push(i):i instanceof Ae&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Ae.create(r,n.op)}var I_=class{constructor(){this.un=new Tc}addToCollectionParentIndex(e,t){return this.un.add(t),S.resolve()}getCollectionParents(e,t){return S.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return S.resolve()}deleteFieldIndex(e,t){return S.resolve()}deleteAllFieldIndexes(e){return S.resolve()}createTargetIndexes(e,t){return S.resolve()}getDocumentsMatchingTarget(e,t){return S.resolve(null)}getIndexType(e,t){return S.resolve(0)}getFieldIndexes(e,t){return S.resolve([])}getNextCollectionGroupToUpdate(e){return S.resolve(null)}getMinOffset(e,t){return S.resolve(Cn.min())}getMinOffsetFromCollectionGroup(e,t){return S.resolve(Cn.min())}updateCollectionGroup(e,t,r){return S.resolve()}updateIndexEntries(e,t){return S.resolve()}},Tc=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Fe(Ee.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Fe(Ee.comparator)).toArray()}};var Vh=new Uint8Array(0),D_=class{constructor(e,t){this.databaseId=t,this.cn=new Tc,this.ln=new sr(r=>Eo(r),(r,i)=>Oc(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});let o={collectionId:r,parent:Bt(i)};return uA(e).put(o)}return S.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[PA(t),""],!1,!0);return uA(e).U(i).next(o=>{for(let s of o){if(s.collectionId!==t)break;r.push(Xn(s.parent))}return r})}addFieldIndex(e,t){let r=rc(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(t);delete i.indexId;let o=r.add(i);if(t.indexState){let s=qs(e);return o.next(a=>{s.put(nA(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){let r=rc(e),i=qs(e),o=Hs(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=rc(e),r=Hs(e),i=qs(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return S.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new df(r).an();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){let r=Hs(e),i=!0,o=new Map;return S.forEach(this.hn(t),s=>this.Pn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=ue(),a=[];return S.forEach(o,(u,l)=>{O("IndexedDbIndexManager",`Using index ${function(V){return`id=${V.indexId}|cg=${V.collectionGroup}|f=${V.fields.map(Z=>`${Z.fieldPath}:${Z.kind}`).join(",")}`}(u)} to execute ${Eo(t)}`);let h=function(V,Z){let ne=jv(Z);if(ne===void 0)return null;for(let X of nf(V,ne.fieldPath))switch(X.op){case"array-contains-any":return X.value.arrayValue.values||[];case"array-contains":return[X.value]}return null}(l,u),p=function(V,Z){let ne=new Map;for(let X of lo(Z))for(let E of nf(V,X.fieldPath))switch(E.op){case"==":case"in":ne.set(X.fieldPath.canonicalString(),E.value);break;case"not-in":case"!=":return ne.set(X.fieldPath.canonicalString(),E.value),Array.from(ne.values())}return null}(l,u),m=function(V,Z){let ne=[],X=!0;for(let E of lo(Z)){let v=E.kind===0?US(V,E.fieldPath,V.startAt):$S(V,E.fieldPath,V.startAt);ne.push(v.value),X&&(X=v.inclusive)}return new or(ne,X)}(l,u),y=function(V,Z){let ne=[],X=!0;for(let E of lo(Z)){let v=E.kind===0?$S(V,E.fieldPath,V.endAt):US(V,E.fieldPath,V.endAt);ne.push(v.value),X&&(X=v.inclusive)}return new or(ne,X)}(l,u),b=this.In(u,l,m),A=this.In(u,l,y),M=this.Tn(u,l,p),L=this.En(u.indexId,h,b,m.inclusive,A,y.inclusive,M);return S.forEach(L,G=>r.G(G,t.limit).next(V=>{V.forEach(Z=>{let ne=$.fromSegments(Z.documentKey);s.has(ne)||(s=s.add(ne),a.push(ne))})}))}).next(()=>a)}return S.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=kB(Ae.create(e.filters,"and")).map(r=>n_(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,o,s,a){let u=(t!=null?t.length:1)*Math.max(r.length,o.length),l=u/(t!=null?t.length:1),h=[];for(let p=0;p<u;++p){let m=t?this.dn(t[p/l]):Vh,y=this.An(e,m,r[p%l],i),b=this.Rn(e,m,o[p%l],s),A=a.map(M=>this.An(e,m,M,!0));h.push(...this.createRange(y,b,A))}return h}An(e,t,r,i){let o=new go(e,$.empty(),t,r);return i?o:o.Zt()}Rn(e,t,r,i){let o=new go(e,$.empty(),t,r);return i?o.Zt():o}Pn(e,t){let r=new df(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.rn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2,i=this.hn(t);return S.forEach(i,o=>this.Pn(e,o).next(s=>{s?r!==0&&s.fields.length<function(u){let l=new Fe(Je.comparator),h=!1;for(let p of u.filters)for(let m of p.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?h=!0:l=l.add(m.field));for(let p of u.orderBy)p.field.isKeyField()||(l=l.add(p.field));return l.size+(h?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(t)&&i.length>1&&r===2?1:r)}Vn(e,t){let r=new po;for(let i of lo(e)){let o=t.data.field(i.fieldPath);if(o==null)return null;let s=r.Yt(i.kind);Ar.vt.It(o,s)}return r.zt()}dn(e){let t=new po;return Ar.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){let r=new po;return Ar.vt.It(_o(this.databaseId,t),r.Yt(function(o){let s=lo(o);return s.length===0?0:s[s.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new po);let o=0;for(let s of lo(e)){let a=r[o++];for(let u of i)if(this.fn(t,s.fieldPath)&&vc(a))i=this.gn(i,s,a);else{let l=u.Yt(s.kind);Ar.vt.It(a,l)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let u=new po;u.seed(a.zt()),Ar.vt.It(s,u.Yt(t.kind)),o.push(u)}return o}fn(e,t){return!!e.filters.find(r=>r instanceof ve&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=rc(e),i=qs(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(o=>{let s=[];return S.forEach(o,a=>i.get([a.indexId,this.uid]).next(u=>{s.push(function(h,p){let m=p?new fc(p.sequenceNumber,new Cn(Co(p.readTime),new $(Xn(p.documentKey)),p.largestBatchId)):fc.empty(),y=h.fields.map(([b,A])=>new Js(Je.fromServerFormat(b),A));return new na(h.indexId,h.collectionGroup,y,m)}(a,u))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:ae(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=rc(e),o=qs(e);return this.yn(e).next(s=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>S.forEach(a,u=>o.put(nA(u.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){let r=new Map;return S.forEach(t,(i,o)=>{let s=r.get(i.collectionGroup);return(s?S.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),S.forEach(a,u=>this.wn(e,i,u).next(l=>{let h=this.Sn(o,u);return l.isEqual(h)?S.resolve():this.bn(e,o,u,l,h)}))))})}Dn(e,t,r,i){return Hs(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return Hs(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){let i=Hs(e),o=new Fe(ci);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(s,a)=>{o=o.add(new go(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>o)}Sn(e,t){let r=new Fe(ci),i=this.Vn(t,e);if(i==null)return r;let o=jv(t);if(o!=null){let s=e.data.field(o.fieldPath);if(vc(s))for(let a of s.arrayValue.values||[])r=r.add(new go(t.indexId,e.key,this.dn(a),i))}else r=r.add(new go(t.indexId,e.key,Vh,i));return r}bn(e,t,r,i,o){O("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);let s=[];return function(u,l,h,p,m){let y=u.getIterator(),b=l.getIterator(),A=$s(y),M=$s(b);for(;A||M;){let L=!1,G=!1;if(A&&M){let V=h(A,M);V<0?G=!0:V>0&&(L=!0)}else A!=null?G=!0:L=!0;L?(p(M),M=$s(b)):G?(m(A),A=$s(y)):(A=$s(y),M=$s(b))}}(i,o,ci,a=>{s.push(this.Dn(e,t,r,a))},a=>{s.push(this.vn(e,t,r,a))}),S.waitFor(s)}yn(e){let t=1;return qs(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>ci(s,a)).filter((s,a,u)=>!a||ci(s,u[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=ci(s,e),u=ci(s,t);if(a===0)i[0]=e.Zt();else if(a>0&&u<0)i.push(s),i.push(s.Zt());else if(u>0)break}i.push(t);let o=[];for(let s=0;s<i.length;s+=2){if(this.Cn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,Vh,[]],u=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,Vh,[]];o.push(IDBKeyRange.bound(a,u))}return o}Cn(e,t){return ci(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(cA)}getMinOffset(e,t){return S.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||K())).next(cA)}};function uA(n){return dt(n,"collectionParents")}function Hs(n){return dt(n,"indexEntries")}function rc(n){return dt(n,"indexConfiguration")}function qs(n){return dt(n,"indexState")}function cA(n){Y(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;Nw(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Cn(e.readTime,e.documentKey,t)}var lA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Dn=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function NM(n,e,t){let r=n.store("mutations"),i=n.store("documentMutations"),o=[],s=IDBKeyRange.only(t.batchId),a=0,u=r.J({range:s},(h,p,m)=>(a++,m.delete()));o.push(u.next(()=>{Y(a===1)}));let l=[];for(let h of t.mutations){let p=jA(e,h.key.path,t.batchId);o.push(i.delete(p)),l.push(h.key)}return S.waitFor(o).next(()=>l)}function ff(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw K();e=n.noDocument}return JSON.stringify(e).length}Dn.DEFAULT_COLLECTION_PERCENTILE=10,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Dn.DEFAULT=new Dn(41943040,Dn.DEFAULT_COLLECTION_PERCENTILE,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Dn.DISABLED=new Dn(-1,0,0);var pf=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){Y(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new n(o,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return li(e).J({index:"userMutationsIndex",range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let o=Ys(e),s=li(e);return s.add({}).next(a=>{Y(typeof a=="number");let u=new wc(a,t,r,i),l=function(y,b,A){let M=A.baseMutations.map(G=>bc(y.ct,G)),L=A.mutations.map(G=>bc(y.ct,G));return{userId:b,batchId:A.batchId,localWriteTimeMs:A.localWriteTime.toMillis(),baseMutations:M,mutations:L}}(this.serializer,this.userId,u),h=[],p=new Fe((m,y)=>ae(m.canonicalString(),y.canonicalString()));for(let m of i){let y=jA(this.userId,m.key.path,a);p=p.add(m.key.path.popLast()),h.push(s.put(l)),h.push(o.put(y,Bj))}return p.forEach(m=>{h.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Fn[a]=u.keys()}),S.waitFor(h).next(()=>u)})}lookupMutationBatch(e,t){return li(e).get(t).next(r=>r?(Y(r.userId===this.userId),fo(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?S.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return li(e).J({index:"userMutationsIndex",range:i},(s,a,u)=>{a.userId===this.userId&&(Y(a.batchId>=r),o=fo(this.serializer,a)),u.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return li(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return li(e).U("userMutationsIndex",t).next(r=>r.map(i=>fo(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=Uh(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return Ys(e).J({range:i},(s,a,u)=>{let[l,h,p]=s,m=Xn(h);if(l===this.userId&&t.path.isEqual(m))return li(e).get(p).next(y=>{if(!y)throw K();Y(y.userId===this.userId),o.push(fo(this.serializer,y))});u.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Fe(ae),i=[];return t.forEach(o=>{let s=Uh(this.userId,o.path),a=IDBKeyRange.lowerBound(s),u=Ys(e).J({range:a},(l,h,p)=>{let[m,y,b]=l,A=Xn(y);m===this.userId&&o.path.isEqual(A)?r=r.add(b):p.done()});i.push(u)}),S.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=Uh(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Fe(ae);return Ys(e).J({range:s},(u,l,h)=>{let[p,m,y]=u,b=Xn(m);p===this.userId&&r.isPrefixOf(b)?b.length===i&&(a=a.add(y)):h.done()}).next(()=>this.xn(e,a))}xn(e,t){let r=[],i=[];return t.forEach(o=>{i.push(li(e).get(o).next(s=>{if(s===null)throw K();Y(s.userId===this.userId),r.push(fo(this.serializer,s))}))}),S.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return NM(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),S.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return S.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return Ys(e).J({range:r},(o,s,a)=>{if(o[0]===this.userId){let u=Xn(o[1]);i.push(u)}else a.done()}).next(()=>{Y(i.length===0)})})}containsKey(e,t){return PM(e,this.userId,t)}Nn(e){return kM(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function PM(n,e,t){let r=Uh(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Ys(n).J({range:o,H:!0},(a,u,l)=>{let[h,p,m]=a;h===e&&p===i&&(s=!0),l.done()}).next(()=>s)}function li(n){return dt(n,"mutations")}function Ys(n){return dt(n,"documentMutations")}function kM(n){return dt(n,"mutationQueues")}var ca=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var C_=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{let r=new ca(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>ee.fromTimestamp(new ze(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>zs(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(Y(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0,o=[];return zs(e).J((s,a)=>{let u=ac(a);u.sequenceNumber<=t&&r.get(u.targetId)===null&&(i++,o.push(this.removeTargetData(e,u)))}).next(()=>S.waitFor(o)).next(()=>i)}forEachTarget(e,t){return zs(e).J((r,i)=>{let o=ac(i);t(o)})}qn(e){return dA(e).get("targetGlobalKey").next(t=>(Y(t!==null),t))}Qn(e,t){return dA(e).put("targetGlobalKey",t)}Kn(e,t){return zs(e).put(MM(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){let r=Eo(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return zs(e).J({range:i,index:"queryTargetsIndex"},(s,a,u)=>{let l=ac(a);Oc(t,l.target)&&(o=l,u.done())}).next(()=>o)}addMatchingKeys(e,t,r){let i=[],o=di(e);return t.forEach(s=>{let a=Bt(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),S.waitFor(i)}removeMatchingKeys(e,t,r){let i=di(e);return S.forEach(t,o=>{let s=Bt(o.path);return S.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){let r=di(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=di(e),o=ue();return i.J({range:r,H:!0},(s,a,u)=>{let l=Xn(s[1]),h=new $(l);o=o.add(h)}).next(()=>o)}containsKey(e,t){let r=Bt(t.path),i=IDBKeyRange.bound([r],[PA(r)],!1,!0),o=0;return di(e).J({index:"documentTargetsIndex",H:!0,range:i},([s,a],u,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}ot(e,t){return zs(e).get(t).next(r=>r?ac(r):null)}};function zs(n){return dt(n,"targets")}function dA(n){return dt(n,"targetGlobal")}function di(n){return dt(n,"targetDocuments")}function hA([n,e],[t,r]){let i=ae(n,t);return i===0?ae(e,r):i}var b_=class{constructor(e){this.Un=e,this.buffer=new Fe(hA),this.Wn=0}Gn(){return++this.Wn}zn(e){let t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();hA(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},T_=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){O("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>N(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ti(t)?O("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield bi(t)}yield this.Hn(3e5)}))}},S_=class{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return S.resolve(fn.oe);let r=new b_(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(O("LruGarbageCollector","Garbage collection skipped; disabled"),S.resolve(lA)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(O("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),lA):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(O("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),Gs()<=Un.DEBUG&&O("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),S.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function OB(n,e){return new S_(n,e)}var A_=class{constructor(e,t){this.db=e,this.garbageCollector=OB(this,t)}Yn(e){let t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return Lh(e,r)}removeReference(e,t,r){return Lh(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Lh(e,t)}nr(e,t){return function(i,o){let s=!1;return kM(i).Y(a=>PM(i,a,o).next(u=>(u&&(s=!0),S.resolve(!u)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.tr(e,(s,a)=>{if(a<=t){let u=this.nr(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,ee.min()),di(e).delete(function(p){return[0,Bt(p.path)]}(s))))});i.push(u)}}).next(()=>S.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Lh(e,t)}tr(e,t){let r=di(e),i,o=fn.oe;return r.J({index:"documentTargetsIndex"},([s,a],{path:u,sequenceNumber:l})=>{s===0?(o!==fn.oe&&t(new $(Xn(i)),o),o=l,i=u):o=fn.oe}).next(()=>{o!==fn.oe&&t(new $(Xn(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function Lh(n,e){return di(n).put(function(r,i){return{targetId:0,path:Bt(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var gf=class{constructor(){this.changes=new sr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,at.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?S.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var M_=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return co(e).put(r)}removeEntry(e,t,r){return co(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],cf(s),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=at.newInvalidDocument(t);return co(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(ic(t))},(i,o)=>{r=this.ir(t,o)}).next(()=>r)}sr(e,t){let r={size:0,document:at.newInvalidDocument(t)};return co(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(ic(t))},(i,o)=>{r={document:this.ir(t,o),size:ff(o)}}).next(()=>r)}getEntries(e,t){let r=on();return this._r(e,t,(i,o)=>{let s=this.ir(i,o);r=r.insert(i,s)}).next(()=>r)}ar(e,t){let r=on(),i=new Ue($.comparator);return this._r(e,t,(o,s)=>{let a=this.ir(o,s);r=r.insert(o,a),i=i.insert(o,ff(s))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return S.resolve();let i=new Fe(gA);t.forEach(u=>i=i.add(u));let o=IDBKeyRange.bound(ic(i.first()),ic(i.last())),s=i.getIterator(),a=s.getNext();return co(e).J({index:"documentKeyIndex",range:o},(u,l,h)=>{let p=$.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&gA(a,p)<0;)r(a,null),a=s.getNext();a&&a.isEqual(p)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?h.$(ic(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),cf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return co(e).U(IDBKeyRange.bound(a,u,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let h=on();for(let p of l){let m=this.ir($.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);m.isFoundDocument()&&(Vc(t,m)||i.has(m.key))&&(h=h.insert(m.key,m))}return h})}getAllFromCollectionGroup(e,t,r,i){let o=on(),s=pA(t,r),a=pA(t,Cn.max());return co(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(u,l,h)=>{let p=this.ir($.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(p.key,p),o.size===i&&h.done()}).next(()=>o)}newChangeBuffer(e){return new x_(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return fA(e).get("remoteDocumentGlobalKey").next(t=>(Y(!!t),t))}rr(e,t){return fA(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){let r=NB(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(ee.min())))return r}return at.newInvalidDocument(e)}};function OM(n){return new M_(n)}var x_=class extends gf{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new sr(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new Fe((o,s)=>ae(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.lr.get(o);if(t.push(this.cr.removeEntry(e,o,a.readTime)),s.isValidDocument()){let u=eA(this.cr.serializer,s);i=i.add(o.path.popLast());let l=ff(u);r+=l-a.size,t.push(this.cr.addEntry(e,o,u))}else if(r-=a.size,this.trackRemovals){let u=eA(this.cr.serializer,s.convertToNoDocument(ee.min()));t.push(this.cr.addEntry(e,o,u))}}),i.forEach(o=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.cr.updateMetadata(e,r)),S.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((o,s)=>{this.lr.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function fA(n){return dt(n,"remoteDocumentGlobal")}function co(n){return dt(n,"remoteDocumentsV14")}function ic(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function pA(n,e){let t=e.documentKey.path.toArray();return[n,cf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function gA(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=ae(t[o],r[o]),i)return i;return i=ae(t.length,r.length),i||(i=ae(t[t.length-2],r[r.length-2]),i||ae(t[t.length-1],r[r.length-1]))}var R_=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var mf=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&lc(r.mutation,i,pn.empty(),ze.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ue()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ue()){let i=er();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=sc();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=er();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ue()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=on(),s=cc(),a=function(){return cc()}();return t.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Ln)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),lc(h.mutation,l,h.mutation.getFieldMask(),ze.now())):s.set(l.key,pn.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>{var p;return a.set(l,new R_(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=cc(),i=new Ue((s,a)=>s-a),o=ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let h=r.get(u)||pn.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||ue()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=oM();h.forEach(m=>{if(!o.has(m)){let y=hM(t.get(m),r.get(m));y!==null&&p.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return S.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return $.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Vw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):S.resolve(er()),a=-1,u=o;return s.next(l=>S.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?S.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,ue())).next(h=>({batchId:a,changes:iM(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new $(t)).next(r=>{let i=sc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=sc();return this.indexManager.getCollectionParents(e,o).next(a=>S.forEach(a,u=>{let l=function(p,m){return new Vn(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,at.newInvalidDocument(h)))});let a=sc();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&lc(h.mutation,l,pn.empty(),ze.now()),Vc(t,l)&&(a=a.insert(u,l))}),a})}};var N_=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return S.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Xe(i.createTime)}}(t)),S.resolve()}getNamedQuery(e,t){return S.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:Uw(i.bundledQuery),readTime:Xe(i.readTime)}}(t)),S.resolve()}};var P_=class{constructor(){this.overlays=new Ue($.comparator),this.Ir=new Map}getOverlay(e,t){return S.resolve(this.overlays.get(t))}getOverlays(e,t){let r=er();return S.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),S.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),S.resolve()}getOverlaysForCollection(e,t,r){let i=er(),o=t.length+1,s=new $(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return S.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Ue((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=er(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=er(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return S.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Ec(t,r));let o=this.Ir.get(t);o===void 0&&(o=ue(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}};var k_=class{constructor(){this.sessionToken=et.EMPTY_BYTE_STRING}getSessionToken(e){return S.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,S.resolve()}};var Sc=class{constructor(){this.Tr=new Fe(ot.Er),this.dr=new Fe(ot.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new ot(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new ot(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new $(new Ee([])),r=new ot(t,e),i=new ot(t,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new $(new Ee([])),r=new ot(t,e),i=new ot(t,e+1),o=ue();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new ot(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},ot=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return $.comparator(e.key,t.key)||ae(e.wr,t.wr)}static Ar(e,t){return ae(e.wr,t.wr)||$.comparator(e.key,t.key)}};var O_=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Fe(ot.Er)}checkEmpty(e){return S.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new wc(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.br=this.br.add(new ot(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return S.resolve(s)}lookupMutationBatch(e,t){return S.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),o=i<0?0:i;return S.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return S.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return S.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new ot(t,0),i=new ot(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{let a=this.Dr(s.wr);o.push(a)}),S.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Fe(ae);return t.forEach(i=>{let o=new ot(i,0),s=new ot(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),S.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;$.isDocumentKey(o)||(o=o.child(""));let s=new ot(new $(o),0),a=new Fe(ae);return this.br.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.wr)),!0)},s),S.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Y(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return S.forEach(t.mutations,i=>{let o=new ot(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new ot(t,0),i=this.br.firstAfterOrEqual(r);return S.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,S.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var F_=class{constructor(e){this.Mr=e,this.docs=function(){return new Ue($.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return S.resolve(r?r.document.mutableCopy():at.newInvalidDocument(t))}getEntries(e,t){let r=on();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():at.newInvalidDocument(i))}),S.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=on(),s=t.path,a=new $(s.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||Nw(OA(h),r)<=0||(i.has(h.key)||Vc(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return S.resolve(o)}getAllFromCollectionGroup(e,t,r,i){K()}Or(e,t){return S.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new V_(this)}getSize(e){return S.resolve(this.size)}},V_=class extends gf{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),S.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var L_=class{constructor(e){this.persistence=e,this.Nr=new sr(t=>Eo(t),Oc),this.lastRemoteSnapshotVersion=ee.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Sc,this.targetCount=0,this.kr=ca.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),S.resolve()}getLastRemoteSnapshotVersion(e){return S.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return S.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),S.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),S.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new ca(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,S.resolve()}updateTargetData(e,t){return this.Kn(t),S.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,S.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),S.waitFor(o).next(()=>i)}getTargetCount(e){return S.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return S.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),S.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),S.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),S.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return S.resolve(r)}containsKey(e,t){return S.resolve(this.Br.containsKey(t))}};var yf=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new fn(0),this.Kr=!1,this.Kr=!0,this.$r=new k_,this.referenceDelegate=e(this),this.Ur=new L_(this),this.indexManager=new I_,this.remoteDocumentCache=function(i){return new F_(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new uf(t),this.Gr=new N_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new P_,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new O_(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){O("MemoryPersistence","Starting transaction:",e);let i=new j_(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,t){return S.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},j_=class extends Qh{constructor(e){super(),this.currentSequenceNumber=e}},vf=class n{constructor(e){this.persistence=e,this.Jr=new Sc,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw K()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),S.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),S.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),S.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return S.forEach(this.Xr,r=>{let i=$.fromPath(r);return this.ei(e,i).next(o=>{o||t.removeEntry(i,ee.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return S.or([()=>S.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var B_=class{constructor(e){this.serializer=e}O(e,t,r,i){let o=new Yh("createOrUpgrade",t);r<1&&i>=1&&(function(u){u.createObjectStore("owner")}(e),function(u){u.createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",RS,{unique:!0}),u.createObjectStore("documentMutations")}(e),mA(e),function(u){u.createObjectStore("remoteDocuments")}(e));let s=S.resolve();return r<3&&i>=3&&(r!==0&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),mA(e)),s=s.next(()=>function(u){let l=u.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ee.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",h)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(u,l){return l.store("mutations").U().next(h=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",RS,{unique:!0});let p=l.store("mutations"),m=h.map(y=>p.put(y));return S.waitFor(m)})}(e,o))),s=s.next(()=>{(function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.ni(o))),r<6&&i>=6&&(s=s.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ri(o)))),r<7&&i>=7&&(s=s.next(()=>this.ii(o))),r<8&&i>=8&&(s=s.next(()=>this.si(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.oi(o))),r<11&&i>=11&&(s=s.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(u){let l=u.createObjectStore("documentOverlays",{keyPath:Jj});l.createIndex("collectionPathOverlayIndex",Xj,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",eB,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(u){let l=u.createObjectStore("remoteDocumentsV14",{keyPath:Uj});l.createIndex("documentKeyIndex",$j),l.createIndex("collectionGroupIndex",Hj)}(e)).next(()=>this._i(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.ai(e,o))),r<15&&i>=15&&(s=s.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:Kj}).createIndex("sequenceNumberIndex",Qj,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:Yj}).createIndex("documentKeyIndex",Zj,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(s=s.next(()=>{(function(u){u.createObjectStore("globals",{keyPath:"name"})})(e)})),s}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=ff(i)}).next(()=>{let r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){let t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>S.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",s).next(a=>S.forEach(a,u=>{Y(u.userId===o.userId);let l=fo(this.serializer,u);return NM(e,o.userId,l).next(()=>{})}))}))}ii(e){let t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.J((s,a)=>{let u=new Ee(s),l=function(p){return[0,Bt(p)]}(u);o.push(t.get(l).next(h=>h?S.resolve():(p=>t.put({targetId:0,path:Bt(p),sequenceNumber:i.highestListenSequenceNumber}))(u)))}).next(()=>S.waitFor(o))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:Wj});let r=t.store("collectionParents"),i=new Tc,o=s=>{if(i.add(s)){let a=s.lastSegment(),u=s.popLast();return r.put({collectionId:a,parent:Bt(u)})}};return t.store("remoteDocuments").J({H:!0},(s,a)=>{let u=new Ee(s);return o(u.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([s,a,u],l)=>{let h=Xn(a);return o(h.popLast())}))}oi(e){let t=e.store("targets");return t.J((r,i)=>{let o=ac(i),s=MM(this.serializer,o);return t.put(s)})}_i(e,t){let r=t.store("remoteDocuments"),i=[];return r.J((o,s)=>{let a=t.store("remoteDocumentsV14"),u=function(p){return p.document?new $(Ee.fromString(p.document.name).popFirst(5)):p.noDocument?$.fromSegments(p.noDocument.path):p.unknownDocument?$.fromSegments(p.unknownDocument.path):K()}(s).path.toArray(),l={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>S.waitFor(i))}ai(e,t){let r=t.store("mutations"),i=OM(this.serializer),o=new yf(vf.Zr,this.serializer.ct);return r.U().next(s=>{let a=new Map;return s.forEach(u=>{var l;let h=(l=a.get(u.userId))!==null&&l!==void 0?l:ue();fo(this.serializer,u).keys().forEach(p=>h=h.add(p)),a.set(u.userId,h)}),S.forEach(a,(u,l)=>{let h=new st(l),p=lf.lt(this.serializer,h),m=o.getIndexManager(h),y=pf.lt(h,this.serializer,m,o.referenceDelegate);return new mf(i,y,p,m).recalculateAndSaveOverlaysForDocumentKeys(new gc(t,fn.oe),u).next()})})}};function mA(n){n.createObjectStore("targetDocuments",{keyPath:zj}).createIndex("documentTargetsIndex",Gj,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",qj,{unique:!0}),n.createObjectStore("targetGlobal")}var Av="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",U_=class n{constructor(e,t,r,i,o,s,a,u,l,h,p=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=o,this.window=s,this.document=a,this.ci=l,this.li=h,this.hi=p,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=m=>Promise.resolve(),!n.D())throw new k(R.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new A_(this,i),this.Ai=t+"main",this.serializer=new uf(u),this.Ri=new mi(this.Ai,this.hi,new B_(this.serializer)),this.$r=new g_,this.Ur=new C_(this.referenceDelegate,this.serializer),this.remoteDocumentCache=OM(this.serializer),this.Gr=new p_,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,h===!1&&Ze("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new k(R.FAILED_PRECONDITION,Av);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new fn(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=t=>N(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(t=>N(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(()=>N(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>jh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(Ti(e))return O("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return O("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return oc(e).get("owner").next(t=>S.resolve(this.vi(t)))}Ci(e){return jh(e).delete(this.clientId)}Fi(){return N(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=dt(t,"clientMetadata");return r.U().next(i=>{let o=this.xi(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return S.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Vi)for(let t of e)this.Vi.removeItem(this.Oi(t.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?S.resolve(!0):oc(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new k(R.FAILED_PRECONDITION,Av);return!1}}return!(!this.networkEnabled||!this.inForeground)||jh(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&O("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return N(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let t=new gc(e,fn.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()})}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>jh(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return pf.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new D_(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return lf.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){O("IndexedDbPersistence","Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",o=function(u){return u===17?rB:u===16?nB:u===15?kw:u===14?$A:u===13?UA:u===12?tB:u===11?BA:void K()}(this.hi),s;return this.Ri.runTransaction(e,i,o,a=>(s=new gc(a,this.Qr?this.Qr.next():fn.oe),t==="readwrite-primary"?this.wi(s).next(u=>!!u||this.Si(s)).next(u=>{if(!u)throw Ze(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new k(R.FAILED_PRECONDITION,FA);return r(s)}).next(u=>this.Di(s).next(()=>u)):this.Ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Ki(e){return oc(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new k(R.FAILED_PRECONDITION,Av)})}Di(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return oc(e).put("owner",t)}static D(){return mi.D()}bi(e){let t=oc(e);return t.get("owner").next(r=>this.vi(r)?(O("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):S.resolve())}Mi(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(Ze(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let t=/(?:Version|Mobile)\/1[456]/;jp()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{let r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return O("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ze("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Ze("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function oc(n){return dt(n,"owner")}function jh(n){return dt(n,"clientMetadata")}function Hw(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var $_=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=ue(),i=ue();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var H_=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var _f=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return jp()?8:VA(Wa())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Yi(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new H_;return this.Xi(e,t,s).next(a=>{if(o.result=a,this.zi)return this.es(e,t,s,a.size)})}).next(()=>o.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Gs()<=Un.DEBUG&&O("QueryEngine","SDK will not create cache indexes for query:",Ws(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),S.resolve()):(Gs()<=Un.DEBUG&&O("QueryEngine","Query:",Ws(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Gs()<=Un.DEBUG&&O("QueryEngine","The SDK decides to create cache indexes for query:",Ws(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ut(t))):S.resolve())}Yi(e,t){if(HS(t))return S.resolve(null);let r=Ut(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=rf(t,null,"F"),r=Ut(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ue(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.ts(t,a);return this.ns(t,l,s,u.readTime)?this.Yi(e,rf(t,null,"F")):this.rs(e,l,t,u)}))})))}Zi(e,t,r,i){return HS(t)||i.isEqual(ee.min())?S.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let s=this.ts(t,o);return this.ns(t,s,r,i)?S.resolve(null):(Gs()<=Un.DEBUG&&O("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ws(t)),this.rs(e,s,t,kA(i,-1)).next(a=>a))})}ts(e,t){let r=new Fe(nM(e));return t.forEach((i,o)=>{Vc(e,o)&&(r=r.add(o))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,t,r){return Gs()<=Un.DEBUG&&O("QueryEngine","Using full collection scan to execute query:",Ws(t)),this.Ji.getDocumentsMatchingQuery(e,t,Cn.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var q_=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Ue(ae),this._s=new sr(o=>Eo(o),Oc),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new mf(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function FM(n,e,t,r){return new q_(n,e,t,r)}function VM(n,e){return N(this,null,function*(){let t=U(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=ue();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(l=>({hs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function FB(n,e){let t=U(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,m=p.keys(),y=S.resolve();return m.forEach(b=>{y=y.next(()=>h.getEntry(u,b)).next(A=>{let M=l.docVersions.get(b);Y(M!==null),A.version.compareTo(M)<0&&(p.applyToRemoteDocument(A,l),A.isValidDocument()&&(A.setReadTime(l.commitVersion),h.addEntry(A)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=ue();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function LM(n){let e=U(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function VB(n,e){let t=U(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(t.Ur.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.Ur.addMatchingKeys(o,h.addedDocuments,p)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(et.EMPTY_BYTE_STRING,ee.min()).withLastLimboFreeSnapshotVersion(ee.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),function(A,M,L){return A.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=3e8?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0}(m,y,h)&&a.push(t.Ur.updateTargetData(o,y))});let u=on(),l=ue();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(jM(o,s,e.documentUpdates).next(h=>{u=h.Ps,l=h.Is})),!r.isEqual(ee.min())){let h=t.Ur.getLastRemoteSnapshotVersion(o).next(p=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return S.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.os=i,o))}function jM(n,e,t){let r=ue(),i=ue();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=on();return t.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(ee.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):O("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ps:s,Is:i}})}function LB(n,e){let t=U(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function la(n,e){let t=U(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(o=>o?(i=o,S.resolve(i)):t.Ur.allocateTargetId(r).next(s=>(i=new ua(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function da(n,e,t){return N(this,null,function*(){let r=U(n),i=r.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Ti(s))throw s;O("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function wf(n,e,t){let r=U(n),i=ee.min(),o=ue();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,h){let p=U(u),m=p._s.get(h);return m!==void 0?S.resolve(p.os.get(m)):p.Ur.getTargetData(l,h)}(r,s,Ut(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,t?i:ee.min(),t?o:ue())).next(a=>($M(r,tM(e),a),{documents:a,Ts:o})))}function BM(n,e){let t=U(n),r=U(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.ot(o,e).next(s=>s?s.target:null))}function UM(n,e){let t=U(n),r=t.us.get(e)||ee.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,kA(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>($M(t,e,i),i))}function $M(n,e,t){let r=n.us.get(e)||ee.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.us.set(e,r)}function jB(n,e,t,r){return N(this,null,function*(){let i=U(n),o=ue(),s=on();for(let l of t){let h=e.Es(l.metadata.name);l.document&&(o=o.add(h));let p=e.ds(l);p.setReadTime(e.As(l.metadata.readTime)),s=s.insert(h,p)}let a=i.cs.newChangeBuffer({trackRemovals:!0}),u=yield la(i,function(h){return Ut(_a(Ee.fromString(`__bundle__/docs/${h}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>jM(l,a,s).next(h=>(a.apply(l),h)).next(h=>i.Ur.removeMatchingKeysForTargetId(l,u.targetId).next(()=>i.Ur.addMatchingKeys(l,o,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,h.Ps,h.Is)).next(()=>h.Ps)))})}function BB(r,i){return N(this,arguments,function*(n,e,t=ue()){let o=yield la(n,Ut(Uw(e.bundledQuery))),s=U(n);return s.persistence.runTransaction("Save named query","readwrite",a=>{let u=Xe(e.readTime);if(o.snapshotVersion.compareTo(u)>=0)return s.Gr.saveNamedQuery(a,e);let l=o.withResumeToken(et.EMPTY_BYTE_STRING,u);return s.os=s.os.insert(l.targetId,l),s.Ur.updateTargetData(a,l).next(()=>s.Ur.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Ur.addMatchingKeys(a,t,o.targetId)).next(()=>s.Gr.saveNamedQuery(a,e))})})}function yA(n,e){return`firestore_clients_${n}_${e}`}function vA(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Mv(n,e){return`firestore_targets_${n}_${e}`}var Ef=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new k(i.error.code,i.error.message))),s?new n(e,t,i.state,o):(Ze("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},dc=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){let r=JSON.parse(t),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new k(r.error.code,r.error.message))),o?new n(e,r.state,i):(Ze("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},If=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=Lw();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=LA(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new n(e,o):(Ze("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}},z_=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(Ze("SharedClientState",`Failed to parse online state: ${e}`),null)}},Ac=class{constructor(){this.activeTargetIds=Lw()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},hc=class{constructor(e,t,r,i,o){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Ue(ae),this.started=!1,this.bs=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Ds=yA(this.persistenceKey,this.ps),this.vs=function(u){return`firestore_sequence_number_${u}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new Ac),this.Cs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.xs=function(u){return`firestore_online_state_${u}`}(this.persistenceKey),this.Os=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){return N(this,null,function*(){let e=yield this.syncEngine.Qi();for(let r of e){if(r===this.ps)continue;let i=this.getItem(yA(this.persistenceKey,r));if(i){let o=If.Rs(r,i);o&&(this.Ss=this.Ss.insert(o.clientId,o))}}this.Ns();let t=this.storage.getItem(this.xs);if(t){let r=this.Ls(t);r&&this.Bs(r)}for(let r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(Mv(this.persistenceKey,e));if(i){let o=dc.Rs(e,i);o&&(r=o.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Mv(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return O("SharedClientState","READ",e,t),t}setItem(e,t){O("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){O("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){let t=e;if(t.storageArea===this.storage){if(O("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void Ze("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>N(this,null,function*(){if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){let r=this.Gs(t.key);return this.zs(r,null)}{let r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){let r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){let r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){let r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){let r=function(o){let s=fn.oe;if(o!=null)try{let a=JSON.parse(o);Y(typeof a=="number"),s=a}catch(a){Ze("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(t.newValue);r!==fn.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){let r=this.Xs(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(t)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){let i=new Ef(this.currentUser,e,t,r),o=vA(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Vs())}Qs(e){let t=vA(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){let t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){let i=Mv(this.persistenceKey,e),o=new dc(e,t,r);this.setItem(i,o.Vs())}Ws(e){let t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){let t=this.Cs.exec(e);return t?t[1]:null}js(e,t){let r=this.Gs(e);return If.Rs(r,t)}Hs(e,t){let r=this.Fs.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return Ef.Rs(new st(o),i,t)}Ys(e,t){let r=this.Ms.exec(e),i=Number(r[1]);return dc.Rs(i,t)}Ls(e){return z_.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){return N(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);O("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){let r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),o=this.ks(r),s=[],a=[];return o.forEach(u=>{i.has(u)||s.push(u)}),i.forEach(u=>{o.has(u)||a.push(u)}),this.syncEngine.io(s,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=Lw();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},Df=class{constructor(){this.so=new Ac,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Ac,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var G_=class{_o(e){}shutdown(){}};var Cf=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){O("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){O("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Bh=null;function xv(){return Bh===null?Bh=function(){return 268435456+Math.round(2147483648*Math.random())}():Bh++,"0x"+Bh.toString(16)}var UB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var W_=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var Tt="WebChannelConnection",K_=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(t,r,i,o,s){let a=xv(),u=this.xo(t,r.toUriEncodedString());O("RestConnection",`Sending RPC '${t}' ${a}:`,u,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,o,s),this.No(t,u,l,i).then(h=>(O("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw Fn("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(t,r,i,o,s,a){return this.Mo(t,r,i,o,s)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+va}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}xo(t,r){let i=UB[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let o=xv();return new Promise((s,a)=>{let u=new Iv;u.setWithCredentials(!0),u.listenOnce(Dv.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case tc.NO_ERROR:let h=u.getResponseJson();O(Tt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case tc.TIMEOUT:O(Tt,`RPC '${e}' ${o} timed out`),a(new k(R.DEADLINE_EXCEEDED,"Request time out"));break;case tc.HTTP_ERROR:let p=u.getStatus();if(O(Tt,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);let y=m?.error;if(y&&y.status&&y.message){let b=function(M){let L=M.toLowerCase().replace(/_/g,"-");return Object.values(R).indexOf(L)>=0?L:R.UNKNOWN}(y.status);a(new k(b,y.message))}else a(new k(R.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new k(R.UNAVAILABLE,"Connection failed."));break;default:K()}}finally{O(Tt,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);O(Tt,`RPC '${e}' ${o} sending request:`,i),u.send(t,"POST",l,r,15)})}Bo(e,t,r){let i=xv(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Tv(),a=bv(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let h=o.join("");O(Tt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u),m=!1,y=!1,b=new W_({Io:M=>{y?O(Tt,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(m||(O(Tt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),O(Tt,`RPC '${e}' stream ${i} sending:`,M),p.send(M))},To:()=>p.close()}),A=(M,L,G)=>{M.listen(L,V=>{try{G(V)}catch(Z){setTimeout(()=>{throw Z},0)}})};return A(p,Us.EventType.OPEN,()=>{y||(O(Tt,`RPC '${e}' stream ${i} transport opened.`),b.yo())}),A(p,Us.EventType.CLOSE,()=>{y||(y=!0,O(Tt,`RPC '${e}' stream ${i} transport closed`),b.So())}),A(p,Us.EventType.ERROR,M=>{y||(y=!0,Fn(Tt,`RPC '${e}' stream ${i} transport errored:`,M),b.So(new k(R.UNAVAILABLE,"The operation could not be completed")))}),A(p,Us.EventType.MESSAGE,M=>{var L;if(!y){let G=M.data[0];Y(!!G);let V=G,Z=V.error||((L=V[0])===null||L===void 0?void 0:L.error);if(Z){O(Tt,`RPC '${e}' stream ${i} received error:`,Z);let ne=Z.status,X=function(w){let I=it[w];if(I!==void 0)return gM(I)}(ne),E=Z.message;X===void 0&&(X=R.INTERNAL,E="Unknown error status: "+ne+" with message "+Z.message),y=!0,b.So(new k(X,E)),p.close()}else O(Tt,`RPC '${e}' stream ${i} received:`,G),b.bo(G)}}),A(a,Cv.STAT_EVENT,M=>{M.stat===Fh.PROXY?O(Tt,`RPC '${e}' stream ${i} detected buffering proxy`):M.stat===Fh.NOPROXY&&O(Tt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}};function HM(){return typeof window<"u"?window:null}function zh(){return typeof document<"u"?document:null}function Lc(n){return new c_(n,!0)}var Mc=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&O("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var bf=class{constructor(e,t,r,i,o,s,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Mc(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return N(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return N(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return N(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===R.RESOURCE_EXHAUSTED?(Ze(t.toString()),Ze("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===R.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new k(R.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>N(this,null,function*(){this.state=0,this.start()}))}I_(e){return O("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(O("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Q_=class extends bf{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=bB(this.serializer,e),r=function(o){if(!("targetChange"in o))return ee.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ee.min():s.readTime?Xe(s.readTime):ee.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=h_(this.serializer),t.addTarget=function(o,s){let a,u=s.target;if(a=tf(u)?{documents:DM(o,u)}:{query:CM(o,u)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=yM(o,s.resumeToken);let l=l_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(ee.min())>0){a.readTime=aa(o,s.snapshotVersion.toTimestamp());let l=l_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=SB(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=h_(this.serializer),t.removeTarget=e,this.a_(t)}},Y_=class extends bf{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Y(!!e.streamToken),this.lastStreamToken=e.streamToken,Y(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Y(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=TB(e.writeResults,e.commitTime),r=Xe(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=h_(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>bc(this.serializer,r))};this.a_(t)}};var Z_=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new k(R.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,d_(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new k(R.UNKNOWN,o.toString())})}Lo(e,t,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,d_(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new k(R.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},J_=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ze(t),this.D_=!1):O("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var X_=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(()=>N(this,null,function*(){Si(this)&&(O("RemoteStore","Restarting streams for network reachability change."),yield function(u){return N(this,null,function*(){let l=U(u);l.L_.add(4),yield wa(l),l.q_.set("Unknown"),l.L_.delete(4),yield jc(l)})}(this))}))}),this.q_=new J_(r,i)}};function jc(n){return N(this,null,function*(){if(Si(n))for(let e of n.B_)yield e(!0)})}function wa(n){return N(this,null,function*(){for(let e of n.B_)yield e(!1)})}function Gf(n,e){let t=U(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),Gw(t)?zw(t):Ia(t).r_()&&qw(t,e))}function ha(n,e){let t=U(n),r=Ia(t);t.N_.delete(e),r.r_()&&qM(t,e),t.N_.size===0&&(r.r_()?r.o_():Si(t)&&t.q_.set("Unknown"))}function qw(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ee.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ia(n).A_(e)}function qM(n,e){n.Q_.xe(e),Ia(n).R_(e)}function zw(n){n.Q_=new u_({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Ia(n).start(),n.q_.v_()}function Gw(n){return Si(n)&&!Ia(n).n_()&&n.N_.size>0}function Si(n){return U(n).L_.size===0}function zM(n){n.Q_=void 0}function $B(n){return N(this,null,function*(){n.q_.set("Online")})}function HB(n){return N(this,null,function*(){n.N_.forEach((e,t)=>{qw(n,e)})})}function qB(n,e){return N(this,null,function*(){zM(n),Gw(n)?(n.q_.M_(e),zw(n)):n.q_.set("Unknown")})}function zB(n,e,t){return N(this,null,function*(){if(n.q_.set("Online"),e instanceof sf&&e.state===2&&e.cause)try{yield function(i,o){return N(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){O("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Tf(n,r)}else if(e instanceof ea?n.Q_.Ke(e):e instanceof of?n.Q_.He(e):n.Q_.We(e),!t.isEqual(ee.min()))try{let r=yield LM(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.N_.get(l);h&&o.N_.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.N_.get(u);if(!h)return;o.N_.set(u,h.withResumeToken(et.EMPTY_BYTE_STRING,h.snapshotVersion)),qM(o,u);let p=new ua(h.target,u,l,h.sequenceNumber);qw(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){O("RemoteStore","Failed to raise snapshot:",r),yield Tf(n,r)}})}function Tf(n,e,t){return N(this,null,function*(){if(!Ti(e))throw e;n.L_.add(1),yield wa(n),n.q_.set("Offline"),t||(t=()=>LM(n.localStore)),n.asyncQueue.enqueueRetryable(()=>N(this,null,function*(){O("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield jc(n)}))})}function GM(n,e){return e().catch(t=>Tf(n,t,e))}function Ea(n){return N(this,null,function*(){let e=U(n),t=Ci(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;GB(e);)try{let i=yield LB(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,WB(e,i)}catch(i){yield Tf(e,i)}WM(e)&&KM(e)})}function GB(n){return Si(n)&&n.O_.length<10}function WB(n,e){n.O_.push(e);let t=Ci(n);t.r_()&&t.V_&&t.m_(e.mutations)}function WM(n){return Si(n)&&!Ci(n).n_()&&n.O_.length>0}function KM(n){Ci(n).start()}function KB(n){return N(this,null,function*(){Ci(n).p_()})}function QB(n){return N(this,null,function*(){let e=Ci(n);for(let t of n.O_)e.m_(t.mutations)})}function YB(n,e,t){return N(this,null,function*(){let r=n.O_.shift(),i=o_.from(r,e,t);yield GM(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Ea(n)})}function ZB(n,e){return N(this,null,function*(){e&&Ci(n).V_&&(yield function(r,i){return N(this,null,function*(){if(function(s){return pM(s)&&s!==R.ABORTED}(i.code)){let o=r.O_.shift();Ci(r).s_(),yield GM(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Ea(r)}})}(n,e)),WM(n)&&KM(n)})}function _A(n,e){return N(this,null,function*(){let t=U(n);t.asyncQueue.verifyOperationInProgress(),O("RemoteStore","RemoteStore received new credentials");let r=Si(t);t.L_.add(3),yield wa(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield jc(t)})}function ew(n,e){return N(this,null,function*(){let t=U(n);e?(t.L_.delete(2),yield jc(t)):e||(t.L_.add(2),yield wa(t),t.q_.set("Unknown"))})}function Ia(n){return n.K_||(n.K_=function(t,r,i){let o=U(t);return o.w_(),new Q_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:$B.bind(null,n),Ro:HB.bind(null,n),mo:qB.bind(null,n),d_:zB.bind(null,n)}),n.B_.push(e=>N(this,null,function*(){e?(n.K_.s_(),Gw(n)?zw(n):n.q_.set("Unknown")):(yield n.K_.stop(),zM(n))}))),n.K_}function Ci(n){return n.U_||(n.U_=function(t,r,i){let o=U(t);return o.w_(),new Y_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:KB.bind(null,n),mo:ZB.bind(null,n),f_:QB.bind(null,n),g_:YB.bind(null,n)}),n.B_.push(e=>N(this,null,function*(){e?(n.U_.s_(),yield Ea(n)):(yield n.U_.stop(),n.O_.length>0&&(O("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var tw=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new lt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new k(R.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Da(n,e){if(Ze("AsyncQueue",`${e}: ${n}`),Ti(n))return new k(R.UNAVAILABLE,`${e}: ${n}`);throw n}var Sf=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||$.comparator(t.key,r.key):(t,r)=>$.comparator(t.key,r.key),this.keyedMap=sc(),this.sortedSet=new Ue(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Af=class{constructor(){this.W_=new Ue($.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):K():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},fa=class n{constructor(e,t,r,i,o,s,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,Sf.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Fc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var nw=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},rw=class{constructor(){this.queries=wA(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=U(t),o=i.queries;i.queries=wA(),o.forEach((s,a)=>{for(let u of a.j_)u.onError(r)})})(this,new k(R.ABORTED,"Firestore shutting down"))}};function wA(){return new sr(n=>eM(n),Fc)}function Ww(n,e){return N(this,null,function*(){let t=U(n),r=3,i=e.query,o=t.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new nw,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield t.onListen(i,!0);break;case 1:o.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=Da(s,`Initialization of query '${Ws(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&Qw(t)})}function Kw(n,e){return N(this,null,function*(){let t=U(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function JB(n,e){let t=U(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&Qw(t)}function XB(n,e,t){let r=U(n),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(t);r.queries.delete(e)}function Qw(n){n.Y_.forEach(e=>{e.next()})}var iw,EA;(EA=iw||(iw={})).ea="default",EA.Cache="cache";var xc=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new fa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=fa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==iw.Cache}};var ow=class{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}};var Mf=class{constructor(e){this.serializer=e}Es(e){return nr(this.serializer,e)}ds(e){return e.metadata.exists?IM(this.serializer,e.document,!1):at.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return Xe(e)}},sw=class{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=QM(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;let r=Ee.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){let t=new Map,r=new Mf(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Es(i.metadata.name);for(let s of i.metadata.queries){let a=(t.get(s)||ue()).add(o);t.set(s,a)}}return t}complete(){return N(this,null,function*(){let e=yield jB(this.localStore,new Mf(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(let r of this.queries)yield BB(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}})}};function QM(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var xf=class{constructor(e){this.key=e}},Rf=class{constructor(e){this.key=e}},Nf=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ue(),this.mutatedKeys=ue(),this.Aa=nM(e),this.Ra=new Sf(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new Af,i=t?t.Ra:this.Ra,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),y=Vc(this.query,p)?p:null,b=!!m&&this.mutatedKeys.has(m.key),A=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),M=!1;m&&y?m.data.isEqual(y.data)?b!==A&&(r.track({type:3,doc:y}),M=!0):this.ga(m,y)||(r.track({type:2,doc:y}),M=!0,(u&&this.Aa(y,u)>0||l&&this.Aa(y,l)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),M=!0):m&&!y&&(r.track({type:1,doc:m}),M=!0,(u||l)&&(a=!0)),M&&(y?(s=s.add(y),o=A?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((h,p)=>function(y,b){let A=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return K()}};return A(y)-A(b)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,l=u!==this.Ea;return this.Ea=u,s.length!==0||l?{snapshot:new fa(this.query,e.Ra,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Af,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=ue(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new Rf(r))}),this.da.forEach(r=>{e.has(r)||t.push(new xf(r))}),t}ba(e){this.Ta=e.Ts,this.da=ue();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return fa.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},aw=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},uw=class{constructor(e){this.key=e,this.va=!1}},cw=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new sr(a=>eM(a),Fc),this.Ma=new Map,this.xa=new Set,this.Oa=new Ue($.comparator),this.Na=new Map,this.La=new Sc,this.Ba={},this.ka=new Map,this.qa=ca.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function eU(n,e,t=!0){return N(this,null,function*(){let r=Wf(n),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield YM(r,e,t,!0),i})}function tU(n,e){return N(this,null,function*(){let t=Wf(n);yield YM(t,e,!0,!1)})}function YM(n,e,t,r){return N(this,null,function*(){let i=yield la(n.localStore,Ut(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield Yw(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&Gf(n.remoteStore,i),a})}function Yw(n,e,t,r,i){return N(this,null,function*(){n.Ka=(p,m,y)=>function(A,M,L,G){return N(this,null,function*(){let V=M.view.ma(L);V.ns&&(V=yield wf(A.localStore,M.query,!1).then(({documents:E})=>M.view.ma(E,V)));let Z=G&&G.targetChanges.get(M.targetId),ne=G&&G.targetMismatches.get(M.targetId)!=null,X=M.view.applyChanges(V,A.isPrimaryClient,Z,ne);return lw(A,M.targetId,X.wa),X.snapshot})}(n,p,m,y);let o=yield wf(n.localStore,e,!0),s=new Nf(e,o.Ts),a=s.ma(o.documents),u=Dc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,u);lw(n,t,l.wa);let h=new aw(e,t,s);return n.Fa.set(e,h),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot})}function nU(n,e,t){return N(this,null,function*(){let r=U(n),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!Fc(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield da(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&ha(r.remoteStore,i.targetId),pa(r,i.targetId)}).catch(bi))):(pa(r,i.targetId),yield da(r.localStore,i.targetId,!0))})}function rU(n,e){return N(this,null,function*(){let t=U(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),ha(t.remoteStore,r.targetId))})}function iU(n,e,t){return N(this,null,function*(){let r=eE(n);try{let i=yield function(s,a){let u=U(s),l=ze.now(),h=a.reduce((y,b)=>y.add(b.key),ue()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let b=on(),A=ue();return u.cs.getEntries(y,h).next(M=>{b=M,b.forEach((L,G)=>{G.isValidDocument()||(A=A.add(L))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,b)).next(M=>{p=M;let L=[];for(let G of a){let V=vB(G,p.get(G.key).overlayedDocument);V!=null&&L.push(new Ln(G.key,V,WA(V.value.mapValue),Ye.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,L,a)}).next(M=>{m=M;let L=M.applyToLocalDocumentSet(p,A);return u.documentOverlayCache.saveOverlays(y,M.batchId,L)})}).then(()=>({batchId:m.batchId,changes:iM(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Ba[s.currentUser.toKey()];l||(l=new Ue(ae)),l=l.insert(a,u),s.Ba[s.currentUser.toKey()]=l}(r,i.batchId,t),yield Or(r,i.changes),yield Ea(r.remoteStore)}catch(i){let o=Da(i,"Failed to persist write");t.reject(o)}})}function ZM(n,e){return N(this,null,function*(){let t=U(n);try{let r=yield VB(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Na.get(o);s&&(Y(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?Y(s.va):i.removedDocuments.size>0&&(Y(s.va),s.va=!1))}),yield Or(t,r,e)}catch(r){yield bi(r)}})}function IA(n,e,t){let r=U(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((o,s)=>{let a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=U(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.j_)m.Z_(a)&&(l=!0)}),l&&Qw(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function oU(n,e,t){return N(this,null,function*(){let r=U(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),o=i&&i.key;if(o){let s=new Ue($.comparator);s=s.insert(o,at.newNoDocument(o,ee.min()));let a=ue().add(o),u=new Ic(ee.min(),new Map,new Ue(ae),s,a);yield ZM(r,u),r.Oa=r.Oa.remove(o),r.Na.delete(e),Xw(r)}else yield da(r.localStore,e,!1).then(()=>pa(r,e,t)).catch(bi)})}function sU(n,e){return N(this,null,function*(){let t=U(n),r=e.batch.batchId;try{let i=yield FB(t.localStore,e);Jw(t,r,null),Zw(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Or(t,i)}catch(i){yield bi(i)}})}function aU(n,e,t){return N(this,null,function*(){let r=U(n);try{let i=yield function(s,a){let u=U(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(Y(p!==null),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);Jw(r,e,t),Zw(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Or(r,i)}catch(i){yield bi(i)}})}function uU(n,e){return N(this,null,function*(){let t=U(n);Si(t.remoteStore)||O("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=U(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(t.localStore);if(r===-1)return void e.resolve();let i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){let i=Da(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function Zw(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function Jw(n,e,t){let r=U(n),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function pa(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||JM(n,r)})}function JM(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(ha(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),Xw(n))}function lw(n,e,t){for(let r of t)r instanceof xf?(n.La.addReference(r.key,e),cU(n,r)):r instanceof Rf?(O("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||JM(n,r.key)):K()}function cU(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(O("SyncEngine","New document in limbo: "+t),n.xa.add(r),Xw(n))}function Xw(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new $(Ee.fromString(e)),r=n.qa.next();n.Na.set(r,new uw(t)),n.Oa=n.Oa.insert(t,r),Gf(n.remoteStore,new ua(Ut(_a(t.path)),r,"TargetPurposeLimboResolution",fn.oe))}}function Or(n,e,t){return N(this,null,function*(){let r=U(n),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{s.push(r.Ka(u,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=$_.Wi(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.Ca.d_(i),yield function(u,l){return N(this,null,function*(){let h=U(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>S.forEach(l,m=>S.forEach(m.$i,y=>h.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>S.forEach(m.Ui,y=>h.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!Ti(p))throw p;O("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let y=h.os.get(m),b=y.snapshotVersion,A=y.withLastLimboFreeSnapshotVersion(b);h.os=h.os.insert(m,A)}}})}(r.localStore,o))})}function lU(n,e){return N(this,null,function*(){let t=U(n);if(!t.currentUser.isEqual(e)){O("SyncEngine","User change. New user:",e.toKey());let r=yield VM(t.localStore,e);t.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(u=>{u.reject(new k(R.CANCELLED,s))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Or(t,r.hs)}})}function dU(n,e){let t=U(n),r=t.Na.get(e);if(r&&r.va)return ue().add(r.key);{let i=ue(),o=t.Ma.get(e);if(!o)return i;for(let s of o){let a=t.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function hU(n,e){return N(this,null,function*(){let t=U(n),r=yield wf(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&lw(t,e.targetId,i.wa),i})}function fU(n,e){return N(this,null,function*(){let t=U(n);return UM(t.localStore,e).then(r=>Or(t,r))})}function pU(n,e,t,r){return N(this,null,function*(){let i=U(n),o=yield function(a,u){let l=U(a),h=U(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",p=>h.Mn(p,u).next(m=>m?l.localDocuments.getDocuments(p,m):S.resolve(null)))}(i.localStore,e);o!==null?(t==="pending"?yield Ea(i.remoteStore):t==="acknowledged"||t==="rejected"?(Jw(i,e,r||null),Zw(i,e),function(a,u){U(U(a).mutationQueue).On(u)}(i.localStore,e)):K(),yield Or(i,o)):O("SyncEngine","Cannot apply mutation batch with id: "+e)})}function gU(n,e){return N(this,null,function*(){let t=U(n);if(Wf(t),eE(t),e===!0&&t.Qa!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield DA(t,r.toArray());t.Qa=!0,yield ew(t.remoteStore,!0);for(let o of i)Gf(t.remoteStore,o)}else if(e===!1&&t.Qa!==!1){let r=[],i=Promise.resolve();t.Ma.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(pa(t,s),da(t.localStore,s,!0))),ha(t.remoteStore,s)}),yield i,yield DA(t,r),function(s){let a=U(s);a.Na.forEach((u,l)=>{ha(a.remoteStore,l)}),a.La.pr(),a.Na=new Map,a.Oa=new Ue($.comparator)}(t),t.Qa=!1,yield ew(t.remoteStore,!1)}})}function DA(n,e,t){return N(this,null,function*(){let r=U(n),i=[],o=[];for(let s of e){let a,u=r.Ma.get(s);if(u&&u.length!==0){a=yield la(r.localStore,Ut(u[0]));for(let l of u){let h=r.Fa.get(l),p=yield hU(r,h);p.snapshot&&o.push(p.snapshot)}}else{let l=yield BM(r.localStore,s);a=yield la(r.localStore,l),yield Yw(r,XM(l),s,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(o),i})}function XM(n){return XA(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function mU(n){return function(t){return U(U(t).persistence).Qi()}(U(n).localStore)}function yU(n,e,t,r){return N(this,null,function*(){let i=U(n);if(i.Qa)return void O("SyncEngine","Ignoring unexpected query state notification.");let o=i.Ma.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{let s=yield UM(i.localStore,tM(o[0])),a=Ic.createSynthesizedRemoteEventForCurrentChange(e,t==="current",et.EMPTY_BYTE_STRING);yield Or(i,s,a);break}case"rejected":yield da(i.localStore,e,!0),pa(i,e,r);break;default:K()}})}function vU(n,e,t){return N(this,null,function*(){let r=Wf(n);if(r.Qa){for(let i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){O("SyncEngine","Adding an already active target "+i);continue}let o=yield BM(r.localStore,i),s=yield la(r.localStore,o);yield Yw(r,XM(o),s.targetId,!1,s.resumeToken),Gf(r.remoteStore,s)}for(let i of t)r.Ma.has(i)&&(yield da(r.localStore,i,!1).then(()=>{ha(r.remoteStore,i),pa(r,i)}).catch(bi))}})}function Wf(n){let e=U(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=ZM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=dU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=oU.bind(null,e),e.Ca.d_=JB.bind(null,e.eventManager),e.Ca.$a=XB.bind(null,e.eventManager),e}function eE(n){let e=U(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=sU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=aU.bind(null,e),e}function _U(n,e,t){let r=U(n);(function(o,s,a){return N(this,null,function*(){try{let u=yield s.getMetadata();if(yield function(y,b){let A=U(y),M=Xe(b.createTime);return A.persistence.runTransaction("hasNewerBundle","readonly",L=>A.Gr.getBundleMetadata(L,b.id)).then(L=>!!L&&L.createTime.compareTo(M)>=0)}(o.localStore,u))return yield s.close(),a._completeWith(function(y){return{taskState:"Success",documentsLoaded:y.totalDocuments,bytesLoaded:y.totalBytes,totalDocuments:y.totalDocuments,totalBytes:y.totalBytes}}(u)),Promise.resolve(new Set);a._updateProgress(QM(u));let l=new sw(u,o.localStore,s.serializer),h=yield s.Ua();for(;h;){let m=yield l.la(h);m&&a._updateProgress(m),h=yield s.Ua()}let p=yield l.complete();return yield Or(o,p.Ia,void 0),yield function(y,b){let A=U(y);return A.persistence.runTransaction("Save bundle","readwrite",M=>A.Gr.saveBundleMetadata(M,b))}(o.localStore,u),a._completeWith(p.progress),Promise.resolve(p.Pa)}catch(u){return Fn("SyncEngine",`Loading bundle failed with ${u}`),a._failWith(u),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var dw=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return N(this,null,function*(){this.serializer=Lc(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return FM(this.persistence,new _f,t.initialUser,this.serializer)}Ga(t){return new yf(vf.Zr,this.serializer)}Wa(t){return new Df}terminate(){return N(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var Pf=class n extends dw{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return N(this,null,function*(){yield Vp(n.prototype,this,"initialize").call(this,e),yield this.Ja.initialize(this,e),yield eE(this.Ja.syncEngine),yield Ea(this.Ja.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}za(e){return FM(this.persistence,new _f,e.initialUser,this.serializer)}ja(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new T_(r,e.asyncQueue,t)}Ha(e,t){let r=new Hv(t,this.persistence);return new $v(e.asyncQueue,r)}Ga(e){let t=Hw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Dn.withCacheSize(this.cacheSizeBytes):Dn.DEFAULT;return new U_(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,HM(),zh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new Df}},hw=class n extends Pf{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return N(this,null,function*(){yield Vp(n.prototype,this,"initialize").call(this,e);let t=this.Ja.syncEngine;this.sharedClientState instanceof hc&&(this.sharedClientState.syncEngine={no:pU.bind(null,t),ro:yU.bind(null,t),io:vU.bind(null,t),Qi:mU.bind(null,t),eo:fU.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.yi(r=>N(this,null,function*(){yield gU(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}Wa(e){let t=HM();if(!hc.D(t))throw new k(R.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=Hw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new hc(t,e.asyncQueue,r,e.clientId,e.initialUser)}},tE=(()=>{class n{initialize(t,r){return N(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>IA(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=lU.bind(null,this.syncEngine),yield ew(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new rw}()}createDatastore(t){let r=Lc(t.databaseInfo.databaseId),i=function(s){return new K_(s)}(t.databaseInfo);return function(s,a,u,l){return new Z_(s,a,u,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,u){return new X_(i,o,s,a,u)}(this.localStore,this.datastore,t.asyncQueue,r=>IA(this.syncEngine,r,0),function(){return Cf.D()?new Cf:new G_}())}createSyncEngine(t,r){return function(o,s,a,u,l,h,p){let m=new cw(o,s,a,u,l,h);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return N(this,null,function*(){var t,r;yield function(o){return N(this,null,function*(){let s=U(o);O("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield wa(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();function CA(n,e=10240){let t=0;return{read(){return N(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return N(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var ga=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ze("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var fw=class{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new lt,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}getMetadata(){return N(this,null,function*(){return this.metadata.promise})}Ua(){return N(this,null,function*(){return yield this.getMetadata(),this.tu()})}tu(){return N(this,null,function*(){let e=yield this.nu();if(e===null)return null;let t=this.eu.decode(e),r=Number(t);isNaN(r)&&this.ru(`length string (${t}) is not valid number`);let i=yield this.iu(r);return new ow(JSON.parse(i),e.length+r)})}su(){return this.buffer.findIndex(e=>e===123)}nu(){return N(this,null,function*(){for(;this.su()<0&&!(yield this.ou()););if(this.buffer.length===0)return null;let e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}iu(e){return N(this,null,function*(){for(;this.buffer.length<e;)(yield this.ou())&&this.ru("Reached the end of bundle when more is expected.");let t=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){return N(this,null,function*(){let e=yield this.Xa.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var pw=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new k(R.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(i,o){return N(this,null,function*(){let s=U(i),a={documents:o.map(p=>Cc(s.serializer,p))},u=yield s.Lo("BatchGetDocuments",s.serializer.databaseId,Ee.emptyPath(),a,o.length),l=new Map;u.forEach(p=>{let m=CB(s.serializer,p);l.set(m.key.toString(),m)});let h=[];return o.forEach(p=>{let m=l.get(p.toString());Y(!!m),h.push(m)}),h})}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Di(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=$.fromPath(r);this.mutations.push(new _c(i,this.precondition(i)))}),yield function(r,i){return N(this,null,function*(){let o=U(r),s={writes:i.map(a=>bc(o.serializer,a))};yield o.Mo("Commit",o.serializer.databaseId,Ee.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw K();t=ee.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new k(R.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ee.min())?Ye.exists(!1):Ye.updateTime(t):Ye.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ee.min()))throw new k(R.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ye.updateTime(t)}return Ye.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var gw=class{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this._u=r.maxAttempts,this.t_=new Mc(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(()=>N(this,null,function*(){let e=new pw(this.datastore),t=this.cu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})}))}cu(e){try{let t=this.updateFunction(e);return!kc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!pM(t)}return!1}};var mw=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=st.UNAUTHENTICATED,this.clientId=Wh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>N(this,null,function*(){O("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(O("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new lt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Da(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Rv(n,e){return N(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),O("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>N(this,null,function*(){r.isEqual(i)||(yield VM(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function bA(n,e){return N(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield nE(n);O("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>_A(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>_A(e.remoteStore,i)),n._onlineComponents=e})}function nE(n){return N(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){O("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Rv(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===R.FAILED_PRECONDITION||i.code===R.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Fn("Error using user provided cache. Falling back to memory cache: "+t),yield Rv(n,new dw)}}else O("FirestoreClient","Using default OfflineComponentProvider"),yield Rv(n,new dw);return n._offlineComponents})}function Kf(n){return N(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(O("FirestoreClient","Using user provided OnlineComponentProvider"),yield bA(n,n._uninitializedComponentsProvider._online)):(O("FirestoreClient","Using default OnlineComponentProvider"),yield bA(n,new tE))),n._onlineComponents})}function ex(n){return nE(n).then(e=>e.persistence)}function rE(n){return nE(n).then(e=>e.localStore)}function tx(n){return Kf(n).then(e=>e.remoteStore)}function iE(n){return Kf(n).then(e=>e.syncEngine)}function wU(n){return Kf(n).then(e=>e.datastore)}function ma(n){return N(this,null,function*(){let e=yield Kf(n),t=e.eventManager;return t.onListen=eU.bind(null,e.syncEngine),t.onUnlisten=nU.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=tU.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=rU.bind(null,e.syncEngine),t})}function EU(n){return n.asyncQueue.enqueue(()=>N(this,null,function*(){let e=yield ex(n),t=yield tx(n);return e.setNetworkEnabled(!0),function(i){let o=U(i);return o.L_.delete(0),jc(o)}(t)}))}function IU(n){return n.asyncQueue.enqueue(()=>N(this,null,function*(){let e=yield ex(n),t=yield tx(n);return e.setNetworkEnabled(!1),function(i){return N(this,null,function*(){let o=U(i);o.L_.add(0),yield wa(o),o.q_.set("Offline")})}(t)}))}function DU(n,e){let t=new lt;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o,s){return N(this,null,function*(){try{let a=yield function(l,h){let p=U(l);return p.persistence.runTransaction("read document","readonly",m=>p.localDocuments.getDocument(m,h))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new k(R.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let u=Da(a,`Failed to get document '${o} from cache`);s.reject(u)}})}(yield rE(n),e,t)})),t.promise}function nx(n,e,t={}){let r=new lt;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(o,s,a,u,l){let h=new ga({next:m=>{h.Za(),s.enqueueAndForget(()=>Kw(o,p));let y=m.docs.has(a);!y&&m.fromCache?l.reject(new k(R.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&u&&u.source==="server"?l.reject(new k(R.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new xc(_a(a.path),h,{includeMetadataChanges:!0,_a:!0});return Ww(o,p)}(yield ma(n),n.asyncQueue,e,t,r)})),r.promise}function CU(n,e){let t=new lt;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o,s){return N(this,null,function*(){try{let a=yield wf(i,o,!0),u=new Nf(o,a.Ts),l=u.ma(a.documents),h=u.applyChanges(l,!1);s.resolve(h.snapshot)}catch(a){let u=Da(a,`Failed to execute query '${o} against cache`);s.reject(u)}})}(yield rE(n),e,t)})),t.promise}function rx(n,e,t={}){let r=new lt;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(o,s,a,u,l){let h=new ga({next:m=>{h.Za(),s.enqueueAndForget(()=>Kw(o,p)),m.fromCache&&u.source==="server"?l.reject(new k(R.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new xc(a,h,{includeMetadataChanges:!0,_a:!0});return Ww(o,p)}(yield ma(n),n.asyncQueue,e,t,r)})),r.promise}function bU(n,e){let t=new ga(e);return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o){U(i).Y_.add(o),o.next()}(yield ma(n),t)})),()=>{t.Za(),n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o){U(i).Y_.delete(o)}(yield ma(n),t)}))}}function TU(n,e,t,r){let i=function(s,a){let u;return u=typeof s=="string"?mM().encode(s):s,function(h,p){return new fw(h,p)}(function(h,p){if(h instanceof Uint8Array)return CA(h,p);if(h instanceof ArrayBuffer)return CA(new Uint8Array(h),p);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),a)}(t,Lc(e));n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){_U(yield iE(n),i,r)}))}function SU(n,e){return n.asyncQueue.enqueue(()=>N(this,null,function*(){return function(r,i){let o=U(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Gr.getNamedQuery(s,i))}(yield rE(n),e)}))}function ix(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var TA=new Map;function oE(n,e,t){if(!t)throw new k(R.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function sE(n,e,t,r){if(e===!0&&r===!0)throw new k(R.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function SA(n){if(!$.isDocumentKey(n))throw new k(R.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function AA(n){if($.isDocumentKey(n))throw new k(R.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Qf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":K()}function Ce(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new k(R.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Qf(n);throw new k(R.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function ox(n,e){if(e<=0)throw new k(R.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var kf=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new k(R.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new k(R.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}sE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ix((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new k(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new k(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new k(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},bo=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kf({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new k(R.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new k(R.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kf(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Nv;switch(r.type){case"firstParty":return new Fv(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new k(R.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return N(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=TA.get(t);r&&(O("ComponentProvider","Removing Datastore"),TA.delete(t),r.terminate())}(this),Promise.resolve()}};function sx(n,e,t,r={}){var i;let o=(n=Ce(n,bo))._getSettings(),s=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&Fn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=st.MOCK_USER;else{a=PI(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new k(R.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new st(l)}n._authCredentials=new Pv(new Gh(a,u))}}var _t=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Ve=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new rr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},rr=class n extends _t{constructor(e,t,r){super(e,t,_a(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ve(this.firestore,null,new $(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function aE(n,e,...t){if(n=qe(n),oE("collection","path",e),n instanceof bo){let r=Ee.fromString(e,...t);return AA(r),new rr(n,null,r)}{if(!(n instanceof Ve||n instanceof rr))throw new k(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ee.fromString(e,...t));return AA(r),new rr(n.firestore,null,r)}}function ax(n,e){if(n=Ce(n,bo),oE("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new k(R.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new _t(n,null,function(r){return new Vn(Ee.emptyPath(),r)}(e))}function Bc(n,e,...t){if(n=qe(n),arguments.length===1&&(e=Wh.newId()),oE("doc","path",e),n instanceof bo){let r=Ee.fromString(e,...t);return SA(r),new Ve(n,null,new $(r))}{if(!(n instanceof Ve||n instanceof rr))throw new k(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ee.fromString(e,...t));return SA(r),new Ve(n.firestore,n instanceof rr?n.converter:null,new $(r))}}function uE(n,e){return n=qe(n),e=qe(e),(n instanceof Ve||n instanceof rr)&&(e instanceof Ve||e instanceof rr)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function cE(n,e){return n=qe(n),e=qe(e),n instanceof _t&&e instanceof _t&&n.firestore===e.firestore&&Fc(n._query,e._query)&&n.converter===e.converter}var Of=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Mc(this,"async_queue_retry"),this.Vu=()=>{let r=zh();r&&O("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=zh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=zh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new lt;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return N(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ti(e))throw e;O("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw Ze("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=tw.createAndSchedule(this,e,t,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&K()}verifyOperationInProgress(){}wu(){return N(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function yw(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var vw=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new lt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var ux=-1,Ge=class extends bo{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Of,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return N(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Of(e),this._firestoreClient=void 0,yield e}})}};function wt(n){if(n._terminated)throw new k(R.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||cx(n),n._firestoreClient}function cx(n){var e,t,r;let i=n._freezeSettings(),o=function(a,u,l,h){return new qv(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,ix(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new mw(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(n._componentsProvider))}function lx(n,e){Fn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return hx(n,tE.provider,{build:r=>new Pf(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function dx(n){return N(this,null,function*(){Fn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings();hx(n,tE.provider,{build:t=>new hw(t,e.cacheSizeBytes)})})}function hx(n,e,t){if((n=Ce(n,Ge))._firestoreClient||n._terminated)throw new k(R.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new k(R.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},cx(n)}function fx(n){if(n._initialized&&!n._terminated)throw new k(R.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new lt;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{yield function(r){return N(this,null,function*(){if(!mi.D())return Promise.resolve();let i=r+"main";yield mi.delete(i)})}(Hw(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function px(n){return function(t){let r=new lt;return t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return uU(yield iE(t),r)})),r.promise}(wt(n=Ce(n,Ge)))}function gx(n){return EU(wt(n=Ce(n,Ge)))}function mx(n){return IU(wt(n=Ce(n,Ge)))}function yx(n,e){let t=wt(n=Ce(n,Ge)),r=new vw;return TU(t,n._databaseId,e,r),r}function vx(n,e){return SU(wt(n=Ce(n,Ge)),e).then(t=>t?new _t(n,null,t.query):null)}var ar=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(et.fromBase64String(e))}catch(t){throw new k(R.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(et.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var jn=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new k(R.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Je(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Pr=class{constructor(e){this._methodName=e}};var To=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new k(R.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new k(R.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ae(this._lat,e._lat)||ae(this._long,e._long)}};var Rc=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var AU=/^__.*__$/,_w=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Ln(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ii(e,this.data,t,this.fieldTransforms)}},Ff=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ln(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function _x(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw K()}}var Vf=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Lf(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(_x(this.Cu)&&AU.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},ww=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Lc(e)}Qu(e,t,r,i=!1){return new Vf({Cu:e,methodName:t,qu:r,path:Je.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function xo(n){let e=n._freezeSettings(),t=Lc(n._databaseId);return new ww(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Yf(n,e,t,r,i,o={}){let s=n.Qu(o.merge||o.mergeFields?2:0,e,t,i);hE("Data must be an object, but it was:",s,r);let a=Ix(r,s),u,l;if(o.merge)u=new pn(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let m=bw(e,p,t);if(!s.contains(m))throw new k(R.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);Cx(h,m)||h.push(m)}u=new pn(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new _w(new St(a),u,l)}var Nc=class n extends Pr{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function wx(n,e,t){return new Vf({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var Ew=class n extends Pr{_toFieldTransform(e){return new Io(e.path,new wi)}isEqual(e){return e instanceof n}},Iw=class n extends Pr{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=wx(this,e,!0),r=this.Ku.map(o=>Ro(o,t)),i=new Rr(r);return new Io(e.path,i)}isEqual(e){return e instanceof n&&Bp(this.Ku,e.Ku)}},Dw=class n extends Pr{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=wx(this,e,!0),r=this.Ku.map(o=>Ro(o,t)),i=new Nr(r);return new Io(e.path,i)}isEqual(e){return e instanceof n&&Bp(this.Ku,e.Ku)}},Cw=class n extends Pr{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){let t=new Ei(e.serializer,aM(e.serializer,this.$u));return new Io(e.path,t)}isEqual(e){return e instanceof n&&this.$u===e.$u}};function lE(n,e,t,r){let i=n.Qu(1,e,t);hE("Data must be an object, but it was:",i,r);let o=[],s=St.empty();Mo(r,(u,l)=>{let h=fE(e,u,t);l=qe(l);let p=i.Nu(h);if(l instanceof Nc)o.push(h);else{let m=Ro(l,p);m!=null&&(o.push(h),s.set(h,m))}});let a=new pn(o);return new Ff(s,a,i.fieldTransforms)}function dE(n,e,t,r,i,o){let s=n.Qu(1,e,t),a=[bw(e,r,t)],u=[i];if(o.length%2!=0)throw new k(R.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(bw(e,o[m])),u.push(o[m+1]);let l=[],h=St.empty();for(let m=a.length-1;m>=0;--m)if(!Cx(l,a[m])){let y=a[m],b=u[m];b=qe(b);let A=s.Nu(y);if(b instanceof Nc)l.push(y);else{let M=Ro(b,A);M!=null&&(l.push(y),h.set(y,M))}}let p=new pn(l);return new Ff(h,p,s.fieldTransforms)}function Ex(n,e,t,r=!1){return Ro(t,n.Qu(r?4:3,e))}function Ro(n,e){if(Dx(n=qe(n)))return hE("Unsupported field value:",e,n),Ix(n,e);if(n instanceof Pr)return function(r,i){if(!_x(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=Ro(a,i.Lu(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=qe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return aM(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=ze.fromDate(r);return{timestampValue:aa(i.serializer,o)}}if(r instanceof ze){let o=new ze(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:aa(i.serializer,o)}}if(r instanceof To)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ar)return{bytesValue:yM(i.serializer,r._byteString)};if(r instanceof Ve){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Bw(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Rc)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.Bu("VectorValues must only contain numeric values.");return jw(a.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Qf(r)}`)}(n,e)}function Ix(n,e){let t={};return HA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Mo(n,(r,i)=>{let o=Ro(i,e.Mu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function Dx(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ze||n instanceof To||n instanceof ar||n instanceof Ve||n instanceof Pr||n instanceof Rc)}function hE(n,e,t){if(!Dx(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=Qf(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function bw(n,e,t){if((e=qe(e))instanceof jn)return e._internalPath;if(typeof e=="string")return fE(n,e);throw Lf("Field path arguments must be of type string or ",n,!1,void 0,t)}var MU=new RegExp("[~\\*/\\[\\]]");function fE(n,e,t){if(e.search(MU)>=0)throw Lf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new jn(...e.split("."))._internalPath}catch{throw Lf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Lf(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new k(R.INVALID_ARGUMENT,a+n+u)}function Cx(n,e){return n.some(t=>t.isEqual(e))}var So=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ve(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Tw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Zf("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Tw=class extends So{data(){return super.data()}};function Zf(n,e){return typeof e=="string"?fE(n,e):e instanceof jn?e._internalPath:e._delegate._internalPath}function bx(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new k(R.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Pc=class{},Ao=class extends Pc{};function Fr(n,e,...t){let r=[];e instanceof Pc&&r.push(e),r=r.concat(t),function(o){let s=o.filter(u=>u instanceof Sw).length,a=o.filter(u=>u instanceof jf).length;if(s>1||s>0&&a>0)throw new k(R.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var jf=class n extends Ao{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return Ox(e._query,t),new _t(e.firestore,e.converter,r_(e._query,t))}_parse(e){let t=xo(e.firestore);return function(o,s,a,u,l,h,p){let m;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new k(R.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){xA(p,h);let y=[];for(let b of p)y.push(MA(u,o,b));m={arrayValue:{values:y}}}else m=MA(u,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||xA(p,h),m=Ex(a,s,p,h==="in"||h==="not-in");return ve.create(l,h,m)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function Tx(n,e,t){let r=e,i=Zf("where",n);return jf._create(i,r,t)}var Sw=class n extends Pc{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Ae.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)Ox(s,u),s=r_(s,u)}(e._query,t),new _t(e.firestore,e.converter,r_(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Aw=class n extends Ao{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new k(R.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new k(R.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new wo(o,s)}(e._query,this._field,this._direction);return new _t(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new Vn(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function Sx(n,e="asc"){let t=e,r=Zf("orderBy",n);return Aw._create(r,t)}var Bf=class n extends Ao{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new _t(e.firestore,e.converter,rf(e._query,this._limit,this._limitType))}};function Ax(n){return ox("limit",n),Bf._create("limit",n,"F")}function Mx(n){return ox("limitToLast",n),Bf._create("limitToLast",n,"L")}var Uf=class n extends Ao{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=kx(e,this.type,this._docOrFields,this._inclusive);return new _t(e.firestore,e.converter,function(i,o){return new Vn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,t))}};function xx(...n){return Uf._create("startAt",n,!0)}function Rx(...n){return Uf._create("startAfter",n,!1)}var $f=class n extends Ao{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=kx(e,this.type,this._docOrFields,this._inclusive);return new _t(e.firestore,e.converter,function(i,o){return new Vn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,t))}};function Nx(...n){return $f._create("endBefore",n,!1)}function Px(...n){return $f._create("endAt",n,!0)}function kx(n,e,t,r){if(t[0]=qe(t[0]),t[0]instanceof So)return function(o,s,a,u,l){if(!u)throw new k(R.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let h=[];for(let p of Xs(o))if(p.field.isKeyField())h.push(_o(s,u.key));else{let m=u.data.field(p.field);if(qf(m))throw new k(R.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){let y=p.field.canonicalString();throw new k(R.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}h.push(m)}return new or(h,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=xo(n.firestore);return function(s,a,u,l,h,p){let m=s.explicitOrderBy;if(h.length>m.length)throw new k(R.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let y=[];for(let b=0;b<h.length;b++){let A=h[b];if(m[b].field.isKeyField()){if(typeof A!="string")throw new k(R.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof A}`);if(!Vw(s)&&A.indexOf("/")!==-1)throw new k(R.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${A}' contains a slash.`);let M=s.path.child(Ee.fromString(A));if(!$.isDocumentKey(M))throw new k(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${M}' is not because it contains an odd number of segments.`);let L=new $(M);y.push(_o(a,L))}else{let M=Ex(u,l,A);y.push(M)}}return new or(y,p)}(n._query,n.firestore._databaseId,i,e,t,r)}}function MA(n,e,t){if(typeof(t=qe(t))=="string"){if(t==="")throw new k(R.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Vw(e)&&t.indexOf("/")!==-1)throw new k(R.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Ee.fromString(t));if(!$.isDocumentKey(r))throw new k(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return _o(n,new $(r))}if(t instanceof Ve)return _o(n,t._key);throw new k(R.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Qf(t)}.`)}function xA(n,e){if(!Array.isArray(n)||n.length===0)throw new k(R.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Ox(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new k(R.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new k(R.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var ya=class{convertValue(e,t="none"){switch(vo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return He(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(yi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw K()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Mo(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>He(s.doubleValue));return new Rc(o)}convertGeoPoint(e){return new To(He(e.latitude),He(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Ow(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(mc(e));default:return null}}convertTimestamp(e){let t=xr(e);return new ze(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Ee.fromString(e);Y(AM(r));let i=new vi(r.get(1),r.get(3)),o=new $(r.popFirst(5));return i.isEqual(t)||Ze(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function Jf(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Mw=class extends ya{constructor(e){super(),this.firestore=e}convertBytes(e){return new ar(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ve(this.firestore,null,t)}};var Mr=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},bn=class extends So{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new pi(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Zf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},pi=class extends bn{data(e={}){return super.data(e)}},Bn=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Mr(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new pi(this._firestore,this._userDataWriter,r.key,r,new Mr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new k(R.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new pi(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Mr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new pi(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Mr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:xU(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function xU(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return K()}}function pE(n,e){return n instanceof bn&&e instanceof bn?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Bn&&e instanceof Bn&&n._firestore===e._firestore&&cE(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function Fx(n){n=Ce(n,Ve);let e=Ce(n.firestore,Ge);return nx(wt(e),n._key).then(t=>vE(e,n,t))}var kr=class extends ya{constructor(e){super(),this.firestore=e}convertBytes(e){return new ar(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ve(this.firestore,null,t)}};function Vx(n){n=Ce(n,Ve);let e=Ce(n.firestore,Ge),t=wt(e),r=new kr(e);return DU(t,n._key).then(i=>new bn(e,r,n._key,i,new Mr(i!==null&&i.hasLocalMutations,!0),n.converter))}function Lx(n){n=Ce(n,Ve);let e=Ce(n.firestore,Ge);return nx(wt(e),n._key,{source:"server"}).then(t=>vE(e,n,t))}function jx(n){n=Ce(n,_t);let e=Ce(n.firestore,Ge),t=wt(e),r=new kr(e);return bx(n._query),rx(t,n._query).then(i=>new Bn(e,r,n,i))}function Bx(n){n=Ce(n,_t);let e=Ce(n.firestore,Ge),t=wt(e),r=new kr(e);return CU(t,n._query).then(i=>new Bn(e,r,n,i))}function Ux(n){n=Ce(n,_t);let e=Ce(n.firestore,Ge),t=wt(e),r=new kr(e);return rx(t,n._query,{source:"server"}).then(i=>new Bn(e,r,n,i))}function gE(n,e,t){n=Ce(n,Ve);let r=Ce(n.firestore,Ge),i=Jf(n.converter,e,t);return Ca(r,[Yf(xo(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Ye.none())])}function mE(n,e,t,...r){n=Ce(n,Ve);let i=Ce(n.firestore,Ge),o=xo(i),s;return s=typeof(e=qe(e))=="string"||e instanceof jn?dE(o,"updateDoc",n._key,e,t,r):lE(o,"updateDoc",n._key,e),Ca(i,[s.toMutation(n._key,Ye.exists(!0))])}function $x(n){return Ca(Ce(n.firestore,Ge),[new Di(n._key,Ye.none())])}function Hx(n,e){let t=Ce(n.firestore,Ge),r=Bc(n),i=Jf(n.converter,e);return Ca(t,[Yf(xo(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Ye.exists(!1))]).then(()=>r)}function yE(n,...e){var t,r,i;n=qe(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||yw(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(yw(e[s])){let p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(n instanceof Ve)l=Ce(n.firestore,Ge),h=_a(n._key.path),u={next:p=>{e[s]&&e[s](vE(l,n,p))},error:e[s+1],complete:e[s+2]};else{let p=Ce(n,_t);l=Ce(p.firestore,Ge),h=p._query;let m=new kr(l);u={next:y=>{e[s]&&e[s](new Bn(l,m,p,y))},error:e[s+1],complete:e[s+2]},bx(n._query)}return function(m,y,b,A){let M=new ga(A),L=new xc(y,M,b);return m.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return Ww(yield ma(m),L)})),()=>{M.Za(),m.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return Kw(yield ma(m),L)}))}}(wt(l),h,a,u)}function qx(n,e){return bU(wt(n=Ce(n,Ge)),yw(e)?e:{next:e})}function Ca(n,e){return function(r,i){let o=new lt;return r.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return iU(yield iE(r),i,o)})),o.promise}(wt(n),e)}function vE(n,e,t){let r=t.docs.get(e._key),i=new kr(n);return new bn(n,i,e._key,r,new Mr(t.hasPendingWrites,t.fromCache),e.converter)}var RU={maxAttempts:5};var Hf=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=xo(e)}set(e,t,r){this._verifyNotCommitted();let i=hi(e,this._firestore),o=Jf(i.converter,t,r),s=Yf(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Ye.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=hi(e,this._firestore),s;return s=typeof(t=qe(t))=="string"||t instanceof jn?dE(this._dataReader,"WriteBatch.update",o._key,t,r,i):lE(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,Ye.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=hi(e,this._firestore);return this._mutations=this._mutations.concat(new Di(t._key,Ye.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new k(R.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function hi(n,e){if((n=qe(n)).firestore!==e)throw new k(R.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var xw=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=xo(t)}get(t){let r=hi(t,this._firestore),i=new Mw(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return K();let s=o[0];if(s.isFoundDocument())return new So(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new So(this._firestore,i,r._key,null,r.converter);throw K()})}set(t,r,i){let o=hi(t,this._firestore),s=Jf(o.converter,r,i),a=Yf(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(t,r,i,...o){let s=hi(t,this._firestore),a;return a=typeof(r=qe(r))=="string"||r instanceof jn?dE(this._dataReader,"Transaction.update",s._key,r,i,o):lE(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(t){let r=hi(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=hi(e,this._firestore),r=new kr(this._firestore);return super.get(e).then(i=>new bn(this._firestore,r,t._key,i._document,new Mr(!1,!1),t.converter))}};function zx(n,e,t){n=Ce(n,Ge);let r=Object.assign(Object.assign({},RU),t);return function(o){if(o.maxAttempts<1)throw new k(R.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let u=new lt;return o.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){let l=yield wU(o);new gw(o.asyncQueue,l,a,s,u).au()})),u.promise}(wt(n),i=>e(new xw(n,i)),r)}function Gx(){return new Nc("deleteField")}function Wx(){return new Ew("serverTimestamp")}function Kx(...n){return new Iw("arrayUnion",n)}function Qx(...n){return new Dw("arrayRemove",n)}function Yx(n){return new Cw("increment",n)}(function(e,t=!0){(function(i){va=i})(FI),Ka(new Ni("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Ge(new kv(r.getProvider("auth-internal")),new Lv(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new k(R.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vi(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Ur(AS,"4.7.3",e),Ur(AS,"4.7.3","esm2017")})();var NU="@firebase/firestore-compat",PU="0.3.38";function CE(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new k("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function Zx(){if(typeof Uint8Array>"u")throw new k("unimplemented","Uint8Arrays are not available in this environment.")}function Jx(){if(!qA())throw new k("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Xf=class n{constructor(e){this._delegate=e}static fromBase64String(e){return Jx(),new n(ar.fromBase64String(e))}static fromUint8Array(e){return Zx(),new n(ar.fromUint8Array(e))}toBase64(){return Jx(),this._delegate.toBase64()}toUint8Array(){return Zx(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function _E(n){return kU(n,["next","error","complete"])}function kU(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}var wE=class{enableIndexedDbPersistence(e,t){return lx(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return dx(e._delegate)}clearIndexedDbPersistence(e){return fx(e._delegate)}},ep=class{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof vi||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Fn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){sx(this._delegate,e,t,r)}enableNetwork(){return gx(this._delegate)}disableNetwork(){return mx(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,sE("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return px(this._delegate)}onSnapshotsInSync(e){return qx(this._delegate,e)}get app(){if(!this._appCompat)throw new k("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Sa(this,aE(this._delegate,e))}catch(t){throw $t(t,"collection()","Firestore.collection()")}}doc(e){try{return new ur(this,Bc(this._delegate,e))}catch(t){throw $t(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Oo(this,ax(this._delegate,e))}catch(t){throw $t(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return zx(this._delegate,t=>e(new tp(this,t)))}batch(){return wt(this._delegate),new np(new Hf(this._delegate,e=>Ca(this._delegate,e)))}loadBundle(e){return yx(this._delegate,e)}namedQuery(e){return vx(this._delegate,e).then(t=>t?new Oo(this,t):null)}},ba=class extends ya{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xf(new ar(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return ur.forKey(t,this.firestore,null)}};function OU(n){RA(n)}var tp=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new ba(e)}get(e){let t=No(e);return this._delegate.get(t).then(r=>new Po(this._firestore,new bn(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){let i=No(e);return r?(CE("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=No(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=No(e);return this._delegate.delete(t),this}},np=class{constructor(e){this._delegate=e}set(e,t,r){let i=No(e);return r?(CE("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=No(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=No(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},Ta=class n{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){let r=new pi(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ko(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let r=n.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new n(e,new ba(e),t),i.set(t,o)),o}};Ta.INSTANCES=new WeakMap;var ur=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ba(e)}static forPath(e,t,r){if(e.length%2!==0)throw new k("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new Ve(t._delegate,r,new $(e)))}static forKey(e,t,r){return new n(t,new Ve(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Sa(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Sa(this.firestore,aE(this._delegate,e))}catch(t){throw $t(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=qe(e),e instanceof Ve?uE(this._delegate,e):!1}set(e,t){t=CE("DocumentReference.set",t);try{return t?gE(this._delegate,e,t):gE(this._delegate,e)}catch(r){throw $t(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?mE(this._delegate,e):mE(this._delegate,e,t,...r)}catch(i){throw $t(i,"updateDoc()","DocumentReference.update()")}}delete(){return $x(this._delegate)}onSnapshot(...e){let t=Xx(e),r=eR(e,i=>new Po(this.firestore,new bn(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return yE(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=Vx(this._delegate):e?.source==="server"?t=Lx(this._delegate):t=Fx(this._delegate),t.then(r=>new Po(this.firestore,new bn(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Ta.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function $t(n,e,t){return n.message=n.message.replace(e,t),n}function Xx(n){for(let e of n)if(typeof e=="object"&&!_E(e))return e;return{}}function eR(n,e){var t,r;let i;return _E(n[0])?i=n[0]:_E(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var Po=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ur(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return pE(this._delegate,e._delegate)}},ko=class extends Po{data(e){let t=this._delegate.data(e);return this._delegate._converter||NA(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},Oo=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ba(e)}where(e,t,r){try{return new n(this.firestore,Fr(this._delegate,Tx(e,t,r)))}catch(i){throw $t(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,Fr(this._delegate,Sx(e,t)))}catch(r){throw $t(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,Fr(this._delegate,Ax(e)))}catch(t){throw $t(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,Fr(this._delegate,Mx(e)))}catch(t){throw $t(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,Fr(this._delegate,xx(...e)))}catch(t){throw $t(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,Fr(this._delegate,Rx(...e)))}catch(t){throw $t(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,Fr(this._delegate,Nx(...e)))}catch(t){throw $t(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,Fr(this._delegate,Px(...e)))}catch(t){throw $t(t,"endAt()","Query.endAt()")}}isEqual(e){return cE(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=Bx(this._delegate):e?.source==="server"?t=Ux(this._delegate):t=jx(this._delegate),t.then(r=>new Uc(this.firestore,new Bn(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let t=Xx(e),r=eR(e,i=>new Uc(this.firestore,new Bn(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return yE(this._delegate,t,r)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Ta.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},EE=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new ko(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},Uc=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Oo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new ko(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new EE(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new ko(this._firestore,r))})}isEqual(e){return pE(this._delegate,e._delegate)}},Sa=class n extends Oo{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new ur(this.firestore,e):null}doc(e){try{return e===void 0?new ur(this.firestore,Bc(this._delegate)):new ur(this.firestore,Bc(this._delegate,e))}catch(t){throw $t(t,"doc()","CollectionReference.doc()")}}add(e){return Hx(this._delegate,e).then(t=>new ur(this.firestore,t))}isEqual(e){return uE(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Ta.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function No(n){return Ce(n,Ve)}var IE=class n{constructor(...e){this._delegate=new jn(...e)}static documentId(){return new n(Je.keyField().canonicalString())}isEqual(e){return e=qe(e),e instanceof jn?this._delegate._internalPath.isEqual(e._internalPath):!1}};var DE=class n{constructor(e){this._delegate=e}static serverTimestamp(){let e=Wx();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=Gx();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=Kx(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=Qx(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=Yx(e);return t._methodName="FieldValue.increment",new n(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var FU={Firestore:ep,GeoPoint:To,Timestamp:ze,Blob:Xf,Transaction:tp,WriteBatch:np,DocumentReference:ur,DocumentSnapshot:Po,Query:Oo,QueryDocumentSnapshot:ko,QuerySnapshot:Uc,CollectionReference:Sa,FieldPath:IE,FieldValue:DE,setLogLevel:OU,CACHE_SIZE_UNLIMITED:ux};function VU(n,e){n.INTERNAL.registerComponent(new Ni("firestore-compat",t=>{let r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},FU)))}function LU(n){VU(n,(e,t)=>new ep(e,t,new wE)),n.registerVersion(NU,PU)}LU(un);function jU(n,e=eu){return new pe(t=>{let r;return e!=null?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}function tR(n,e){return jU(n,e)}function BU(n,e){return tR(n,e).pipe(Li(void 0),ru(),Q(t=>{let[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function SE(n,e){return tR(n,e).pipe(Q(t=>({payload:t,type:"query"})))}var rp=class{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let r=this.ref.collection(e),{ref:i,query:o}=iR(r,t);return new op(i,o,this.afs)}snapshotChanges(){return BU(this.ref,this.afs.schedulers.outsideAngular).pipe(rn)}valueChanges(e={}){return this.snapshotChanges().pipe(Q(({payload:t})=>e.idField?fe(P({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return De(this.ref.get(e)).pipe(rn)}};function ip(n,e){return SE(n,e).pipe(Li(void 0),ru(),Q(t=>{let[r,i]=t,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{let l=o.find(p=>p.doc.ref.isEqual(a.ref)),h=r?.payload.docs.find(p=>p.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&h&&JSON.stringify(h.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),s}))}function nR(n,e,t){return ip(n,t).pipe(Vi((r,i)=>UU(r,i.map(o=>o.payload),e),[]),cg(),Q(r=>r.map(i=>({type:i.type,payload:i}))))}function UU(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=$U(n,r))}),n}function bE(n,e,t,...r){let i=n.slice();return i.splice(e,t,...r),i}function $U(n,e){switch(e.type){case"added":if(!(n[e.newIndex]&&n[e.newIndex].doc.ref.isEqual(e.doc.ref)))return bE(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return bE(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return bE(n,e.oldIndex,1);break}return n}function rR(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var op=class{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=ip(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(Q(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Li(void 0),ru(),vt(([r,i])=>i.length>0||!r),Q(([,r])=>r),rn)}auditTrail(e){return this.stateChanges(e).pipe(Vi((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=rR(e);return nR(this.query,t,this.afs.schedulers.outsideAngular).pipe(rn)}valueChanges(e={}){return SE(this.query,this.afs.schedulers.outsideAngular).pipe(Q(t=>t.payload.docs.map(r=>e.idField?fe(P({},r.data()),{[e.idField]:r.id}):r.data())),rn)}get(e){return De(this.query.get(e)).pipe(rn)}add(e){return this.ref.add(e)}doc(e){return new rp(this.ref.doc(e),this.afs)}},TE=class{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?ip(this.query,this.afs.schedulers.outsideAngular).pipe(rn):ip(this.query,this.afs.schedulers.outsideAngular).pipe(Q(t=>t.filter(r=>e.indexOf(r.type)>-1)),vt(t=>t.length>0),rn)}auditTrail(e){return this.stateChanges(e).pipe(Vi((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=rR(e);return nR(this.query,t,this.afs.schedulers.outsideAngular).pipe(rn)}valueChanges(e={}){return SE(this.query,this.afs.schedulers.outsideAngular).pipe(Q(r=>r.payload.docs.map(i=>e.idField?P({[e.idField]:i.id},i.data()):i.data())),rn)}get(e){return De(this.query.get(e)).pipe(rn)}},HU=new W("angularfire2.enableFirestorePersistence"),qU=new W("angularfire2.firestore.persistenceSettings"),zU=new W("angularfire2.firestore.settings"),GU=new W("angularfire2.firestore.use-emulator");function iR(n,e=t=>t){return{query:e(n),ref:n}}var sn=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,o,s,a,u,l,h,p,m,y,b,A,M,L,G){this.schedulers=u;let V=ec(t,a,r),Z=h;p&&wv(V,a,m,b,A,M,y,L),[this.firestore,this.persistenceEnabled$]=kh(`${V.name}.firestore`,"AngularFirestore",V.name,()=>{let ne=a.runOutsideAngular(()=>V.firestore());if(o&&ne.settings(o),Z&&ne.useEmulator(...Z),i&&!no(s)){let X=()=>{try{return De(ne.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(E){return typeof console<"u"&&console.warn(E),te(!1)}};return[ne,a.runOutsideAngular(X)]}else return[ne,te(!1)]},[o,Z,i])}collection(t,r){let i;typeof t=="string"?i=this.firestore.collection(t):i=t;let{ref:o,query:s}=iR(i,r),a=this.schedulers.ngZone.run(()=>o);return new op(a,s,this)}collectionGroup(t,r){let i=r||(s=>s),o=this.firestore.collectionGroup(t);return new TE(i(o),this)}doc(t){let r;typeof t=="string"?r=this.firestore.doc(t):r=t;let i=this.schedulers.ngZone.run(()=>r);return new rp(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(F(js),F(Bs,8),F(HU,8),F(zU,8),F(Qt),F(_e),F(Rh),F(qU,8),F(GU,8),F(bS,8),F(pv,8),F(gv,8),F(mv,8),F(yv,8),F(vv,8),F(_v,8),F(uo,8))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var oR=(()=>{class n{constructor(t){this.db=t,this.dbPath="/header",this.headerRef=t.collection(this.dbPath)}getHeader(){return this.headerRef}createHeader(t){return this.headerRef.add(P({},t))}deleteHeader(t){return this.headerRef.doc(t).delete()}static{this.\u0275fac=function(r){return new(r||n)(F(sn))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function KU(n,e){if(n&1){let t=Yt();q(0,"div",14)(1,"span"),me(2),z(),q(3,"button",15),ke("click",function(){let i=Wt(t).$implicit,o=Zt();return Kt(o.deleteJob(i.id))}),me(4,"delete"),z()()}if(n&2){let t=e.$implicit;re(2),Zi(t.name)}}var sR=(()=>{class n{constructor(t){this.headerService=t,this.itemCount=0,this.btntxt="Agregar",this.goalText="",this.header=[],this.myHeader=new Mh,console.log(this.headerService),this.headerService.getHeader().snapshotChanges().pipe(Q(r=>r.map(i=>P({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.header=r,console.log(this.header)})}AgregarJob(){console.log(this.myHeader),this.headerService.createHeader(this.myHeader).then(()=>{console.log("Created new item successfully!")})}deleteJob(t){this.headerService.deleteHeader(t).then(()=>{console.log("delete item successfully!")}),console.log(t)}static{this.\u0275fac=function(r){return new(r||n)(se(oR))}}static{this.\u0275cmp=ft({type:n,selectors:[["app-admin-header"]],decls:24,vars:9,consts:[[1,"container","color-dark"],[1,"col"],[1,"section-title"],[1,"container","color-light"],["type","text","name","name","placeholder","name",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","goalLife","placeholder","goalLife",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","photo","placeholder","photo (url)",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","email","placeholder","email (email@domain.com)",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","phoneNumber","placeholder","phoneNumber (999-999-9999)",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","location","placeholder","location (city, country)",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","socialNetwork","placeholder","socialNetwork (user@site)",1,"txt",3,"ngModelChange","ngModel"],["type","submit",1,"btn",3,"click","value"],[1,"o-list"],["class","o-item",4,"ngFor","ngForOf"],[1,"o-item"],[1,"delete-btn",3,"click"]],template:function(r,i){r&1&&(q(0,"div",0)(1,"div",1)(2,"p",2),me(3,"header items"),z()()(),q(4,"div",3)(5,"div",1)(6,"form")(7,"input",4),xe("ngModelChange",function(s){return Oe(i.myHeader.name,s)||(i.myHeader.name=s),s}),z(),Te(8,"br"),q(9,"input",5),xe("ngModelChange",function(s){return Oe(i.myHeader.goalLife,s)||(i.myHeader.goalLife=s),s}),z(),Te(10,"br"),q(11,"input",6),xe("ngModelChange",function(s){return Oe(i.myHeader.photoUrl,s)||(i.myHeader.photoUrl=s),s}),z(),Te(12,"br"),q(13,"input",7),xe("ngModelChange",function(s){return Oe(i.myHeader.email,s)||(i.myHeader.email=s),s}),z(),Te(14,"br"),q(15,"input",8),xe("ngModelChange",function(s){return Oe(i.myHeader.phoneNumber,s)||(i.myHeader.phoneNumber=s),s}),z(),Te(16,"br"),q(17,"input",9),xe("ngModelChange",function(s){return Oe(i.myHeader.location,s)||(i.myHeader.location=s),s}),z(),Te(18,"br"),q(19,"input",10),xe("ngModelChange",function(s){return Oe(i.myHeader.socialNetwork,s)||(i.myHeader.socialNetwork=s),s}),z(),Te(20,"br"),q(21,"input",11),ke("click",function(){return i.AgregarJob()}),z()()(),q(22,"div",12),Ot(23,KU,5,1,"div",13),z()()),r&2&&(re(7),Me("ngModel",i.myHeader.name),re(2),Me("ngModel",i.myHeader.goalLife),re(2),Me("ngModel",i.myHeader.photoUrl),re(2),Me("ngModel",i.myHeader.email),re(2),Me("ngModel",i.myHeader.phoneNumber),re(2),Me("ngModel",i.myHeader.location),re(2),Me("ngModel",i.myHeader.socialNetwork),re(2),Vt("value",i.btntxt),re(2),Ft("ngForOf",i.header))},dependencies:[Xt,nn,bt,en,tn,jt,Lt],styles:[".container[_ngcontent-%COMP%]{border-radius:10px;margin-bottom:2rem;background-color:var(--color-white);box-shadow:0 2px 6px #0000000d}-light[_ngcontent-%COMP%]{background-color:#fff}.section-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:#444;margin-bottom:1rem}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.txt[_ngcontent-%COMP%]{padding:.75rem;font-size:1rem;border:1px solid #ccc;border-radius:8px;width:100%;box-sizing:border-box}.btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;background-color:#444;color:#fff;border:none;border-radius:8px;font-size:1rem;cursor:pointer;transition:background-color .2s ease}.btn[_ngcontent-%COMP%]:hover{background-color:#222}.o-list[_ngcontent-%COMP%]{margin-top:2rem;display:flex;flex-direction:column;gap:.75rem}.o-item[_ngcontent-%COMP%]{background-color:#f0f0f0;padding:.75rem 1rem;border-radius:8px;display:flex;justify-content:space-between;align-items:center;font-size:1rem;color:#333}.delete-btn[_ngcontent-%COMP%]{background-color:transparent;border:1px solid #ccc;color:#b00020;padding:.4rem 1rem;border-radius:6px;font-size:.9rem;cursor:pointer;transition:all .2s ease}.delete-btn[_ngcontent-%COMP%]:hover{background-color:#ffeaea;border-color:#b00020}"]})}}return n})();var sp=class{constructor(){this.endDate="",this.location="",this.position="",this.company="",this.accomplishments=""}};var aR=(()=>{class n{constructor(t){this.db=t,this.dbPath="/Work-experience",this.workExperienceRef=t.collection(this.dbPath)}getWorkExperience(){return this.workExperienceRef}createWorkExperience(t){return this.workExperienceRef.add(P({},t))}deleteWorkExperience(t){return this.workExperienceRef.doc(t).delete()}static{this.\u0275fac=function(r){return new(r||n)(F(sn))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function YU(n,e){if(n&1){let t=Yt();q(0,"div",13)(1,"span"),me(2),z(),q(3,"button",14),ke("click",function(){let i=Wt(t).$implicit,o=Zt();return Kt(o.deleteJob(i.id))}),me(4,"delete"),z()()}if(n&2){let t=e.$implicit;re(2),Ji("",t.company," - ",t.position,"")}}var uR=(()=>{class n{constructor(t){this.workExperienceService=t,this.itemCount=0,this.btntxt="Agregar",this.goalText="",this.workExperience=[],this.myWorkExperience=new sp,console.log(this.workExperienceService),this.workExperienceService.getWorkExperience().snapshotChanges().pipe(Q(r=>r.map(i=>P({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.workExperience=r,console.log(this.myWorkExperience)})}AgregarJob(){console.log(this.myWorkExperience),this.workExperienceService.createWorkExperience(this.myWorkExperience).then(()=>{console.log("Created new item successfully!")})}deleteJob(t){this.workExperienceService.deleteWorkExperience(t).then(()=>{console.log("delete item successfully!")}),console.log(t)}static{this.\u0275fac=function(r){return new(r||n)(se(aR))}}static{this.\u0275cmp=ft({type:n,selectors:[["app-admin-workexperience"]],decls:22,vars:8,consts:[[1,"container","color-dark"],[1,"col"],[1,"section-title"],[1,"container","color-light"],["type","text","name","startDate","placeholder","start date (mm/yyyy)",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","endDate","placeholder","end date (mm/yyyy)",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","location","placeholder","location (city, country)",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","position","placeholder","position",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","company","placeholder","company",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","accomplishments","placeholder","accomplishments",1,"txt",3,"ngModelChange","ngModel"],["type","submit",1,"btn",3,"click","value"],[1,"o-list"],["class","o-item",4,"ngFor","ngForOf"],[1,"o-item"],[1,"delete-btn",3,"click"]],template:function(r,i){r&1&&(q(0,"div",0)(1,"div",1)(2,"p",2),me(3,"work-experience items"),z()()(),q(4,"div",3)(5,"div",1)(6,"form")(7,"input",4),xe("ngModelChange",function(s){return Oe(i.myWorkExperience.startDate,s)||(i.myWorkExperience.startDate=s),s}),z(),Te(8,"br"),q(9,"input",5),xe("ngModelChange",function(s){return Oe(i.myWorkExperience.endDate,s)||(i.myWorkExperience.endDate=s),s}),z(),Te(10,"br"),q(11,"input",6),xe("ngModelChange",function(s){return Oe(i.myWorkExperience.location,s)||(i.myWorkExperience.location=s),s}),z(),Te(12,"br"),q(13,"input",7),xe("ngModelChange",function(s){return Oe(i.myWorkExperience.position,s)||(i.myWorkExperience.position=s),s}),z(),Te(14,"br"),q(15,"input",8),xe("ngModelChange",function(s){return Oe(i.myWorkExperience.company,s)||(i.myWorkExperience.company=s),s}),z(),Te(16,"br"),q(17,"input",9),xe("ngModelChange",function(s){return Oe(i.myWorkExperience.accomplishments,s)||(i.myWorkExperience.accomplishments=s),s}),z(),Te(18,"br"),q(19,"input",10),ke("click",function(){return i.AgregarJob()}),z()()(),q(20,"div",11),Ot(21,YU,5,2,"div",12),z()()),r&2&&(re(7),Me("ngModel",i.myWorkExperience.startDate),re(2),Me("ngModel",i.myWorkExperience.endDate),re(2),Me("ngModel",i.myWorkExperience.location),re(2),Me("ngModel",i.myWorkExperience.position),re(2),Me("ngModel",i.myWorkExperience.company),re(2),Me("ngModel",i.myWorkExperience.accomplishments),re(2),Vt("value",i.btntxt),re(2),Ft("ngForOf",i.workExperience))},dependencies:[Xt,nn,bt,en,tn,jt,Lt],styles:[".container[_ngcontent-%COMP%]{border-radius:10px;margin-bottom:2rem;background-color:var(--color-white);box-shadow:0 2px 6px #0000000d}-light[_ngcontent-%COMP%]{background-color:#fff}.section-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:#444;margin-bottom:1rem}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.txt[_ngcontent-%COMP%]{padding:.75rem;font-size:1rem;border:1px solid #ccc;border-radius:8px;width:100%;box-sizing:border-box}.btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;background-color:#444;color:#fff;border:none;border-radius:8px;font-size:1rem;cursor:pointer;transition:background-color .2s ease}.btn[_ngcontent-%COMP%]:hover{background-color:#222}.o-list[_ngcontent-%COMP%]{margin-top:2rem;display:flex;flex-direction:column;gap:.75rem}.o-item[_ngcontent-%COMP%]{background-color:#f0f0f0;padding:.75rem 1rem;border-radius:8px;display:flex;justify-content:space-between;align-items:center;font-size:1rem;color:#333}.delete-btn[_ngcontent-%COMP%]{background-color:transparent;border:1px solid #ccc;color:#b00020;padding:.4rem 1rem;border-radius:6px;font-size:.9rem;cursor:pointer;transition:all .2s ease}.delete-btn[_ngcontent-%COMP%]:hover{background-color:#ffeaea;border-color:#b00020}"]})}}return n})();var ap=class{constructor(){this.NivelAcademico=""}};var cR=(()=>{class n{constructor(t){this.db=t,this.dbPath="/Education",this.educationRef=t.collection(this.dbPath)}getEducation(){return this.educationRef}createEducation(t){return this.educationRef.add(P({},t))}deleteEducation(t){return this.educationRef.doc(t).delete()}static{this.\u0275fac=function(r){return new(r||n)(F(sn))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function JU(n,e){if(n&1){let t=Yt();q(0,"div",9)(1,"span"),me(2),z(),q(3,"button",10),ke("click",function(){let i=Wt(t).$implicit,o=Zt();return Kt(o.deleteJob(i.id))}),me(4,"delete"),z()()}if(n&2){let t=e.$implicit;re(2),Ji("",t.Instituto," - ",t.NivelAcademico,"")}}var lR=(()=>{class n{constructor(t){this.educationService=t,this.itemCount=0,this.btntxt="Agregar",this.goalText="",this.education=[],this.myEducation=new ap,console.log(this.educationService),this.educationService.getEducation().snapshotChanges().pipe(Q(r=>r.map(i=>P({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.education=r,console.log(this.education)})}AgregarJob(){console.log(this.myEducation),this.educationService.createEducation(this.myEducation).then(()=>{console.log("Created new item successfully!")})}deleteJob(t){this.educationService.deleteEducation(t).then(()=>{console.log("delete item successfully!")}),console.log(t)}static{this.\u0275fac=function(r){return new(r||n)(se(cR))}}static{this.\u0275cmp=ft({type:n,selectors:[["app-admin-education"]],decls:14,vars:4,consts:[[1,"container","color-dark"],[1,"col"],[1,"section-title"],[1,"container","color-light"],["type","text","name","startDate","placeholder","Instituto",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","endDate","placeholder","Nivel academico",1,"txt",3,"ngModelChange","ngModel"],["type","submit",1,"btn",3,"click","value"],[1,"education-list"],["class","education-item",4,"ngFor","ngForOf"],[1,"education-item"],[1,"delete-btn",3,"click"]],template:function(r,i){r&1&&(q(0,"div",0)(1,"div",1)(2,"p",2),me(3,"education items"),z()()(),q(4,"div",3)(5,"div",1)(6,"form")(7,"input",4),xe("ngModelChange",function(s){return Oe(i.myEducation.Instituto,s)||(i.myEducation.Instituto=s),s}),z(),Te(8,"br"),q(9,"input",5),xe("ngModelChange",function(s){return Oe(i.myEducation.NivelAcademico,s)||(i.myEducation.NivelAcademico=s),s}),z(),Te(10,"br"),q(11,"input",6),ke("click",function(){return i.AgregarJob()}),z()()(),q(12,"div",7),Ot(13,JU,5,2,"div",8),z()()),r&2&&(re(7),Me("ngModel",i.myEducation.Instituto),re(2),Me("ngModel",i.myEducation.NivelAcademico),re(2),Vt("value",i.btntxt),re(2),Ft("ngForOf",i.education))},dependencies:[Xt,nn,bt,en,tn,jt,Lt],styles:[".container[_ngcontent-%COMP%]{padding:2rem;border-radius:10px;margin-bottom:2rem;background-color:var(--color-white);box-shadow:0 2px 6px #0000000d}.color-dark[_ngcontent-%COMP%]{background-color:#f5f5f5}.color-light[_ngcontent-%COMP%]{background-color:#fff}.col[_ngcontent-%COMP%]{margin-bottom:1.5rem}.section-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:#444;margin-bottom:1rem}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.txt[_ngcontent-%COMP%]{padding:.75rem;font-size:1rem;border:1px solid #ccc;border-radius:8px;width:100%;box-sizing:border-box}.btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;background-color:#444;color:#fff;border:none;border-radius:8px;font-size:1rem;cursor:pointer;transition:background-color .2s ease}.btn[_ngcontent-%COMP%]:hover{background-color:#222}.education-list[_ngcontent-%COMP%]{margin-top:2rem;display:flex;flex-direction:column;gap:.75rem}.education-item[_ngcontent-%COMP%]{background-color:#f0f0f0;padding:.75rem 1rem;border-radius:8px;display:flex;justify-content:space-between;align-items:center;font-size:1rem;color:#333}.delete-btn[_ngcontent-%COMP%]{background-color:transparent;border:1px solid #ccc;color:#b00020;padding:.4rem 1rem;border-radius:6px;font-size:.9rem;cursor:pointer;transition:all .2s ease}.delete-btn[_ngcontent-%COMP%]:hover{background-color:#ffeaea;border-color:#b00020}"]})}}return n})();var up=class{};var dR=(()=>{class n{constructor(t){this.db=t,this.dbPath="/Certificates",this.certificatesRef=t.collection(this.dbPath)}getCertificates(){return this.certificatesRef}createCertificates(t){return this.certificatesRef.add(P({},t))}deleteCertificates(t){return this.certificatesRef.doc(t).delete()}static{this.\u0275fac=function(r){return new(r||n)(F(sn))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function e$(n,e){if(n&1){let t=Yt();q(0,"div",8)(1,"span"),me(2),z(),q(3,"button",9),ke("click",function(){let i=Wt(t).$implicit,o=Zt();return Kt(o.deleteJob(i.id))}),me(4,"delete"),z()()}if(n&2){let t=e.$implicit;re(2),qd("",t.NombreCertificado," ")}}var hR=(()=>{class n{constructor(t){this.certificatesServices=t,this.itemCount=0,this.btntxt="Agregar",this.goalText="",this.certificates=[],this.myCertificates=new up,console.log(this.certificatesServices),this.certificatesServices.getCertificates().snapshotChanges().pipe(Q(r=>r.map(i=>P({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.certificates=r,console.log(this.certificates)})}AgregarJob(){console.log(this.myCertificates),this.certificatesServices.createCertificates(this.myCertificates).then(()=>{console.log("Created new item successfully!")})}deleteJob(t){this.certificatesServices.deleteCertificates(t).then(()=>{console.log("delete item successfully!")}),console.log(t)}static{this.\u0275fac=function(r){return new(r||n)(se(dR))}}static{this.\u0275cmp=ft({type:n,selectors:[["app-admin-certificates"]],decls:12,vars:3,consts:[[1,"container","color-dark"],[1,"col"],[1,"section-title"],[1,"container","color-light"],["type","text","name","titulo","placeholder","titulo",1,"txt",3,"ngModelChange","ngModel"],["type","submit",1,"btn",3,"click","value"],[1,"o-list"],["class","o-item",4,"ngFor","ngForOf"],[1,"o-item"],[1,"delete-btn",3,"click"]],template:function(r,i){r&1&&(q(0,"div",0)(1,"div",1)(2,"p",2),me(3,"certificates items"),z()()(),q(4,"div",3)(5,"div",1)(6,"form")(7,"input",4),xe("ngModelChange",function(s){return Oe(i.myCertificates.NombreCertificado,s)||(i.myCertificates.NombreCertificado=s),s}),z(),Te(8,"br"),q(9,"input",5),ke("click",function(){return i.AgregarJob()}),z()()(),q(10,"div",6),Ot(11,e$,5,1,"div",7),z()()),r&2&&(re(7),Me("ngModel",i.myCertificates.NombreCertificado),re(2),Vt("value",i.btntxt),re(2),Ft("ngForOf",i.certificates))},dependencies:[Xt,nn,bt,en,tn,jt,Lt],styles:[".container[_ngcontent-%COMP%]{border-radius:10px;margin-bottom:2rem;background-color:var(--color-white);box-shadow:0 2px 6px #0000000d}-light[_ngcontent-%COMP%]{background-color:#fff}.section-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:#444;margin-bottom:1rem}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.txt[_ngcontent-%COMP%]{padding:.75rem;font-size:1rem;border:1px solid #ccc;border-radius:8px;width:100%;box-sizing:border-box}.btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;background-color:#444;color:#fff;border:none;border-radius:8px;font-size:1rem;cursor:pointer;transition:background-color .2s ease}.btn[_ngcontent-%COMP%]:hover{background-color:#222}.o-list[_ngcontent-%COMP%]{margin-top:2rem;display:flex;flex-direction:column;gap:.75rem}.o-item[_ngcontent-%COMP%]{background-color:#f0f0f0;padding:.75rem 1rem;border-radius:8px;display:flex;justify-content:space-between;align-items:center;font-size:1rem;color:#333}.delete-btn[_ngcontent-%COMP%]{background-color:transparent;border:1px solid #ccc;color:#b00020;padding:.4rem 1rem;border-radius:6px;font-size:.9rem;cursor:pointer;transition:all .2s ease}.delete-btn[_ngcontent-%COMP%]:hover{background-color:#ffeaea;border-color:#b00020}"]})}}return n})();var cp=class{};var fR=(()=>{class n{constructor(t){this.db=t,this.dbPath="/Skills",this.skillsRef=t.collection(this.dbPath)}getSkills(){return this.skillsRef}createSkills(t){return this.skillsRef.add(P({},t))}deleteSkills(t){return this.skillsRef.doc(t).delete()}static{this.\u0275fac=function(r){return new(r||n)(F(sn))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function n$(n,e){if(n&1){let t=Yt();q(0,"div",9)(1,"span"),me(2),z(),q(3,"button",10),ke("click",function(){let i=Wt(t).$implicit,o=Zt();return Kt(o.deleteJob(i.id))}),me(4,"delete"),z()()}if(n&2){let t=e.$implicit;re(2),Ji("",t.lenguajes," - ",t.tecnologia,"")}}var pR=(()=>{class n{constructor(t){this.skillsService=t,this.itemCount=0,this.btntxt="Agregar",this.goalText="",this.skills=[],this.mySkills=new cp,console.log(this.skillsService),this.skillsService.getSkills().snapshotChanges().pipe(Q(r=>r.map(i=>P({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.skills=r,console.log(this.skills)})}AgregarJob(){console.log(this.mySkills),this.skillsService.createSkills(this.mySkills).then(()=>{console.log("Created new item successfully!")})}deleteJob(t){this.skillsService.deleteSkills(t).then(()=>{console.log("delete item successfully!")}),console.log(t)}static{this.\u0275fac=function(r){return new(r||n)(se(fR))}}static{this.\u0275cmp=ft({type:n,selectors:[["app-admin-skills"]],decls:14,vars:4,consts:[[1,"container","color-dark"],[1,"col"],[1,"section-title"],[1,"container","color-light"],["type","text","name","skill","placeholder","skill",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","porcentage","placeholder","Lenguaje ",1,"txt",3,"ngModelChange","ngModel"],["type","submit",1,"btn",3,"click","value"],[1,"o-list"],["class","o-item",4,"ngFor","ngForOf"],[1,"o-item"],[1,"delete-btn",3,"click"]],template:function(r,i){r&1&&(q(0,"div",0)(1,"div",1)(2,"p",2),me(3,"skills items"),z()()(),q(4,"div",3)(5,"div",1)(6,"form")(7,"input",4),xe("ngModelChange",function(s){return Oe(i.mySkills.lenguajes,s)||(i.mySkills.lenguajes=s),s}),z(),Te(8,"br"),q(9,"input",5),xe("ngModelChange",function(s){return Oe(i.mySkills.tecnologia,s)||(i.mySkills.tecnologia=s),s}),z(),Te(10,"br"),q(11,"input",6),ke("click",function(){return i.AgregarJob()}),z()()(),q(12,"div",7),Ot(13,n$,5,2,"div",8),z()()),r&2&&(re(7),Me("ngModel",i.mySkills.lenguajes),re(2),Me("ngModel",i.mySkills.tecnologia),re(2),Vt("value",i.btntxt),re(2),Ft("ngForOf",i.skills))},dependencies:[Xt,nn,bt,en,tn,jt,Lt],styles:[".container[_ngcontent-%COMP%]{border-radius:10px;margin-bottom:2rem;background-color:var(--color-white);box-shadow:0 2px 6px #0000000d}-light[_ngcontent-%COMP%]{background-color:#fff}.section-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:#444;margin-bottom:1rem}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.txt[_ngcontent-%COMP%]{padding:.75rem;font-size:1rem;border:1px solid #ccc;border-radius:8px;width:100%;box-sizing:border-box}.btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;background-color:#444;color:#fff;border:none;border-radius:8px;font-size:1rem;cursor:pointer;transition:background-color .2s ease}.btn[_ngcontent-%COMP%]:hover{background-color:#222}.o-list[_ngcontent-%COMP%]{margin-top:2rem;display:flex;flex-direction:column;gap:.75rem}.o-item[_ngcontent-%COMP%]{background-color:#f0f0f0;padding:.75rem 1rem;border-radius:8px;display:flex;justify-content:space-between;align-items:center;font-size:1rem;color:#333}.delete-btn[_ngcontent-%COMP%]{background-color:transparent;border:1px solid #ccc;color:#b00020;padding:.4rem 1rem;border-radius:6px;font-size:.9rem;cursor:pointer;transition:all .2s ease}.delete-btn[_ngcontent-%COMP%]:hover{background-color:#ffeaea;border-color:#b00020}"]})}}return n})();var lp=class{};var gR=(()=>{class n{constructor(t){this.db=t,this.dbPath="/Languages",this.languagesRef=t.collection(this.dbPath)}getLanguages(){return this.languagesRef}createLanguage(t){return this.languagesRef.add(P({},t))}deleteLanguage(t){return this.languagesRef.doc(t).delete()}static{this.\u0275fac=function(r){return new(r||n)(F(sn))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function i$(n,e){if(n&1){let t=Yt();q(0,"div",8)(1,"span"),me(2),z(),q(3,"button",9),ke("click",function(){let i=Wt(t).$implicit,o=Zt();return Kt(o.deleteJob(i.id))}),me(4,"delete"),z()()}if(n&2){let t=e.$implicit;re(2),Zi(t.Language)}}var mR=(()=>{class n{constructor(t){this.languagesService=t,this.itemCount=0,this.btntxt="Agregar",this.goalText="",this.languages=[],this.myLaguages=new lp,console.log(this.languagesService),this.languagesService.getLanguages().snapshotChanges().pipe(Q(r=>r.map(i=>P({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.languages=r,console.log("lenguaes extraidos de firebase",this.languages)})}AgregarJob(){console.log(this.myLaguages),this.languagesService.createLanguage(this.myLaguages).then(()=>{console.log("Created new item successfully!")})}deleteJob(t){this.languagesService.deleteLanguage(t).then(()=>{console.log("delete item successfully!")}),console.log(t)}static{this.\u0275fac=function(r){return new(r||n)(se(gR))}}static{this.\u0275cmp=ft({type:n,selectors:[["app-admin-languages"]],decls:12,vars:3,consts:[[1,"container","color-dark"],[1,"col"],[1,"section-title"],[1,"container","color-light"],["type","text","name","language","placeholder","language",1,"txt",3,"ngModelChange","ngModel"],["type","submit",1,"btn",3,"click","value"],[1,"o-list"],["class","o-item",4,"ngFor","ngForOf"],[1,"o-item"],[1,"delete-btn",3,"click"]],template:function(r,i){r&1&&(q(0,"div",0)(1,"div",1)(2,"p",2),me(3,"languages items"),z()()(),q(4,"div",3)(5,"div",1)(6,"form")(7,"input",4),xe("ngModelChange",function(s){return Oe(i.myLaguages.Language,s)||(i.myLaguages.Language=s),s}),z(),Te(8,"br"),q(9,"input",5),ke("click",function(){return i.AgregarJob()}),z()()(),q(10,"div",6),Ot(11,i$,5,1,"div",7),z()()),r&2&&(re(7),Me("ngModel",i.myLaguages.Language),re(2),Vt("value",i.btntxt),re(2),Ft("ngForOf",i.languages))},dependencies:[Xt,nn,bt,en,tn,jt,Lt],styles:[".container[_ngcontent-%COMP%]{border-radius:10px;margin-bottom:2rem;background-color:var(--color-white);box-shadow:0 2px 6px #0000000d}-light[_ngcontent-%COMP%]{background-color:#fff}.section-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:#444;margin-bottom:1rem}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.txt[_ngcontent-%COMP%]{padding:.75rem;font-size:1rem;border:1px solid #ccc;border-radius:8px;width:100%;box-sizing:border-box}.btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;background-color:#444;color:#fff;border:none;border-radius:8px;font-size:1rem;cursor:pointer;transition:background-color .2s ease}.btn[_ngcontent-%COMP%]:hover{background-color:#222}.o-list[_ngcontent-%COMP%]{margin-top:2rem;display:flex;flex-direction:column;gap:.75rem}.o-item[_ngcontent-%COMP%]{background-color:#f0f0f0;padding:.75rem 1rem;border-radius:8px;display:flex;justify-content:space-between;align-items:center;font-size:1rem;color:#333}.delete-btn[_ngcontent-%COMP%]{background-color:transparent;border:1px solid #ccc;color:#b00020;padding:.4rem 1rem;border-radius:6px;font-size:.9rem;cursor:pointer;transition:all .2s ease}.delete-btn[_ngcontent-%COMP%]:hover{background-color:#ffeaea;border-color:#b00020}"]})}}return n})();var dp=class{};var yR=(()=>{class n{constructor(t){this.db=t,this.dbPath="/Interest",this.interestsRef=t.collection(this.dbPath)}getInterest(){return this.interestsRef}createInterests(t){return this.interestsRef.add(P({},t))}deleteInterets(t){return this.interestsRef.doc(t).delete()}static{this.\u0275fac=function(r){return new(r||n)(F(sn))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function s$(n,e){if(n&1){let t=Yt();q(0,"div",8)(1,"span"),me(2),z(),q(3,"button",9),ke("click",function(){let i=Wt(t).$implicit,o=Zt();return Kt(o.deleteJob(i.id))}),me(4,"delete"),z()()}if(n&2){let t=e.$implicit;re(2),Zi(t.Interest)}}var vR=(()=>{class n{constructor(t){this.interestsService=t,this.itemCount=0,this.btntxt="Agregar",this.goalText="",this.interests=[],this.myInterests=new dp,console.log(this.interestsService),this.interestsService.getInterest().snapshotChanges().pipe(Q(r=>r.map(i=>P({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.interests=r,console.log(this.interests)})}AgregarJob(){console.log(this.myInterests),this.interestsService.createInterests(this.myInterests).then(()=>{console.log("Created new item successfully!")})}deleteJob(t){this.interestsService.deleteInterets(t).then(()=>{console.log("delete item successfully!")}),console.log(t)}static{this.\u0275fac=function(r){return new(r||n)(se(yR))}}static{this.\u0275cmp=ft({type:n,selectors:[["app-admin-interests"]],decls:12,vars:3,consts:[[1,"container","color-dark"],[1,"col"],[1,"section-title"],[1,"container","color-light"],["type","text","name","description","placeholder","description",1,"txt",3,"ngModelChange","ngModel"],["type","submit",1,"btn",3,"click","value"],[1,"o-list"],["class","o-item",4,"ngFor","ngForOf"],[1,"o-item"],[1,"delete-btn",3,"click"]],template:function(r,i){r&1&&(q(0,"div",0)(1,"div",1)(2,"p",2),me(3,"interests items"),z()()(),q(4,"div",3)(5,"div",1)(6,"form")(7,"input",4),xe("ngModelChange",function(s){return Oe(i.myInterests.Interest,s)||(i.myInterests.Interest=s),s}),z(),Te(8,"br"),q(9,"input",5),ke("click",function(){return i.AgregarJob()}),z()()(),q(10,"div",6),Ot(11,s$,5,1,"div",7),z()()),r&2&&(re(7),Me("ngModel",i.myInterests.Interest),re(2),Vt("value",i.btntxt),re(2),Ft("ngForOf",i.interests))},dependencies:[Xt,nn,bt,en,tn,jt,Lt],styles:[".container[_ngcontent-%COMP%]{border-radius:10px;margin-bottom:2rem;background-color:var(--color-white);box-shadow:0 2px 6px #0000000d}-light[_ngcontent-%COMP%]{background-color:#fff}.section-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:#444;margin-bottom:1rem}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.txt[_ngcontent-%COMP%]{padding:.75rem;font-size:1rem;border:1px solid #ccc;border-radius:8px;width:100%;box-sizing:border-box}.btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;background-color:#444;color:#fff;border:none;border-radius:8px;font-size:1rem;cursor:pointer;transition:background-color .2s ease}.btn[_ngcontent-%COMP%]:hover{background-color:#222}.o-list[_ngcontent-%COMP%]{margin-top:2rem;display:flex;flex-direction:column;gap:.75rem}.o-item[_ngcontent-%COMP%]{background-color:#f0f0f0;padding:.75rem 1rem;border-radius:8px;display:flex;justify-content:space-between;align-items:center;font-size:1rem;color:#333}.delete-btn[_ngcontent-%COMP%]{background-color:transparent;border:1px solid #ccc;color:#b00020;padding:.4rem 1rem;border-radius:6px;font-size:.9rem;cursor:pointer;transition:all .2s ease}.delete-btn[_ngcontent-%COMP%]:hover{background-color:#ffeaea;border-color:#b00020}"]})}}return n})();var a$=[{path:"header",component:sR},{path:"workexperience",component:uR},{path:"education",component:lR},{path:"certificates",component:hR},{path:"skills",component:pR},{path:"languages",component:mR},{path:"interests",component:vR}],_R=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=pt({type:n})}static{this.\u0275inj=ht({imports:[ov.forRoot(a$),ov]})}}return n})();var wR=(()=>{class n{constructor(){this.title="admin-cv"}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=ft({type:n,selectors:[["app-root"]],decls:27,vars:0,consts:[[1,"app-title"],["routerLink","/header"],["routerLink","/workexperience"],["routerLink","/education"],["routerLink","/certificates"],["routerLink","/skills"],["routerLink","/languages"],["routerLink","/interests"]],template:function(r,i){r&1&&(q(0,"h3",0)(1,"b"),me(2," admin-Cv App"),z()(),q(3,"nav")(4,"ul")(5,"li")(6,"a",1),me(7," header "),z()(),q(8,"li")(9,"a",2),me(10," work-experience "),z()(),q(11,"li")(12,"a",3),me(13," education "),z()(),q(14,"li")(15,"a",4),me(16," certificates "),z()(),q(17,"li")(18,"a",5),me(19," skills "),z()(),q(20,"li")(21,"a",6),me(22," languages "),z()(),q(23,"li")(24,"a",7),me(25," interests "),z()()()(),Te(26,"router-outlet"))},dependencies:[Xy,oS],styles:[".app-title[_ngcontent-%COMP%]{text-align:center;font-size:2rem;font-weight:700;padding:1.2rem 0 .5rem;margin:0;color:#2d2d2d;background-color:#fafafa;border-bottom:1px solid #e1e1e1}nav[_ngcontent-%COMP%]{background-color:#fff;box-shadow:0 1px 4px #00000008;position:sticky;top:0;z-index:1000}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;display:flex;justify-content:center;gap:2rem;padding:1rem 0;margin:0;flex-wrap:wrap;border-bottom:1px solid #e0e0e0}nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline}nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#555;font-weight:500;padding:.5rem 1rem;border-radius:6px;transition:background-color .2s,color .2s}nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#f2f2f2;color:#000}nav[_ngcontent-%COMP%]   a.router-link-active[_ngcontent-%COMP%]{background-color:#444;color:#fff}/[_ngcontent-%COMP%]{}"]})}}return n})();var ER={production:!1,firebaseConfig:{apiKey:"AIzaSyDmyAaf-6SvFynKBXcqfU3gxUjXBgwHz-M",authDomain:"wikiman-85253.firebaseapp.com",projectId:"wikiman-85253",storageBucket:"wikiman-85253.firebasestorage.app",messagingSenderId:"523325811673",appId:"1:523325811673:web:f1ca5dfcf39a70dd4087c8",measurementId:"G-TXDTV55QSB"}};var IR=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=pt({type:n,bootstrap:[wR]})}static{this.\u0275inj=ht({imports:[Wb,yT,_R,CS.initializeApp(ER.firebaseConfig)]})}}return n})();Gb().bootstrapModule(IR,{ngZoneEventCoalescing:!0}).catch(n=>console.error(n));
